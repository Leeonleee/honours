{
  "repo": "dragonflydb/dragonfly",
  "pull_number": 1177,
  "instance_id": "dragonflydb__dragonfly-1177",
  "issue_numbers": [
    "856"
  ],
  "base_commit": "b4803842bc648dbfc09cbd4b2af4efcfc133c4b1",
  "patch": "diff --git a/src/server/stream_family.cc b/src/server/stream_family.cc\nindex cafb245589cd..d73c51ad2b04 100644\n--- a/src/server/stream_family.cc\n+++ b/src/server/stream_family.cc\n@@ -762,6 +762,7 @@ void StreamFamily::XRange(CmdArgList args, ConnectionContext* cntx) {\n }\n \n void StreamFamily::XRevRange(CmdArgList args, ConnectionContext* cntx) {\n+  swap(args[1], args[2]);\n   XRangeGeneric(std::move(args), true, cntx);\n }\n \n",
  "test_patch": "diff --git a/src/server/stream_family_test.cc b/src/server/stream_family_test.cc\nindex 25e3b7a4af19..80a1cd2a56ab 100644\n--- a/src/server/stream_family_test.cc\n+++ b/src/server/stream_family_test.cc\n@@ -76,7 +76,7 @@ TEST_F(StreamFamilyTest, Range) {\n   EXPECT_THAT(sub0, ElementsAre(\"1-0\", ArrLen(2)));\n   EXPECT_THAT(sub1, ElementsAre(\"1-1\", ArrLen(2)));\n \n-  resp = Run({\"xrevrange\", \"key\", \"-\", \"+\"});\n+  resp = Run({\"xrevrange\", \"key\", \"+\", \"-\"});\n   sub_arr = resp.GetVec();\n   sub0 = sub_arr[0].GetVec();\n   sub1 = sub_arr[1].GetVec();\n",
  "problem_statement": "Arguments of XREVRANGE are flipped\n**Description**\r\n\r\nIn `XRANGE`, the `-` and `+` tokens select the minimum and maximum IDs, respectively. So, the command\r\n\r\n```shell\r\nXRANGE stream - +\r\n```\r\nselects all items in the stream. In the context of `XREVRANGE`, the arguments to the command are flipped, i.e.,:\r\n\r\n```shell\r\nXREVRANGE stream end begin [COUNT count]\r\n```\r\nso, calling `XREVRANGE stream - +` should produce no meaningful output, however, it outputs the stream (in reverse):\r\n\r\n```\r\n127.0.0.1:6379> XRANGE stream - +\r\n1) 1) \"1676993775209-0\"\r\n   2) 1) \"f1\"\r\n      2) \"v1\"\r\n2) 1) \"1676993779209-0\"\r\n   2) 1) \"f2\"\r\n      2) \"v2\"\r\n3) 1) \"1676993781122-0\"\r\n   2) 1) \"f3\"\r\n      2) \"v3\"\r\n127.0.0.1:6379> XREVRANGE stream - +\r\n1) 1) \"1676993781122-0\"\r\n   2) 1) \"f3\"\r\n      2) \"v3\"\r\n2) 1) \"1676993779209-0\"\r\n   2) 1) \"f2\"\r\n      2) \"v2\"\r\n3) 1) \"1676993775209-0\"\r\n   2) 1) \"f1\"\r\n      2) \"v1\"\r\n```\r\nwhereas `XREVRANGE + -` produces an empty array.\r\n\r\nLikewise for specific ranges.\n",
  "hints_text": "",
  "created_at": "2023-05-03T06:24:46Z",
  "modified_files": [
    "src/server/stream_family.cc"
  ],
  "modified_test_files": [
    "src/server/stream_family_test.cc"
  ]
}