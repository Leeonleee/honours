You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
Dragonfly does not respect maxmemory limit
Originally reported by @anosulchik

Following on #210 and #207, it seems that Dragonfly can grow beyond the specified limit.

the API is mostly `setex` command. 

I have a working theory why it happens but I would like to understand more about the write pattern of the system. 

what's the average value size?
Does it mostly write new keys or update the existing keys? what's the ttl of the stored items?
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
