diff --git a/src/server/server_family.cc b/src/server/server_family.cc
index 58a6fbce36fd..e01cd2a9df95 100644
--- a/src/server/server_family.cc
+++ b/src/server/server_family.cc
@@ -2839,6 +2839,13 @@ void ServerFamily::ReplTakeOver(CmdArgList args, ConnectionContext* cntx) {
 }
 
 void ServerFamily::ReplConf(CmdArgList args, ConnectionContext* cntx) {
+  {
+    util::fb2::LockGuard lk(replicaof_mu_);
+    if (!ServerState::tlocal()->is_master) {
+      return cntx->SendError("Replicating a replica is unsupported");
+    }
+  }
+
   if (args.size() % 2 == 1)
     goto err;
   for (unsigned i = 0; i < args.size(); i += 2) {
