You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
Scripts should return error on non-conventional (global, nokey) commands
```
redis.call('FLUSHALL')
```

crashes DF in the regular mode, it should return an error instead, that any of those two should be used:


```
#!lua flags=disable-atomicity
redis.call('FLUSHALL')
```

```
#!lua flags=allow-undeclared-keys
redis.call('FLUSHALL')
```

or even add a new flag...? like management which implicitly means = allow-undeclared-keys?
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
