You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
cluster_test.py::test_migration_one_after_another test fail when using epoll
we get this check fail 
epoll_socket.cc:381] Check failed: async_write_req_ == nullptr 

StackTrace:
30002➜    @     0x55b96235e961  google::LogMessage::SendToLog()

30002➜    @     0x55b96235e136  google::LogMessage::Flush()

30002➜    @     0x55b962361fae  google::LogMessageFatal::~LogMessageFatal()

30002➜    @     0x55b96231b36e  util::fb2::EpollSocket::AsyncWriteSome()

30002➜    @     0x55b9623246e6  io::AsyncSink::AsyncWrite()

30002➜    @     0x55b961bd0eb1  dfly::JournalStreamer::AsyncWrite()

30002➜    @     0x55b961bd1508  dfly::JournalStreamer::OnCompletion()

30002➜    @     0x55b961bd0bc6  _ZZN4dfly15JournalStreamer10AsyncWriteEvENKUlSt10error_codeE_clES1_

30002➜    @     0x55b961bd54f3  _ZSt13__invoke_implIvRZN4dfly15JournalStreamer10AsyncWriteEvEUlSt10error_codeE_JS2_EET_St14__invoke_otherOT0_DpOT1_

30002➜    @     0x55b961bd4fac  _ZSt10__invoke_rIvRZN4dfly15JournalStreamer10AsyncWriteEvEUlSt10error_codeE_JS2_EENSt9enable_ifIX16is_invocable_r_vIT_T0_DpT1_EES6_E4typeEOS7_DpOS8_

30002➜    @     0x55b961bd4989  _ZNSt17_Function_handlerIFvSt10error_codeEZN4dfly15JournalStreamer10AsyncWriteEvEUlS0_E_E9_M_invokeERKSt9_Any_dataOS0_

30002➜    @     0x55b962326263  std::function<>::operator()()

30002➜    @     0x55b9623235c5  io::(anonymous namespace)::AsyncWriteState::OnCb()

30002➜    @     0x55b962323379  _ZZN2io12_GLOBAL__N_115AsyncWriteState4OnCbEN6nonstd13expected_lite8expectedImSt10error_codeEEENKUlS6_E_clES6_

30002➜    @     0x55b9623258be  _ZSt13__invoke_implIvRZN2io12_GLOBAL__N_115AsyncWriteState4OnCbEN6nonstd13expected_lite8expectedImSt10error_codeEEEUlS7_E_JS7_EET_St14__invoke_otherOT0_DpOT1_

30002➜    @     0x55b96232531b  _ZSt10__invoke_rIvRZN2io12_GLOBAL__N_115AsyncWriteState4OnCbEN6nonstd13expected_lite8expectedImSt10error_codeEEEUlS7_E_JS7_EENSt9enable_ifIX16is_invocable_r_vIT_T0_DpT1_EESB_E4typeEOSC_DpOSD_

30002➜    @     0x55b962324ec1  _ZNSt17_Function_handlerIFvN6nonstd13expected_lite8expectedImSt10error_codeEEEZN2io12_GLOBAL__N_115AsyncWriteState4OnCbES4_EUlS4_E_E9_M_invokeERKSt9_Any_dataOS4_

30002➜    @     0x55b96225ef99  std::function<>::operator()()

30002➜    @     0x55b962318f97  util::fb2::EpollSocket::AsyncReq::Run()

30002➜    @     0x55b96231d609  util::fb2::EpollSocket::Wakey()

30002➜    @     0x55b962319915  _ZZN4util3fb211EpollSocket13OnSetProactorEvENKUljiPNS0_13EpollProactorEE_clEjiS3_

30002➜    @     0x55b96231e0c2  _ZSt13__invoke_implIvRZN4util3fb211EpollSocket13OnSetProactorEvEUljiPNS1_13EpollProactorEE_JjiS4_EET_St14__invoke_otherOT0_DpOT1_

30002➜    @     0x55b96231dedc  _ZSt10__invoke_rIvRZN4util3fb211EpollSocket13OnSetProactorEvEUljiPNS1_13EpollProactorEE_JjiS4_EENSt9enable_ifIX16is_invocable_r_vIT_T0_DpT1_EES8_E4typeEOS9_DpOSA_

30002➜    @     0x55b96231dc29  _ZNSt17_Function_handlerIFvjiPN4util3fb213EpollProactorEEZNS1_11EpollSocket13OnSetProactorEvEUljiS3_E_E9_M_invokeERKSt9_Any_dataOjOiOS3_

30002➜    @     0x55b962317d48  std::function<>::operator()()

30002➜    @     0x55b962316aec  util::fb2::EpollProactor::DispatchCompletions()

30002➜    @     0x55b9623148ec  util::fb2::EpollProactor::MainLoop()

30002➜    @     0x55b962262871  util::fb2::ProactorDispatcher::Run()

30002➜    @     0x55b96227868f  util::fb2::detail::(anonymous namespace)::DispatcherImpl::Run()


It looks like we get the check fail from the JournalStreamer::OnCompletion call which calls again the AsyncWrite.
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
