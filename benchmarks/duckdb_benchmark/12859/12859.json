{
  "repo": "duckdb/duckdb",
  "pull_number": 12859,
  "instance_id": "duckdb__duckdb-12859",
  "issue_numbers": [
    "12789",
    "12789"
  ],
  "base_commit": "cc2dc1d6d4b29b1b20c94e70061de2f441b794a1",
  "patch": "diff --git a/src/function/scalar/list/list_zip.cpp b/src/function/scalar/list/list_zip.cpp\nindex 7e05038280da..6e24689cfe03 100644\n--- a/src/function/scalar/list/list_zip.cpp\n+++ b/src/function/scalar/list/list_zip.cpp\n@@ -1,5 +1,6 @@\n #include \"duckdb/common/types/data_chunk.hpp\"\n #include \"duckdb/function/scalar/nested_functions.hpp\"\n+#include \"duckdb/planner/expression/bound_cast_expression.hpp\"\n #include \"duckdb/planner/expression_binder.hpp\"\n #include \"duckdb/planner/expression/bound_function_expression.hpp\"\n #include \"duckdb/planner/expression/bound_parameter_expression.hpp\"\n@@ -138,6 +139,8 @@ static unique_ptr<FunctionData> ListZipBind(ClientContext &context, ScalarFuncti\n \t\tauto &child = arguments[i];\n \t\tswitch (child->return_type.id()) {\n \t\tcase LogicalTypeId::LIST:\n+\t\tcase LogicalTypeId::ARRAY:\n+\t\t\tchild = BoundCastExpression::AddArrayCastToList(context, std::move(child));\n \t\t\tstruct_children.push_back(make_pair(string(), ListType::GetChildType(child->return_type)));\n \t\t\tbreak;\n \t\tcase LogicalTypeId::SQLNULL:\n",
  "test_patch": "diff --git a/test/sql/function/list/list_zip.test b/test/sql/function/list/list_zip.test\nindex da2ef5a8832c..243b14b1df26 100644\n--- a/test/sql/function/list/list_zip.test\n+++ b/test/sql/function/list/list_zip.test\n@@ -44,6 +44,21 @@ SELECT list_zip([1,2,3], [1,2])\n ----\n [(1, 1), (2, 2), (3, NULL)]\n \n+query I\n+SELECT list_zip([1, 2, 3]::int[3], [1, 2]::int[2], true)\n+----\n+[(1, 1), (2, 2)]\n+\n+query I\n+SELECT list_zip([1, 2, 3]::int[3], [1, 2, 3]::int[3])\n+----\n+[(1, 1), (2, 2), (3, 3)]\n+\n+query I\n+SELECT list_zip([1, '2', 3]::int[], [1, 2, 3]::int[3])\n+----\n+[(1, 1), (2, 2), (3, 3)]\n+\n query I\n SELECT list_zip([1,2], [1,2,3])\n ----\n",
  "problem_statement": "list_zip does not support arrays (requires list)\n### What happens?\r\n\r\nIf I pass in arrays as parameters to `list_zip`, I receive a binder error that their types must be list.\r\n\r\n### To Reproduce\r\n\r\nThis works:\r\n```sql\r\nselect list_zip([1, 2, 3]::int[], [1, 2, 3]::int[])\r\n```\r\n\r\nThis does not work:\r\n```sql\r\nselect list_zip([1, 2, 3]::int[3], [1, 2, 3]::int[3])\r\n```\r\n```\r\nBinderException: Binder Error: Parameter type needs to be List\r\n```\r\n(Note that the error message is from running in Python, but the same error appears in the CLI also)\r\n\r\n### OS:\r\n\r\nMacOS\r\n\r\n### DuckDB Version:\r\n\r\n1.0.0\r\n\r\n### DuckDB Client:\r\n\r\nCLI, Python\r\n\r\n### Full Name:\r\n\r\nAlex Monahan\r\n\r\n### Affiliation:\r\n\r\nDuckDB Labs and MotherDuck\r\n\r\n### What is the latest build you tested with? If possible, we recommend testing with the latest nightly build.\r\n\r\nI have tested with a nightly build\r\n\r\n### Did you include all relevant data sets for reproducing the issue?\r\n\r\nNot applicable - the reproduction does not require a data set\r\n\r\n### Did you include all code required to reproduce the issue?\r\n\r\n- [X] Yes, I have\r\n\r\n### Did you include all relevant configuration (e.g., CPU architecture, Python version, Linux distribution) to reproduce the issue?\r\n\r\n- [X] Yes, I have\nlist_zip does not support arrays (requires list)\n### What happens?\r\n\r\nIf I pass in arrays as parameters to `list_zip`, I receive a binder error that their types must be list.\r\n\r\n### To Reproduce\r\n\r\nThis works:\r\n```sql\r\nselect list_zip([1, 2, 3]::int[], [1, 2, 3]::int[])\r\n```\r\n\r\nThis does not work:\r\n```sql\r\nselect list_zip([1, 2, 3]::int[3], [1, 2, 3]::int[3])\r\n```\r\n```\r\nBinderException: Binder Error: Parameter type needs to be List\r\n```\r\n(Note that the error message is from running in Python, but the same error appears in the CLI also)\r\n\r\n### OS:\r\n\r\nMacOS\r\n\r\n### DuckDB Version:\r\n\r\n1.0.0\r\n\r\n### DuckDB Client:\r\n\r\nCLI, Python\r\n\r\n### Full Name:\r\n\r\nAlex Monahan\r\n\r\n### Affiliation:\r\n\r\nDuckDB Labs and MotherDuck\r\n\r\n### What is the latest build you tested with? If possible, we recommend testing with the latest nightly build.\r\n\r\nI have tested with a nightly build\r\n\r\n### Did you include all relevant data sets for reproducing the issue?\r\n\r\nNot applicable - the reproduction does not require a data set\r\n\r\n### Did you include all code required to reproduce the issue?\r\n\r\n- [X] Yes, I have\r\n\r\n### Did you include all relevant configuration (e.g., CPU architecture, Python version, Linux distribution) to reproduce the issue?\r\n\r\n- [X] Yes, I have\n",
  "hints_text": "\n",
  "created_at": "2024-07-05T09:56:33Z",
  "modified_files": [
    "src/function/scalar/list/list_zip.cpp"
  ],
  "modified_test_files": [
    "test/sql/function/list/list_zip.test"
  ]
}