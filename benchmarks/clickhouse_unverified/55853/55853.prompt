You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
Deleting database that I'm currently in
Using ClickHouse Local, if I create a database:

```
$ clickhouse local -m --path archives.chdb
Processing configuration file 'config.xml'.
ClickHouse local version 23.9.1.1854 (official build).

:) create database foo;

CREATE DATABASE foo

Query id: b6ccc456-0334-4ce1-a644-9d6cfeac09b8

Ok.

0 rows in set. Elapsed: 0.002 sec.

:) use foo;

USE foo

Query id: 3ab73c2b-4c81-4c56-9717-1f3c19ffbd3b

Ok.

0 rows in set. Elapsed: 0.000 sec.
```

And then drop it while it's my current database:

```
:) drop database foo;

DROP DATABASE foo

Query id: b5ec1e84-1120-44ef-989f-fe9228a8218b

Ok.

0 rows in set. Elapsed: 0.001 sec.
```

I'm now a bit stuck!

```
:) select 1;

SELECT 1

Query id: 5fd07bab-ef65-4cc1-93b9-a797d7f7154e

Exception on client:
Code: 81. DB::Exception: Database foo does not exist. (UNKNOWN_DATABASE)

:) use _local;

USE _local

Query id: 77296f9e-6e8e-40c7-a06d-479d3c88ea8d

Exception on client:
Code: 81. DB::Exception: Database foo does not exist. (UNKNOWN_DATABASE)
```

I think maybe it shouldn't let me delete a database if I'm using that one, otherwise there's no escape?
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
