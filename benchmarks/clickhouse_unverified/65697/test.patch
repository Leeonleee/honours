diff --git a/tests/queries/0_stateless/03196_local_memory_limit.reference b/tests/queries/0_stateless/03196_local_memory_limit.reference
new file mode 100644
index 000000000000..f2e22e8aa5b7
--- /dev/null
+++ b/tests/queries/0_stateless/03196_local_memory_limit.reference
@@ -0,0 +1,1 @@
+maximum: 95.37 MiB
diff --git a/tests/queries/0_stateless/03196_local_memory_limit.sh b/tests/queries/0_stateless/03196_local_memory_limit.sh
new file mode 100755
index 000000000000..346b37be006b
--- /dev/null
+++ b/tests/queries/0_stateless/03196_local_memory_limit.sh
@@ -0,0 +1,7 @@
+#!/usr/bin/env bash
+
+CUR_DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CUR_DIR"/../shell_config.sh
+
+${CLICKHOUSE_LOCAL} --config-file <(echo "<clickhouse><max_server_memory_usage>100M</max_server_memory_usage></clickhouse>") --query "SELECT number FROM system.numbers GROUP BY number HAVING count() > 1" 2>&1 | grep -o -P 'maximum: [\d\.]+ MiB'
