{
  "repo": "ClickHouse/ClickHouse",
  "pull_number": 31697,
  "instance_id": "ClickHouse__ClickHouse-31697",
  "issue_numbers": [
    "31686"
  ],
  "base_commit": "2da5c6b71b7969775b57bccf2a35ce16e7898ca9",
  "patch": "diff --git a/src/Processors/Formats/IRowInputFormat.cpp b/src/Processors/Formats/IRowInputFormat.cpp\nindex 92f313d110d8..c4857326e6e4 100644\n--- a/src/Processors/Formats/IRowInputFormat.cpp\n+++ b/src/Processors/Formats/IRowInputFormat.cpp\n@@ -21,6 +21,7 @@ namespace ErrorCodes\n     extern const int INCORRECT_NUMBER_OF_COLUMNS;\n     extern const int ARGUMENT_OUT_OF_BOUND;\n     extern const int INCORRECT_DATA;\n+    extern const int CANNOT_PARSE_DOMAIN_VALUE_FROM_STRING;\n }\n \n \n@@ -36,7 +37,8 @@ bool isParseError(int code)\n         || code == ErrorCodes::CANNOT_READ_ALL_DATA\n         || code == ErrorCodes::TOO_LARGE_STRING_SIZE\n         || code == ErrorCodes::ARGUMENT_OUT_OF_BOUND       /// For Decimals\n-        || code == ErrorCodes::INCORRECT_DATA;             /// For some ReadHelpers\n+        || code == ErrorCodes::INCORRECT_DATA              /// For some ReadHelpers\n+        || code == ErrorCodes::CANNOT_PARSE_DOMAIN_VALUE_FROM_STRING;\n }\n \n IRowInputFormat::IRowInputFormat(Block header, ReadBuffer & in_, Params params_)\n",
  "test_patch": "diff --git a/tests/queries/0_stateless/00418_input_format_allow_errors.sh b/tests/queries/0_stateless/00418_input_format_allow_errors.sh\nindex b27c6f3fe294..4f0ee77a85d5 100755\n--- a/tests/queries/0_stateless/00418_input_format_allow_errors.sh\n+++ b/tests/queries/0_stateless/00418_input_format_allow_errors.sh\n@@ -26,3 +26,5 @@ echo -ne 'x=1\\ts=TSKV\\nx=minus2\\ts=trash1\\ns=trash2\\tx=-3\\ns=TSKV Ok\\tx=4\\ns=tra\n $CLICKHOUSE_CLIENT --query=\"SELECT * FROM formats_test ORDER BY x, s\"\n \n $CLICKHOUSE_CLIENT --query=\"DROP TABLE formats_test\"\n+\n+echo '::' | $CLICKHOUSE_LOCAL --structure 'i IPv4' --query='SELECT * FROM table' --input_format_allow_errors_num=1\n",
  "problem_statement": "input_format_allow_errors_num don't allow to skip bad IPv4\n```\r\necho '::' | clickhouse-local --structure 'i IPv4' --query='SELECT * FROM table' --input_format_allow_errors_num=1\r\n```\n",
  "hints_text": "",
  "created_at": "2021-11-24T12:47:14Z",
  "modified_files": [
    "src/Processors/Formats/IRowInputFormat.cpp"
  ],
  "modified_test_files": [
    "tests/queries/0_stateless/00418_input_format_allow_errors.sh"
  ]
}