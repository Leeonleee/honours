diff --git a/tests/queries/0_stateless/01656_ipv4_bad_formatting.reference b/tests/queries/0_stateless/01656_ipv4_bad_formatting.reference
new file mode 100644
index 000000000000..a7b5c448f132
--- /dev/null
+++ b/tests/queries/0_stateless/01656_ipv4_bad_formatting.reference
@@ -0,0 +1,4 @@
+┌─x───────────────┬─y───────────────┬──────────z─┐
+│ 1.1.1.1         │ 1.1.1.1         │   16843009 │
+│ 255.255.255.255 │ 255.255.255.255 │ 4294967295 │
+└─────────────────┴─────────────────┴────────────┘
diff --git a/tests/queries/0_stateless/01656_ipv4_bad_formatting.sql b/tests/queries/0_stateless/01656_ipv4_bad_formatting.sql
new file mode 100644
index 000000000000..a0b253ea31ae
--- /dev/null
+++ b/tests/queries/0_stateless/01656_ipv4_bad_formatting.sql
@@ -0,0 +1,1 @@
+SELECT arrayJoin(['1.1.1.1', '255.255.255.255']) AS x, toIPv4(x) AS y, toUInt32(y) AS z FORMAT PrettyCompactNoEscapes;
