diff --git a/tests/queries/0_stateless/02906_force_optimize_projection_name.reference b/tests/queries/0_stateless/02906_force_optimize_projection_name.reference
new file mode 100644
index 000000000000..9daeafb9864c
--- /dev/null
+++ b/tests/queries/0_stateless/02906_force_optimize_projection_name.reference
@@ -0,0 +1,1 @@
+test
diff --git a/tests/queries/0_stateless/02906_force_optimize_projection_name.sql b/tests/queries/0_stateless/02906_force_optimize_projection_name.sql
new file mode 100644
index 000000000000..773f8cc514d7
--- /dev/null
+++ b/tests/queries/0_stateless/02906_force_optimize_projection_name.sql
@@ -0,0 +1,19 @@
+CREATE TABLE test
+(
+   `id` UInt64,
+   `name` String,
+   PROJECTION projection_name
+   (
+       SELECT sum(id) GROUP BY id, name
+   )
+)
+ENGINE = MergeTree()
+ORDER BY id;
+
+INSERT INTO test SELECT number, 'test' FROM numbers(1, 100);
+
+SELECT name FROM test GROUP BY name SETTINGS force_optimize_projection_name='projection_name';
+
+SELECT name FROM test GROUP BY name SETTINGS force_optimize_projection_name='non_existing_projection'; -- { serverError 117 }
+
+SELECT name FROM test SETTINGS force_optimize_projection_name='projection_name'; -- { serverError 117 }
