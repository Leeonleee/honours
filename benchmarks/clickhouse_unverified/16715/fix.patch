diff --git a/src/Server/MySQLHandler.cpp b/src/Server/MySQLHandler.cpp
index c88b9016e84b..957930ad43bb 100644
--- a/src/Server/MySQLHandler.cpp
+++ b/src/Server/MySQLHandler.cpp
@@ -328,6 +328,16 @@ void MySQLHandler::comQuery(ReadBuffer & payload)
 
         Context query_context = connection_context;
 
+        std::atomic<size_t> affected_rows {0};
+        auto prev = query_context.getProgressCallback();
+        query_context.setProgressCallback([&, prev = prev](const Progress & progress)
+        {
+            if (prev)
+                prev(progress);
+
+            affected_rows += progress.written_rows;
+        });
+
         executeQuery(should_replace ? replacement : payload, *out, true, query_context,
             [&with_output](const String &, const String &, const String &, const String &)
             {
@@ -336,7 +346,7 @@ void MySQLHandler::comQuery(ReadBuffer & payload)
         );
 
         if (!with_output)
-            packet_endpoint->sendPacket(OKPacket(0x00, client_capability_flags, 0, 0, 0), true);
+            packet_endpoint->sendPacket(OKPacket(0x00, client_capability_flags, affected_rows, 0, 0), true);
     }
 }
 
