diff --git a/tests/queries/0_stateless/02151_replace_regexp_all_empty_match_alternative.reference b/tests/queries/0_stateless/02151_replace_regexp_all_empty_match_alternative.reference
index e8183f05f5db..da7b788b1575 100644
--- a/tests/queries/0_stateless/02151_replace_regexp_all_empty_match_alternative.reference
+++ b/tests/queries/0_stateless/02151_replace_regexp_all_empty_match_alternative.reference
@@ -1,3 +1,18 @@
 1
 1
 1
+1
+1
+1
+1
+1
+1
+1
+1
+1
+1
+1
+1
+1
+1
+1
diff --git a/tests/queries/0_stateless/02151_replace_regexp_all_empty_match_alternative.sql b/tests/queries/0_stateless/02151_replace_regexp_all_empty_match_alternative.sql
index 6725fa041140..ebbc6ce97e0f 100644
--- a/tests/queries/0_stateless/02151_replace_regexp_all_empty_match_alternative.sql
+++ b/tests/queries/0_stateless/02151_replace_regexp_all_empty_match_alternative.sql
@@ -1,3 +1,21 @@
-select replaceRegexpAll(',,1,,', '^[,]*|[,]*$', '') x;
-select replaceRegexpAll(',,1', '^[,]*|[,]*$', '') x;
-select replaceRegexpAll('1,,', '^[,]*|[,]*$', '') x;
+SELECT replaceRegexpAll(',,1,,', '^[,]*|[,]*$', '');
+SELECT replaceRegexpAll(',,1', '^[,]*|[,]*$', '');
+SELECT replaceRegexpAll('1,,', '^[,]*|[,]*$', '');
+
+SELECT replaceRegexpAll(materialize(',,1,,'), '^[,]*|[,]*$', '');
+SELECT replaceRegexpAll(materialize(',,1'), '^[,]*|[,]*$', '');
+SELECT replaceRegexpAll(materialize('1,,'), '^[,]*|[,]*$', '');
+
+SELECT replaceRegexpAll('a', 'z*', '') == 'a';
+SELECT replaceRegexpAll('aa', 'z*', '') == 'aa';
+SELECT replaceRegexpAll('aaq', 'z*', '') == 'aaq';
+SELECT replaceRegexpAll('aazq', 'z*', '') == 'aaq';
+SELECT replaceRegexpAll('aazzq', 'z*', '') == 'aaq';
+SELECT replaceRegexpAll('aazzqa', 'z*', '') == 'aaqa';
+
+SELECT replaceRegexpAll(materialize('a'), 'z*', '') == 'a';
+SELECT replaceRegexpAll(materialize('aa'), 'z*', '') == 'aa';
+SELECT replaceRegexpAll(materialize('aaq'), 'z*', '') == 'aaq';
+SELECT replaceRegexpAll(materialize('aazq'), 'z*', '') == 'aaq';
+SELECT replaceRegexpAll(materialize('aazzq'), 'z*', '') == 'aaq';
+SELECT replaceRegexpAll(materialize('aazzqa'), 'z*', '') == 'aaqa';
