diff --git a/tests/queries/0_stateless/02354_window_expression_with_aggregation_expression.reference b/tests/queries/0_stateless/02354_window_expression_with_aggregation_expression.reference
new file mode 100644
index 000000000000..494a1a0cd497
--- /dev/null
+++ b/tests/queries/0_stateless/02354_window_expression_with_aggregation_expression.reference
@@ -0,0 +1,15 @@
+100
+100
+-- { echoOn }
+SELECT arrayMap(x -> (x + 1), groupArray(number) OVER ()) AS result
+FROM numbers(10);
+[1,2,3,4,5,6,7,8,9,10]
+[1,2,3,4,5,6,7,8,9,10]
+[1,2,3,4,5,6,7,8,9,10]
+[1,2,3,4,5,6,7,8,9,10]
+[1,2,3,4,5,6,7,8,9,10]
+[1,2,3,4,5,6,7,8,9,10]
+[1,2,3,4,5,6,7,8,9,10]
+[1,2,3,4,5,6,7,8,9,10]
+[1,2,3,4,5,6,7,8,9,10]
+[1,2,3,4,5,6,7,8,9,10]
diff --git a/tests/queries/0_stateless/02354_window_expression_with_aggregation_expression.sql b/tests/queries/0_stateless/02354_window_expression_with_aggregation_expression.sql
new file mode 100644
index 000000000000..21da3c5f403d
--- /dev/null
+++ b/tests/queries/0_stateless/02354_window_expression_with_aggregation_expression.sql
@@ -0,0 +1,16 @@
+SELECT 
+    sum(a)*100/sum(sum(a)) OVER (PARTITION BY b) AS r
+FROM 
+(
+  SELECT 1 AS a, 2 AS b
+  UNION ALL
+  SELECT 3 AS a, 4 AS b
+  UNION ALL
+  SELECT 5 AS a, 2 AS b
+
+) AS t
+GROUP BY b;
+
+-- { echoOn }
+SELECT arrayMap(x -> (x + 1), groupArray(number) OVER ()) AS result
+FROM numbers(10);
