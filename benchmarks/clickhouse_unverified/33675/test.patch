diff --git a/tests/queries/0_stateless/02178_column_function_insert_from.reference b/tests/queries/0_stateless/02178_column_function_insert_from.reference
new file mode 100644
index 000000000000..480bb5ef6e74
--- /dev/null
+++ b/tests/queries/0_stateless/02178_column_function_insert_from.reference
@@ -0,0 +1,2 @@
+1	0	['1']
+1	1	['1']
diff --git a/tests/queries/0_stateless/02178_column_function_insert_from.sql b/tests/queries/0_stateless/02178_column_function_insert_from.sql
new file mode 100644
index 000000000000..13d1ebb4788a
--- /dev/null
+++ b/tests/queries/0_stateless/02178_column_function_insert_from.sql
@@ -0,0 +1,14 @@
+DROP TABLE IF EXISTS TESTTABLE;
+
+CREATE TABLE TESTTABLE (
+  _id UInt64,  pt String, attr_list Array(String)
+) ENGINE = MergeTree() PARTITION BY (pt) ORDER BY tuple();
+
+INSERT INTO TESTTABLE values (0,'0',['1']), (1,'1',['1']);
+
+SET max_threads = 1;
+
+SELECT attr, _id, arrayFilter(x -> (x IN (select '1')), attr_list) z
+FROM TESTTABLE ARRAY JOIN z AS attr ORDER BY _id LIMIT 3 BY attr;
+
+DROP TABLE TESTTABLE;
