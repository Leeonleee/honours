diff --git a/tests/queries/0_stateless/01317_no_password_in_command_line.reference b/tests/queries/0_stateless/01317_no_password_in_command_line.reference
index e69de29bb2d1..8f2f637d5e37 100644
--- a/tests/queries/0_stateless/01317_no_password_in_command_line.reference
+++ b/tests/queries/0_stateless/01317_no_password_in_command_line.reference
@@ -0,0 +1,1 @@
+Bad arguments
diff --git a/tests/queries/0_stateless/01317_no_password_in_command_line.sh b/tests/queries/0_stateless/01317_no_password_in_command_line.sh
index 7f2e91201a32..fc5b89976368 100755
--- a/tests/queries/0_stateless/01317_no_password_in_command_line.sh
+++ b/tests/queries/0_stateless/01317_no_password_in_command_line.sh
@@ -45,3 +45,5 @@ ps u --no-header $bg_query | grep -F -- '--password' | grep -F hello ||:
 grep -F -- '--password' < "/proc/$bg_query/comm" | grep -F hello ||:
 $CLICKHOUSE_CLIENT --format Null --param_query_id "$query_id" -q "KILL QUERY WHERE query_id = {query_id:String} SYNC"
 wait
+
+$CLICKHOUSE_CLIENT --user "$user" --password=hello --password -q 'select currentUser()' 2>&1 | grep -o 'Bad arguments'
