diff --git a/tests/queries/0_stateless/01559_misplaced_codec_diagnostics.reference b/tests/queries/0_stateless/01559_misplaced_codec_diagnostics.reference
new file mode 100644
index 000000000000..d5bdb816bf2c
--- /dev/null
+++ b/tests/queries/0_stateless/01559_misplaced_codec_diagnostics.reference
@@ -0,0 +1,1 @@
+Unknown data type family: CODEC
diff --git a/tests/queries/0_stateless/01559_misplaced_codec_diagnostics.sh b/tests/queries/0_stateless/01559_misplaced_codec_diagnostics.sh
new file mode 100755
index 000000000000..9904b6388d61
--- /dev/null
+++ b/tests/queries/0_stateless/01559_misplaced_codec_diagnostics.sh
@@ -0,0 +1,6 @@
+#!/usr/bin/env bash
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+. "$CURDIR"/../shell_config.sh
+
+${CLICKHOUSE_CLIENT} --query "CREATE TABLE t (c CODEC(NONE)) ENGINE = Memory" 2>&1 | grep -oF 'Unknown data type family: CODEC' | uniq
