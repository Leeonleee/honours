diff --git a/tests/queries/0_stateless/01668_avg_weighted_ubsan.reference b/tests/queries/0_stateless/01668_avg_weighted_ubsan.reference
index ec064f61ba77..a8921b27cffc 100644
--- a/tests/queries/0_stateless/01668_avg_weighted_ubsan.reference
+++ b/tests/queries/0_stateless/01668_avg_weighted_ubsan.reference
@@ -1,1 +1,14 @@
 -0
+nan
+nan
+1
+2
+3
+4
+5
+6
+7
+8
+9
+nan
+nan
diff --git a/tests/queries/0_stateless/01668_avg_weighted_ubsan.sql b/tests/queries/0_stateless/01668_avg_weighted_ubsan.sql
index 24e7dc0cb90d..1c31c23eaee3 100644
--- a/tests/queries/0_stateless/01668_avg_weighted_ubsan.sql
+++ b/tests/queries/0_stateless/01668_avg_weighted_ubsan.sql
@@ -1,1 +1,5 @@
 SELECT round(avgWeighted(x, y)) FROM (SELECT 1023 AS x, 1000000000 AS y UNION ALL SELECT 10 AS x, -9223372036854775808 AS y);
+select avgWeighted(number, toDecimal128(number, 9)) from numbers(0);
+SELECT avgWeighted(a, toDecimal64(c, 9)) OVER (PARTITION BY c) FROM (SELECT number AS a, number AS c FROM numbers(10));
+select avg(toDecimal128(number, 9)) from numbers(0);
+select avgWeighted(number, toDecimal128(0, 9)) from numbers(10);
