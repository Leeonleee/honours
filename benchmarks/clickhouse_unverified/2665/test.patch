diff --git a/dbms/tests/queries/0_stateless/00148_summing_merge_tree_aggregate_function.reference b/dbms/tests/queries/0_stateless/00148_summing_merge_tree_aggregate_function.reference
index b6979ab566fb..fa222b7b8115 100644
--- a/dbms/tests/queries/0_stateless/00148_summing_merge_tree_aggregate_function.reference
+++ b/dbms/tests/queries/0_stateless/00148_summing_merge_tree_aggregate_function.reference
@@ -1,3 +1,5 @@
+10000
+10000
 1	6	3	3
 1	6	3	3
 1	6	[3,2]
diff --git a/dbms/tests/queries/0_stateless/00148_summing_merge_tree_aggregate_function.sql b/dbms/tests/queries/0_stateless/00148_summing_merge_tree_aggregate_function.sql
index 3a9883605f78..71068e0f74f6 100644
--- a/dbms/tests/queries/0_stateless/00148_summing_merge_tree_aggregate_function.sql
+++ b/dbms/tests/queries/0_stateless/00148_summing_merge_tree_aggregate_function.sql
@@ -1,6 +1,33 @@
 drop table if exists test.summing_merge_tree_aggregate_function;
 drop table if exists test.summing_merge_tree_null;
 
+---- partition merge
+create table test.summing_merge_tree_aggregate_function (
+	d Date,
+	k UInt64,
+	u AggregateFunction(uniq, UInt64)
+) engine=SummingMergeTree(d, k, 1);
+
+insert into test.summing_merge_tree_aggregate_function
+select today() as d,
+       number as k,
+       uniqState(toUInt64(number % 500))
+from numbers(5000)
+group by d, k;
+
+insert into test.summing_merge_tree_aggregate_function
+select today() as d,
+       number + 5000 as k,
+       uniqState(toUInt64(number % 500))
+from numbers(5000)
+group by d, k;
+
+select count() from test.summing_merge_tree_aggregate_function;
+optimize table test.summing_merge_tree_aggregate_function;
+select count() from test.summing_merge_tree_aggregate_function;
+
+drop table test.summing_merge_tree_aggregate_function;
+
 ---- sum + uniq + uniqExact
 create table test.summing_merge_tree_aggregate_function (
 	d materialized today(),
