diff --git a/docker/test/stateless/Dockerfile b/docker/test/stateless/Dockerfile
index 9b7fde7d542a..bfc6763e8c5b 100644
--- a/docker/test/stateless/Dockerfile
+++ b/docker/test/stateless/Dockerfile
@@ -31,7 +31,8 @@ RUN apt-get update -y \
             wget \
             mysql-client=8.0* \
             postgresql-client \
-            sqlite3
+            sqlite3 \
+            awscli
 
 RUN pip3 install numpy scipy pandas Jinja2
 
diff --git a/docker/test/stateless/setup_minio.sh b/docker/test/stateless/setup_minio.sh
index 7f8b90ee7414..df27b21b05b7 100755
--- a/docker/test/stateless/setup_minio.sh
+++ b/docker/test/stateless/setup_minio.sh
@@ -55,3 +55,10 @@ for FILE in $(ls "${MINIO_DATA_PATH}"); do
     echo "$FILE";
     ./mc cp "${MINIO_DATA_PATH}"/"$FILE" clickminio/test/"$FILE";
 done
+
+mkdir -p ~/.aws
+cat <<EOT >> ~/.aws/credentials
+[default]
+aws_access_key_id=clickhouse
+aws_secret_access_key=clickhouse
+EOT
diff --git a/tests/queries/0_stateless/02207_s3_content_type.reference b/tests/queries/0_stateless/02207_s3_content_type.reference
new file mode 100644
index 000000000000..2b0a5bcadc29
--- /dev/null
+++ b/tests/queries/0_stateless/02207_s3_content_type.reference
@@ -0,0 +1,2 @@
+ContentLength:2144451
+ContentType:binary/octet-stream
diff --git a/tests/queries/0_stateless/02207_s3_content_type.sh b/tests/queries/0_stateless/02207_s3_content_type.sh
new file mode 100755
index 000000000000..5ede30e867c1
--- /dev/null
+++ b/tests/queries/0_stateless/02207_s3_content_type.sh
@@ -0,0 +1,13 @@
+#!/usr/bin/env bash
+# Tags: no-fasttest
+# Tag no-fasttest: needs s3
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CURDIR"/../shell_config.sh
+
+$CLICKHOUSE_CLIENT --query "
+INSERT INTO TABLE FUNCTION s3('http://localhost:11111/test/content-type.csv.gz', 'test', 'testtest', 'CSV', 'number UInt64') SELECT number FROM numbers(1000000) SETTINGS s3_max_single_part_upload_size = 10000, s3_truncate_on_insert = 1;
+"
+
+aws --endpoint-url http://localhost:11111 s3api head-object --bucket test --key content-type.csv.gz | grep Content | sed 's/[ \t,"]*//g'
