diff --git a/dbms/tests/queries/0_stateless/01076_array_join_prewhere_const_folding.reference b/dbms/tests/queries/0_stateless/01076_array_join_prewhere_const_folding.reference
new file mode 100644
index 000000000000..e69de29bb2d1
diff --git a/dbms/tests/queries/0_stateless/01076_array_join_prewhere_const_folding.sql b/dbms/tests/queries/0_stateless/01076_array_join_prewhere_const_folding.sql
new file mode 100644
index 000000000000..7b80004864d3
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/01076_array_join_prewhere_const_folding.sql
@@ -0,0 +1,10 @@
+SET log_queries = 1;
+SELECT 1 LIMIT 0;
+SYSTEM FLUSH LOGS;
+
+SELECT arrayJoin AS kv_key
+FROM system.query_log
+ARRAY JOIN ProfileEvents.Names AS arrayJoin
+PREWHERE has(arrayMap(key -> key, ProfileEvents.Names), 'Query')
+WHERE arrayJoin = 'Query'
+LIMIT 0;
