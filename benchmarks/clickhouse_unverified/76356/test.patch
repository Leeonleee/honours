diff --git a/tests/queries/0_stateless/03359_analyzer_rewrite_view_query.reference b/tests/queries/0_stateless/03359_analyzer_rewrite_view_query.reference
new file mode 100644
index 000000000000..e69de29bb2d1
diff --git a/tests/queries/0_stateless/03359_analyzer_rewrite_view_query.sql b/tests/queries/0_stateless/03359_analyzer_rewrite_view_query.sql
new file mode 100644
index 000000000000..3f8bc96df2f0
--- /dev/null
+++ b/tests/queries/0_stateless/03359_analyzer_rewrite_view_query.sql
@@ -0,0 +1,13 @@
+CREATE TABLE mydestination
+(
+    `object` String
+)
+ENGINE = MergeTree
+ORDER BY object;
+
+CREATE MATERIALIZED VIEW myview TO mydestination
+AS WITH ('foo', 'bar') AS objects
+SELECT 'foo' AS object
+WHERE object IN (objects);
+
+SELECT * FROM myview;
