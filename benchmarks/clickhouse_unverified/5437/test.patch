diff --git a/dbms/tests/queries/0_stateless/00950_bad_alloc_when_truncate_join_storage.reference b/dbms/tests/queries/0_stateless/00950_bad_alloc_when_truncate_join_storage.reference
new file mode 100644
index 000000000000..e69de29bb2d1
diff --git a/dbms/tests/queries/0_stateless/00950_bad_alloc_when_truncate_join_storage.sql b/dbms/tests/queries/0_stateless/00950_bad_alloc_when_truncate_join_storage.sql
new file mode 100644
index 000000000000..a931a66aba27
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/00950_bad_alloc_when_truncate_join_storage.sql
@@ -0,0 +1,4 @@
+DROP TABLE IF EXISTS test.join_test;
+CREATE TABLE test.join_test (number UInt8, value Float32) Engine = Join(ANY, LEFT, number);
+TRUNCATE TABLE test.join_test;
+DROP TABLE IF EXISTS test.join_test;
