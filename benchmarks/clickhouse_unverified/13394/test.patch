diff --git a/tests/queries/0_stateless/00405_PrettyCompactMonoBlock.reference b/tests/queries/0_stateless/00405_PrettyCompactMonoBlock.reference
new file mode 100644
index 000000000000..94d3efa6e0a9
--- /dev/null
+++ b/tests/queries/0_stateless/00405_PrettyCompactMonoBlock.reference
@@ -0,0 +1,32 @@
+one block
+┌─[1mnumber[0m─┐
+│      0 │
+│      1 │
+└────────┘
+two blocks
+┌─[1mnumber[0m─┐
+│      0 │
+│      0 │
+└────────┘
+extremes
+┌─[1mnumber[0m─┐
+│      0 │
+│      1 │
+│      2 │
+└────────┘
+
+Extremes:
+┌─[1mnumber[0m─┐
+│      0 │
+│      2 │
+└────────┘
+totals
+┌─[1msum(number)[0m─┐
+│           2 │
+│           1 │
+└─────────────┘
+
+Totals:
+┌─[1msum(number)[0m─┐
+│           3 │
+└─────────────┘
diff --git a/tests/queries/0_stateless/00405_PrettyCompactMonoBlock.sh b/tests/queries/0_stateless/00405_PrettyCompactMonoBlock.sh
new file mode 100755
index 000000000000..a353ce5ea5cf
--- /dev/null
+++ b/tests/queries/0_stateless/00405_PrettyCompactMonoBlock.sh
@@ -0,0 +1,13 @@
+#!/usr/bin/env bash
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+. "$CURDIR"/../shell_config.sh
+
+echo 'one block'
+${CLICKHOUSE_LOCAL} --query="SELECT * FROM numbers(2)" --format PrettyCompactMonoBlock
+echo 'two blocks'
+${CLICKHOUSE_LOCAL} --query="SELECT * FROM numbers(1) UNION ALL SELECT * FROM numbers(1)" --format PrettyCompactMonoBlock
+echo 'extremes'
+${CLICKHOUSE_LOCAL} --query="SELECT * FROM numbers(3)" --format PrettyCompactMonoBlock --extremes=1
+echo 'totals'
+${CLICKHOUSE_LOCAL} --query="SELECT sum(number) FROM numbers(3) GROUP BY number%2 WITH TOTALS" --format PrettyCompactMonoBlock
