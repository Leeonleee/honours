diff --git a/src/Functions/bar.cpp b/src/Functions/bar.cpp
index 7364311a1bef..6f5298a8c5e7 100644
--- a/src/Functions/bar.cpp
+++ b/src/Functions/bar.cpp
@@ -16,6 +16,7 @@ namespace ErrorCodes
     extern const int ARGUMENT_OUT_OF_BOUND;
     extern const int ILLEGAL_COLUMN;
     extern const int ILLEGAL_TYPE_OF_ARGUMENT;
+    extern const int BAD_ARGUMENTS;
 }
 
 namespace
@@ -110,6 +111,9 @@ class FunctionBar : public IFunction
                 arguments[2].column->getFloat64(i),
                 max_width);
 
+            if (!isFinite(width))
+                throw Exception("Value of width must not be NaN and Inf", ErrorCodes::BAD_ARGUMENTS);
+
             size_t next_size = current_offset + UnicodeBar::getWidthInBytes(width) + 1;
             dst_chars.resize(next_size);
             UnicodeBar::render(width, reinterpret_cast<char *>(&dst_chars[current_offset]));
