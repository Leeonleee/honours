You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
Support for non-scalar subqueries in WITH.
They can be substituted in FROM / IN sections as is.
Still only for non-dependent subqueries.

Example: 

```
WITH (SELECT 1) AS t
SELECT * FROM t
```
Support for non-scalar values in WITH clause
Will ClickHouse support WITH clause (common table expression, cte)? Like https://www.postgresql.org/docs/9.1/static/queries-with.html

The thing that with CTE I can define temp dataset I can then query multiple times in one query statement. Currently, I'm running the same query twice as two subqueries. For example 1) to find distinct IDs and then 2) to get actual data that can be joined on those IDs I found before.
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
