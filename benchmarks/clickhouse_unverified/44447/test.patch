diff --git a/tests/queries/0_stateless/02504_disallow_arrayjoin_in_mutations.reference b/tests/queries/0_stateless/02504_disallow_arrayjoin_in_mutations.reference
new file mode 100644
index 000000000000..0cfb83aa2f26
--- /dev/null
+++ b/tests/queries/0_stateless/02504_disallow_arrayjoin_in_mutations.reference
@@ -0,0 +1,3 @@
+1	1
+2	2
+3	3
diff --git a/tests/queries/0_stateless/02504_disallow_arrayjoin_in_mutations.sql b/tests/queries/0_stateless/02504_disallow_arrayjoin_in_mutations.sql
new file mode 100644
index 000000000000..d261a71d912c
--- /dev/null
+++ b/tests/queries/0_stateless/02504_disallow_arrayjoin_in_mutations.sql
@@ -0,0 +1,9 @@
+DROP TABLE IF EXISTS test_02504;
+
+CREATE TABLE test_02504 (`a` UInt32,`b` UInt32) ENGINE = MergeTree ORDER BY a;
+INSERT INTO test_02504 values (1, 1) (2, 2), (3, 3);
+SELECT * FROM test_02504;
+
+ALTER TABLE test_02504 UPDATE b = 33 WHERE arrayJoin([1, 2]) = a; -- { serverError UNEXPECTED_EXPRESSION}
+
+DROP TABLE test_02504;
\ No newline at end of file
