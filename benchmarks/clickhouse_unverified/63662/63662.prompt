You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
Compression is not autodetected from an output file name in clickhouse-local
**Use case**

```
$ clickhouse-local --query "SELECT 1" > test.native
$ clickhouse-local --query "SELECT 1" > test.native.zst
```

The second variant does not produce zstd compressed data.
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
