diff --git a/tests/queries/0_stateless/01155_rename_move_materialized_view.reference b/tests/queries/0_stateless/01155_rename_move_materialized_view.reference
new file mode 100644
index 000000000000..942cedf86967
--- /dev/null
+++ b/tests/queries/0_stateless/01155_rename_move_materialized_view.reference
@@ -0,0 +1,58 @@
+1	.inner.mv1	before moving tablesmv1
+1	dst	before moving tablesmv2
+1	mv1	before moving tablesmv1
+1	mv2	before moving tablesmv2
+1	src	before moving tables
+ordinary:
+.inner.mv1
+dst
+mv1
+mv2
+src
+ordinary after rename:
+atomic after rename:
+.inner_id.
+dst
+mv1
+mv2
+src
+3	.inner_id.	after renaming databasemv1
+3	.inner_id.	before moving tablesmv1
+3	dst	after renaming databasemv2
+3	dst	before moving tablesmv2
+3	mv1	after renaming databasemv1
+3	mv1	before moving tablesmv1
+3	mv2	after renaming databasemv2
+3	mv2	before moving tablesmv2
+3	src	after moving tables
+3	src	after renaming database
+3	src	before moving tables
+.inner_id.
+dst
+mv1
+mv2
+src
+CREATE DATABASE test_01155_atomic
ENGINE = Atomic
+4	.inner.mv1	after renaming databasemv1
+4	.inner.mv1	after renaming tablesmv1
+4	.inner.mv1	before moving tablesmv1
+4	dst	after renaming databasemv2
+4	dst	after renaming tablesmv2
+4	dst	before moving tablesmv2
+4	mv1	after renaming databasemv1
+4	mv1	after renaming tablesmv1
+4	mv1	before moving tablesmv1
+4	mv2	after renaming databasemv2
+4	mv2	after renaming tablesmv2
+4	mv2	before moving tablesmv2
+4	src	after moving tables
+4	src	after renaming database
+4	src	after renaming tables
+4	src	before moving tables
+test_01155_ordinary:
+.inner.mv1
+dst
+mv1
+mv2
+src
+test_01155_atomic:
diff --git a/tests/queries/0_stateless/01155_rename_move_materialized_view.sql b/tests/queries/0_stateless/01155_rename_move_materialized_view.sql
new file mode 100644
index 000000000000..2ede0fbcedfa
--- /dev/null
+++ b/tests/queries/0_stateless/01155_rename_move_materialized_view.sql
@@ -0,0 +1,59 @@
+DROP DATABASE IF EXISTS test_01155_ordinary;
+DROP DATABASE IF EXISTS test_01155_atomic;
+
+CREATE DATABASE test_01155_ordinary ENGINE=Ordinary;
+CREATE DATABASE test_01155_atomic ENGINE=Atomic;
+
+USE test_01155_ordinary;
+CREATE TABLE src (s String) ENGINE=MergeTree() PARTITION BY tuple() ORDER BY s;
+CREATE MATERIALIZED VIEW mv1 (s String) ENGINE=MergeTree() PARTITION BY tuple() ORDER BY s AS SELECT (*,).1 || 'mv1' as s FROM src;
+CREATE TABLE dst (s String) ENGINE=MergeTree() PARTITION BY tuple() ORDER BY s;
+CREATE MATERIALIZED VIEW mv2 TO dst (s String) AS SELECT (*,).1 || 'mv2' as s FROM src;
+INSERT INTO src VALUES ('before moving tables');
+SELECT 1, substr(_table, 1, 10), s FROM merge('test_01155_ordinary', '') ORDER BY _table, s;
+
+-- Move tables with materialized views from Ordinary to Atomic
+SELECT 'ordinary:';
+SHOW TABLES FROM test_01155_ordinary;
+RENAME TABLE test_01155_ordinary.mv1 TO test_01155_atomic.mv1;
+RENAME TABLE test_01155_ordinary.mv2 TO test_01155_atomic.mv2;
+RENAME TABLE test_01155_ordinary.dst TO test_01155_atomic.dst;
+RENAME TABLE test_01155_ordinary.src TO test_01155_atomic.src;
+SELECT 'ordinary after rename:';
+SELECT substr(name, 1, 10) FROM system.tables WHERE database='test_01155_ordinary';
+SELECT 'atomic after rename:';
+SELECT substr(name, 1, 10) FROM system.tables WHERE database='test_01155_atomic';
+DROP DATABASE test_01155_ordinary;
+USE default;
+
+INSERT INTO test_01155_atomic.src VALUES ('after moving tables');
+SELECT 2, substr(_table, 1, 10), s FROM merge('test_01155_atomic', '') ORDER BY _table, s; -- { serverError 81 }
+
+RENAME DATABASE test_01155_atomic TO test_01155_ordinary;
+USE test_01155_ordinary;
+
+INSERT INTO src VALUES ('after renaming database');
+SELECT 3, substr(_table, 1, 10), s FROM merge('test_01155_ordinary', '') ORDER BY _table, s;
+
+SELECT substr(name, 1, 10) FROM system.tables WHERE database='test_01155_ordinary';
+
+-- Move tables back
+RENAME DATABASE test_01155_ordinary TO test_01155_atomic;
+
+CREATE DATABASE test_01155_ordinary ENGINE=Ordinary;
+SHOW CREATE DATABASE test_01155_atomic;
+
+RENAME TABLE test_01155_atomic.mv1 TO test_01155_ordinary.mv1;
+RENAME TABLE test_01155_atomic.mv2 TO test_01155_ordinary.mv2;
+RENAME TABLE test_01155_atomic.dst TO test_01155_ordinary.dst;
+RENAME TABLE test_01155_atomic.src TO test_01155_ordinary.src;
+
+INSERT INTO src VALUES ('after renaming tables');
+SELECT 4, substr(_table, 1, 10), s FROM merge('test_01155_ordinary', '') ORDER BY _table, s;
+SELECT 'test_01155_ordinary:';
+SHOW TABLES FROM test_01155_ordinary;
+SELECT 'test_01155_atomic:';
+SHOW TABLES FROM test_01155_atomic;
+
+DROP DATABASE IF EXISTS test_01155_atomic;
+DROP DATABASE IF EXISTS test_01155_ordinary;
diff --git a/tests/queries/skip_list.json b/tests/queries/skip_list.json
index cba090403119..cbe7d4868be2 100644
--- a/tests/queries/skip_list.json
+++ b/tests/queries/skip_list.json
@@ -572,6 +572,7 @@
         "01153_attach_mv_uuid",
         "01152_cross_replication",
         "01154_move_partition_long",
+        "01155_rename_move_materialized_view",
         "01185_create_or_replace_table",
         "01190_full_attach_syntax",
         "01191_rename_dictionary",
