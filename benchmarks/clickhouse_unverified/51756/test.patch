diff --git a/tests/queries/0_stateless/02811_ip_dict_attribute.reference b/tests/queries/0_stateless/02811_ip_dict_attribute.reference
new file mode 100644
index 000000000000..a36cf2e3d8aa
--- /dev/null
+++ b/tests/queries/0_stateless/02811_ip_dict_attribute.reference
@@ -0,0 +1,2 @@
+('::2.2.2.2','2.2.2.2')
+('::1.1.1.1','1.1.1.1')
diff --git a/tests/queries/0_stateless/02811_ip_dict_attribute.sql b/tests/queries/0_stateless/02811_ip_dict_attribute.sql
new file mode 100644
index 000000000000..0ffff6e4a530
--- /dev/null
+++ b/tests/queries/0_stateless/02811_ip_dict_attribute.sql
@@ -0,0 +1,13 @@
+CREATE TABLE src ( id UInt64, ip4 IPv4, ip6 IPv6 ) Engine=Memory AS
+  SELECT * FROM VALUES( (1, '1.1.1.1', '::1.1.1.1'), (2, '2.2.2.2', '::2.2.2.2') );
+
+CREATE DICTIONARY dict ( id UInt64, ip4 IPv4, ip6 IPv6 )
+  PRIMARY KEY id
+  LAYOUT(HASHED())
+  SOURCE (CLICKHOUSE ( table src))
+  lifetime ( 10);
+
+SELECT dictGet('dict', ('ip6', 'ip4'), arrayJoin([2,1]));
+
+DROP DICTIONARY dict;
+DROP TABLE src;
