diff --git a/tests/queries/0_stateless/02292_nested_not_flattened_detach.reference b/tests/queries/0_stateless/02292_nested_not_flattened_detach.reference
new file mode 100644
index 000000000000..52970ab07a97
--- /dev/null
+++ b/tests/queries/0_stateless/02292_nested_not_flattened_detach.reference
@@ -0,0 +1,4 @@
+CREATE TABLE default.t_nested_detach
(
    `n` Nested(u UInt32, s String)
)
ENGINE = Log
+n	Nested(u UInt32, s String)					
+CREATE TABLE default.t_nested_detach
(
    `n` Nested(u UInt32, s String)
)
ENGINE = Log
+n	Nested(u UInt32, s String)					
diff --git a/tests/queries/0_stateless/02292_nested_not_flattened_detach.sql b/tests/queries/0_stateless/02292_nested_not_flattened_detach.sql
new file mode 100644
index 000000000000..083b4ff7e101
--- /dev/null
+++ b/tests/queries/0_stateless/02292_nested_not_flattened_detach.sql
@@ -0,0 +1,17 @@
+DROP TABLE IF EXISTS t_nested_detach;
+
+SET flatten_nested = 0;
+CREATE TABLE t_nested_detach (n Nested(u UInt32, s String)) ENGINE = Log;
+
+SHOW CREATE TABLE t_nested_detach;
+DESC TABLE t_nested_detach;
+
+SET flatten_nested = 1;
+
+DETACH TABLE t_nested_detach;
+ATTACH TABLE t_nested_detach;
+
+SHOW CREATE TABLE t_nested_detach;
+DESC TABLE t_nested_detach;
+
+DROP TABLE IF EXISTS t_nested_detach;
