diff --git a/tests/queries/0_stateless/03536_ch_as_client_and_local.reference b/tests/queries/0_stateless/03536_ch_as_client_and_local.reference
new file mode 100644
index 000000000000..5f04aa870e96
--- /dev/null
+++ b/tests/queries/0_stateless/03536_ch_as_client_and_local.reference
@@ -0,0 +1,7 @@
+Use one of the following commands:
+Use one of the following commands:
+Use one of the following commands:
+Overlay
+Overlay
+Atomic
+Atomic
diff --git a/tests/queries/0_stateless/03536_ch_as_client_and_local.sh b/tests/queries/0_stateless/03536_ch_as_client_and_local.sh
new file mode 100755
index 000000000000..323843d0b0c7
--- /dev/null
+++ b/tests/queries/0_stateless/03536_ch_as_client_and_local.sh
@@ -0,0 +1,22 @@
+#!/usr/bin/env bash
+
+CUR_DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CUR_DIR"/../shell_config.sh
+
+CLICKHOUSE_BINARY_CH=${CLICKHOUSE_BINARY/clickhouse/ch}
+
+# Invocation with unknown tool name prints help:
+${CLICKHOUSE_BINARY} test 2>&1 | grep -F 'Use one of the following commands'
+
+# Invocation with --help works the same:
+${CLICKHOUSE_BINARY} --help 2>&1 | grep -F 'Use one of the following commands'
+${CLICKHOUSE_BINARY_CH} --help 2>&1 | grep -F 'Use one of the following commands'
+
+# This is recognized as clickhouse-local:
+${CLICKHOUSE_BINARY} --query "SELECT engine FROM system.databases WHERE name = currentDatabase()"
+${CLICKHOUSE_BINARY_CH} --query "SELECT engine FROM system.databases WHERE name = currentDatabase()"
+
+# This is recognized as clickhouse-client:
+${CLICKHOUSE_BINARY} --host ${CLICKHOUSE_HOST} --port ${CLICKHOUSE_PORT_TCP} --query "SELECT engine FROM system.databases WHERE name = currentDatabase()"
+${CLICKHOUSE_BINARY_CH} --query "SELECT engine FROM system.databases WHERE name = currentDatabase()" -h${CLICKHOUSE_HOST} --port=${CLICKHOUSE_PORT_TCP}
