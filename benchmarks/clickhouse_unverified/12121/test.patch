diff --git a/tests/queries/0_stateless/01357_version_collapsing_attach_detach_zookeeper.reference b/tests/queries/0_stateless/01357_version_collapsing_attach_detach_zookeeper.reference
new file mode 100644
index 000000000000..353c70aec11c
--- /dev/null
+++ b/tests/queries/0_stateless/01357_version_collapsing_attach_detach_zookeeper.reference
@@ -0,0 +1,3 @@
+metadata format version: 1
date column: 
sampling expression: 
index granularity: 8192
mode: 7
sign column: sign
primary key: key1, key2
data format version: 1
partition key: d
granularity bytes: 10485760

+1
+1
diff --git a/tests/queries/0_stateless/01357_version_collapsing_attach_detach_zookeeper.sql b/tests/queries/0_stateless/01357_version_collapsing_attach_detach_zookeeper.sql
new file mode 100644
index 000000000000..0086ec5c2a3b
--- /dev/null
+++ b/tests/queries/0_stateless/01357_version_collapsing_attach_detach_zookeeper.sql
@@ -0,0 +1,26 @@
+DROP TABLE IF EXISTS versioned_collapsing_table;
+
+CREATE TABLE versioned_collapsing_table(
+  d Date,
+  key1 UInt64,
+  key2 UInt32,
+  value String,
+  sign Int8,
+  version UInt16
+)
+ENGINE = ReplicatedVersionedCollapsingMergeTree('/clickhouse/versioned_collapsing_table', '1', sign, version)
+PARTITION BY d
+ORDER BY (key1, key2);
+
+INSERT INTO versioned_collapsing_table VALUES (toDate('2019-10-10'), 1, 1, 'Hello', -1, 1);
+
+SELECT value FROM system.zookeeper WHERE path = '/clickhouse/versioned_collapsing_table' and name = 'metadata';
+
+SELECT COUNT() FROM versioned_collapsing_table;
+
+DETACH TABLE versioned_collapsing_table;
+ATTACH TABLE versioned_collapsing_table;
+
+SELECT COUNT() FROM versioned_collapsing_table;
+
+DROP TABLE IF EXISTS versioned_collapsing_table;
