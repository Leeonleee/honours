diff --git a/src/Interpreters/AddDefaultDatabaseVisitor.h b/src/Interpreters/AddDefaultDatabaseVisitor.h
index 63d026c9767a..3d93118047fd 100644
--- a/src/Interpreters/AddDefaultDatabaseVisitor.h
+++ b/src/Interpreters/AddDefaultDatabaseVisitor.h
@@ -138,7 +138,12 @@ class AddDefaultDatabaseVisitor
                         /// XXX: for some unknown reason this place assumes that argument can't be an alias,
                         ///      like in the similar code in `MarkTableIdentifierVisitor`.
                         if (auto * identifier = child->children[i]->as<ASTIdentifier>())
-                            child->children[i] = identifier->createTable();
+                        {
+                            /// If identifier is broken then we can do nothing and get an exception
+                            auto maybe_table_identifier = identifier->createTable();
+                            if (maybe_table_identifier)
+                                child->children[i] = maybe_table_identifier;
+                        }
 
                         /// Second argument of the "in" function (or similar) may be a table name or a subselect.
                         /// Rewrite the table name or descend into subselect.
