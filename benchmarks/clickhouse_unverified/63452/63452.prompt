You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
Table function `loop`
**Use case**

Tests and benchmarks.

```
SELECT ... FROM loop(database, table);
SELECT ... FROM loop(database.table);
SELECT ... FROM loop(table);
SELECT ... FROM loop(other_table_function(...));
```

**Describe the solution you'd like**

Every interface method is forwarded, but for reading, the pipeline is modified to repeat the reading when it is finished,
and writing is not allowed. Trivial count optimization is disabled. Index analysis works in the same way as for the argument's table.

It is unspecified if the function should use the same table snapshot on every reading or different.
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
