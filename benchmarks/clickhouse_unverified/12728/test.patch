diff --git a/tests/queries/0_stateless/01415_inconsistent_merge_tree_settings.reference b/tests/queries/0_stateless/01415_inconsistent_merge_tree_settings.reference
new file mode 100644
index 000000000000..dd57652a491d
--- /dev/null
+++ b/tests/queries/0_stateless/01415_inconsistent_merge_tree_settings.reference
@@ -0,0 +1,2 @@
+1	hello
+1	world
diff --git a/tests/queries/0_stateless/01415_inconsistent_merge_tree_settings.sql b/tests/queries/0_stateless/01415_inconsistent_merge_tree_settings.sql
new file mode 100644
index 000000000000..f3bf24193a89
--- /dev/null
+++ b/tests/queries/0_stateless/01415_inconsistent_merge_tree_settings.sql
@@ -0,0 +1,12 @@
+DROP TABLE IF EXISTS t;
+
+SET mutations_sync = 1;
+CREATE TABLE t (x UInt8, s String) ENGINE = MergeTree ORDER BY x SETTINGS number_of_free_entries_in_pool_to_execute_mutation = 1000;
+
+INSERT INTO t VALUES (1, 'hello');
+SELECT * FROM t;
+
+ALTER TABLE t UPDATE s = 'world' WHERE x = 1;
+SELECT * FROM t;
+
+DROP TABLE t;
