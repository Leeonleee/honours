diff --git a/base/harmful/harmful.c b/base/harmful/harmful.c
index df625a3e4d6b..bfb68abbcfb3 100644
--- a/base/harmful/harmful.c
+++ b/base/harmful/harmful.c
@@ -118,7 +118,9 @@ TRAP(logout)
 TRAP(logwtmp)
 TRAP(lrand48)
 TRAP(mallinfo)
-TRAP(mallopt)
+#if !defined(SANITIZER)
+TRAP(mallopt) // Used by tsan
+#endif
 TRAP(mblen)
 TRAP(mbrlen)
 TRAP(mbrtowc)
@@ -193,7 +195,9 @@ TRAP(dbm_nextkey)
 TRAP(dbm_open)
 TRAP(dbm_store)
 TRAP(dirname)
-TRAP(dlerror)
+#if !defined(SANITIZER)
+TRAP(dlerror) // Used by tsan
+#endif
 TRAP(ftw)
 TRAP(getc_unlocked)
 //TRAP(getenv) // Ok at program startup
diff --git a/cmake/find/zlib.cmake b/cmake/find/zlib.cmake
index 9a82699dc3aa..bd96424b60d4 100644
--- a/cmake/find/zlib.cmake
+++ b/cmake/find/zlib.cmake
@@ -35,6 +35,7 @@ if (NOT ZLIB_FOUND AND NOT MISSING_INTERNAL_ZLIB_LIBRARY)
     set (ZLIB_INCLUDE_DIRECTORIES ${ZLIB_INCLUDE_DIR}) # for protobuf
     set (ZLIB_FOUND 1) # for poco
     set (ZLIB_LIBRARIES zlib CACHE INTERNAL "")
+    set (ZLIB_LIBRARY_NAME ${ZLIB_LIBRARIES}) # for cassandra
     set (ZLIB_NAME "${INTERNAL_ZLIB_NAME}")
 endif ()
 
diff --git a/contrib/cassandra b/contrib/cassandra
index d10187efb25b..9cbc1a806df5 160000
--- a/contrib/cassandra
+++ b/contrib/cassandra
@@ -1,1 +1,1 @@
-Subproject commit d10187efb25b26da391def077edf3c6f2f3a23dd
+Subproject commit 9cbc1a806df5d40fddbf84533b9873542c6513d8
diff --git a/contrib/libuv b/contrib/libuv
index bc14c44b6269..e2e9b7e9f978 160000
--- a/contrib/libuv
+++ b/contrib/libuv
@@ -1,1 +1,1 @@
-Subproject commit bc14c44b6269c458f2cc7e09eb300f4b64899903
+Subproject commit e2e9b7e9f978ce8a1367b5fe781d97d1ce9f94ab
