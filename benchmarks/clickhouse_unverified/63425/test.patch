diff --git a/tests/queries/0_stateless/03146_create_index_compatibility.reference b/tests/queries/0_stateless/03146_create_index_compatibility.reference
new file mode 100644
index 000000000000..64f1d1382ee1
--- /dev/null
+++ b/tests/queries/0_stateless/03146_create_index_compatibility.reference
@@ -0,0 +1,1 @@
+CREATE TABLE default.t_index_3146
(
    `a` UInt64,
    `b` UInt64,
    INDEX i1 a TYPE minmax GRANULARITY 1,
    INDEX i2 (a, b) TYPE minmax GRANULARITY 1,
    INDEX i3 (a, b) TYPE minmax GRANULARITY 1,
    INDEX i4 a TYPE minmax GRANULARITY 1
)
ENGINE = MergeTree
ORDER BY tuple()
SETTINGS index_granularity = 8192
diff --git a/tests/queries/0_stateless/03146_create_index_compatibility.sql b/tests/queries/0_stateless/03146_create_index_compatibility.sql
new file mode 100644
index 000000000000..ede5bc0567a7
--- /dev/null
+++ b/tests/queries/0_stateless/03146_create_index_compatibility.sql
@@ -0,0 +1,17 @@
+DROP TABLE IF EXISTS t_index_3146;
+
+CREATE TABLE t_index_3146 (a UInt64, b UInt64) ENGINE = MergeTree ORDER BY tuple();
+
+SET allow_create_index_without_type = 1;
+
+CREATE INDEX i1 ON t_index_3146 (a) TYPE minmax;
+CREATE INDEX i2 ON t_index_3146 (a, b) TYPE minmax;
+CREATE INDEX i3 ON t_index_3146 (a DESC, b ASC) TYPE minmax;
+CREATE INDEX i4 ON t_index_3146 a TYPE minmax;
+CREATE INDEX i5 ON t_index_3146 (a); -- ignored
+CREATE INDEX i6 ON t_index_3146 (a DESC, b ASC); -- ignored
+CREATE INDEX i7 ON t_index_3146; -- { clientError SYNTAX_ERROR }
+CREATE INDEX i8 ON t_index_3146 a, b TYPE minmax; -- { clientError SYNTAX_ERROR }
+
+SHOW CREATE TABLE t_index_3146;
+DROP TABLE t_index_3146;
