diff --git a/tests/queries/0_stateless/03274_grace_hash_max_joined_block_size_rows_bug.reference b/tests/queries/0_stateless/03274_grace_hash_max_joined_block_size_rows_bug.reference
new file mode 100644
index 000000000000..8b3a805c6a28
--- /dev/null
+++ b/tests/queries/0_stateless/03274_grace_hash_max_joined_block_size_rows_bug.reference
@@ -0,0 +1,1 @@
+180	15
diff --git a/tests/queries/0_stateless/03274_grace_hash_max_joined_block_size_rows_bug.sql b/tests/queries/0_stateless/03274_grace_hash_max_joined_block_size_rows_bug.sql
new file mode 100644
index 000000000000..c91e226fdefc
--- /dev/null
+++ b/tests/queries/0_stateless/03274_grace_hash_max_joined_block_size_rows_bug.sql
@@ -0,0 +1,15 @@
+DROP TABLE IF EXISTS t0;
+DROP TABLE IF EXISTS t1;
+
+CREATE TABLE t0 (x UInt64) ENGINE = MergeTree ORDER BY x;
+INSERT INTO t0 SELECT number from numbers(20);
+
+CREATE TABLE t1 (x UInt64) ENGINE = MergeTree ORDER BY x;
+INSERT INTO t1 SELECT number from numbers(5, 20);
+
+SET max_joined_block_size_rows = 1;
+SET grace_hash_join_initial_buckets = 2;
+SET join_algorithm = 'grace_hash';
+
+SELECT sum(x), count() FROM t0 JOIN t1 USING x;
+
