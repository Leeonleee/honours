diff --git a/tests/queries/0_stateless/02494_analyzer_cte_resolution_in_subquery_fix.reference b/tests/queries/0_stateless/02494_analyzer_cte_resolution_in_subquery_fix.reference
new file mode 100644
index 000000000000..09373d75f5d6
--- /dev/null
+++ b/tests/queries/0_stateless/02494_analyzer_cte_resolution_in_subquery_fix.reference
@@ -0,0 +1,4 @@
+0	0	0
+0	0	0
+0	0
+0	0
diff --git a/tests/queries/0_stateless/02494_analyzer_cte_resolution_in_subquery_fix.sql b/tests/queries/0_stateless/02494_analyzer_cte_resolution_in_subquery_fix.sql
new file mode 100644
index 000000000000..de7c7242b90b
--- /dev/null
+++ b/tests/queries/0_stateless/02494_analyzer_cte_resolution_in_subquery_fix.sql
@@ -0,0 +1,9 @@
+WITH a AS (SELECT t1.number AS n1, t2.number AS n2 FROM numbers(1) AS t1, numbers(1) AS t2), b AS (SELECT sum(n1) AS s FROM a)
+SELECT * FROM b AS l, a AS r;
+
+WITH a AS (SELECT t1.number AS n1, t2.number AS n2 FROM numbers(1) AS t1, numbers(1) AS t2), b AS (SELECT sum(n1) AS s FROM a)
+SELECT * FROM b AS l, a AS r;
+
+WITH a AS (SELECT number FROM numbers(1)), b AS (SELECT number FROM a) SELECT * FROM b as l, a as r;
+
+WITH a AS (SELECT number FROM numbers(1)), b AS (SELECT number FROM a) SELECT * FROM a as l, b as r;
