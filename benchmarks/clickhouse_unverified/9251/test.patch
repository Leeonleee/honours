diff --git a/dbms/tests/queries/0_stateless/00863_comma_join_in.sql b/dbms/tests/queries/0_stateless/00863_comma_join_in.sql
index 8cfc00627dce..ebccd351c8a1 100644
--- a/dbms/tests/queries/0_stateless/00863_comma_join_in.sql
+++ b/dbms/tests/queries/0_stateless/00863_comma_join_in.sql
@@ -10,6 +10,8 @@ insert into test1_00863 (id, code) select number, toString(number) FROM numbers(
 insert into test3_00863 (id, code) select number, toString(number) FROM numbers(100000);
 insert into test2_00863 (id, code, test1_id, test3_id) select number, toString(number), number, number FROM numbers(100000);
 
+SET max_memory_usage = 50000000;
+
 select test2_00863.id
 from test1_00863, test2_00863, test3_00863
 where test1_00863.code in ('1', '2', '3')
diff --git a/dbms/tests/queries/0_stateless/01083_cross_to_inner_with_in_bug.reference b/dbms/tests/queries/0_stateless/01083_cross_to_inner_with_in_bug.reference
new file mode 100644
index 000000000000..699fa0cd95c4
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/01083_cross_to_inner_with_in_bug.reference
@@ -0,0 +1,1 @@
+2	2	1
diff --git a/dbms/tests/queries/0_stateless/01083_cross_to_inner_with_in_bug.sql b/dbms/tests/queries/0_stateless/01083_cross_to_inner_with_in_bug.sql
new file mode 100644
index 000000000000..f6d788512f84
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/01083_cross_to_inner_with_in_bug.sql
@@ -0,0 +1,13 @@
+drop table if exists ax;
+drop table if exists bx;
+
+create table ax (A Int64, B Int64) Engine = Memory;
+create table bx (A Int64) Engine = Memory;
+
+insert into ax values (1, 1), (2, 1);
+insert into bx values (2), (4);
+
+select * from bx, ax where ax.A = bx.A and ax.B in (1,2);
+
+drop table ax;
+drop table bx;
