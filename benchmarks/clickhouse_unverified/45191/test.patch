diff --git a/tests/queries/0_stateless/02530_ip_part_id.reference b/tests/queries/0_stateless/02530_ip_part_id.reference
new file mode 100644
index 000000000000..a13e1bafdaa2
--- /dev/null
+++ b/tests/queries/0_stateless/02530_ip_part_id.reference
@@ -0,0 +1,2 @@
+1.2.3.4	::ffff:1.2.3.4	16909060_1_1_0
+1.2.3.4	::ffff:1.2.3.4	1334d7cc23ffb5a5c0262304b3313426_1_1_0
diff --git a/tests/queries/0_stateless/02530_ip_part_id.sql b/tests/queries/0_stateless/02530_ip_part_id.sql
new file mode 100644
index 000000000000..bf704eaa1c2f
--- /dev/null
+++ b/tests/queries/0_stateless/02530_ip_part_id.sql
@@ -0,0 +1,14 @@
+DROP TABLE IF EXISTS ip_part_test;
+
+CREATE TABLE ip_part_test ( ipv4 IPv4, ipv6 IPv6 ) ENGINE = MergeTree PARTITION BY ipv4 ORDER BY ipv4 AS SELECT '1.2.3.4', '::ffff:1.2.3.4';
+
+SELECT *, _part FROM ip_part_test;
+
+DROP TABLE IF EXISTS ip_part_test;
+
+CREATE TABLE ip_part_test ( ipv4 IPv4, ipv6 IPv6 ) ENGINE = MergeTree PARTITION BY ipv6 ORDER BY ipv6 AS SELECT '1.2.3.4', '::ffff:1.2.3.4';
+
+SELECT *, _part FROM ip_part_test;
+
+DROP TABLE IF EXISTS ip_part_test;
+
