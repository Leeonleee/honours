diff --git a/dbms/src/Storages/MergeTree/ReplicatedMergeTreeLogEntry.cpp b/dbms/src/Storages/MergeTree/ReplicatedMergeTreeLogEntry.cpp
index 83532a8276db..7aac3128930c 100644
--- a/dbms/src/Storages/MergeTree/ReplicatedMergeTreeLogEntry.cpp
+++ b/dbms/src/Storages/MergeTree/ReplicatedMergeTreeLogEntry.cpp
@@ -70,8 +70,9 @@ void ReplicatedMergeTreeLogEntryData::writeText(WriteBuffer & out) const
                 << source_parts.at(0) << "
"
                 << "to
"
                 << new_part_name;
-            out << "
alter_version
";
-            out << alter_version;
+
+            if (isAlterMutation())
+                out << "
alter_version
" << alter_version;
             break;
 
         case ALTER_METADATA: /// Just make local /metadata and /columns consistent with global
@@ -127,6 +128,7 @@ void ReplicatedMergeTreeLogEntryData::readText(ReadBuffer & in)
 
     in >> type_str >> "
";
 
+    bool trailing_newline_found = false;
     if (type_str == "get")
     {
         type = GET_PART;
@@ -177,7 +179,13 @@ void ReplicatedMergeTreeLogEntryData::readText(ReadBuffer & in)
            >> "to
"
            >> new_part_name;
         source_parts.push_back(source_part);
-        in >> "
alter_version
" >> alter_version;
+
+        in >> "
";
+
+        if (in.eof())
+            trailing_newline_found = true;
+        else if (checkString("alter_version
", in))
+            in >> alter_version;
     }
     else if (type_str == "alter")
     {
@@ -198,7 +206,9 @@ void ReplicatedMergeTreeLogEntryData::readText(ReadBuffer & in)
         in.readStrict(&metadata_str[0], metadata_size);
     }
 
-    in >> "
";
+    if (!trailing_newline_found)
+        in >> "
";
+
     if (checkString("part_type: ", in))
     {
         String part_type_str;
diff --git a/dbms/src/Storages/MergeTree/ReplicatedMergeTreeMutationEntry.cpp b/dbms/src/Storages/MergeTree/ReplicatedMergeTreeMutationEntry.cpp
index ea744b8f91e5..b2299b2cbbdc 100644
--- a/dbms/src/Storages/MergeTree/ReplicatedMergeTreeMutationEntry.cpp
+++ b/dbms/src/Storages/MergeTree/ReplicatedMergeTreeMutationEntry.cpp
@@ -2,6 +2,7 @@
 #include <IO/Operators.h>
 #include <IO/ReadBufferFromString.h>
 #include <IO/WriteBufferFromString.h>
+#include <IO/ReadHelpers.h>
 
 
 namespace DB
@@ -52,7 +53,8 @@ void ReplicatedMergeTreeMutationEntry::readText(ReadBuffer & in)
 
     in >> "commands: ";
     commands.readText(in);
-    in >> "
alter version: " >> alter_version;
+    if (checkString("
alter version: ", in))
+        in >> alter_version;
 }
 
 String ReplicatedMergeTreeMutationEntry::toString() const
