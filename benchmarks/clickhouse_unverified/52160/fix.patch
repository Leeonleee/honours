diff --git a/src/Functions/HasTokenImpl.h b/src/Functions/HasTokenImpl.h
index fdec5fcb0b7b..ab6b6399486b 100644
--- a/src/Functions/HasTokenImpl.h
+++ b/src/Functions/HasTokenImpl.h
@@ -39,6 +39,9 @@ struct HasTokenImpl
         if (start_pos != nullptr)
             throw Exception(ErrorCodes::ILLEGAL_TYPE_OF_ARGUMENT, "Function '{}' does not support start_pos argument", name);
 
+        if (pattern.empty())
+            throw Exception(ErrorCodes::BAD_ARGUMENTS, "Needle cannot be empty, because empty string isn't a token");
+
         if (haystack_offsets.empty())
             return;
 
