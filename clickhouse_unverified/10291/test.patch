diff --git a/tests/queries/0_stateless/01116_cross_count_asterisks.reference b/tests/queries/0_stateless/01116_cross_count_asterisks.reference
new file mode 100644
index 000000000000..8347b144a351
--- /dev/null
+++ b/tests/queries/0_stateless/01116_cross_count_asterisks.reference
@@ -0,0 +1,4 @@
+2
+1
+2
+1
diff --git a/tests/queries/0_stateless/01116_cross_count_asterisks.sql b/tests/queries/0_stateless/01116_cross_count_asterisks.sql
new file mode 100644
index 000000000000..1fb8b0b0e664
--- /dev/null
+++ b/tests/queries/0_stateless/01116_cross_count_asterisks.sql
@@ -0,0 +1,29 @@
+SET multiple_joins_rewriter_version = 2;
+
+SELECT count(*)
+FROM numbers(2) AS n1, numbers(3) AS n2, numbers(4) AS n3
+WHERE (n1.number = n2.number) AND (n2.number = n3.number);
+
+SELECT count(*) c FROM (
+    SELECT count(*), count(*) as c
+    FROM numbers(2) AS n1, numbers(3) AS n2, numbers(4) AS n3
+    WHERE (n1.number = n2.number) AND (n2.number = n3.number)
+        AND (SELECT count(*) FROM numbers(1)) = 1
+)
+WHERE (SELECT count(*) FROM numbers(2)) = 2
+HAVING c IN(SELECT count(*) c FROM numbers(1));
+
+SET multiple_joins_rewriter_version = 1;
+
+SELECT count(*)
+FROM numbers(2) AS n1, numbers(3) AS n2, numbers(4) AS n3
+WHERE (n1.number = n2.number) AND (n2.number = n3.number);
+
+SELECT count(*) c FROM (
+    SELECT count(*), count(*) as c
+    FROM numbers(2) AS n1, numbers(3) AS n2, numbers(4) AS n3
+    WHERE (n1.number = n2.number) AND (n2.number = n3.number)
+        AND (SELECT count(*) FROM numbers(1)) = 1
+)
+WHERE (SELECT count(*) FROM numbers(2)) = 2
+HAVING c IN(SELECT count(*) c FROM numbers(1));
