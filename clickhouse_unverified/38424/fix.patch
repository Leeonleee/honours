diff --git a/src/Functions/filesystem.cpp b/src/Functions/filesystem.cpp
index bea7ffdf818f..36db68617e9b 100644
--- a/src/Functions/filesystem.cpp
+++ b/src/Functions/filesystem.cpp
@@ -36,7 +36,7 @@ class FilesystemImpl : public IFunction
 
     static FunctionPtr create(ContextPtr context)
     {
-        return std::make_shared<FilesystemImpl<Impl>>(std::filesystem::space(context->getConfigRef().getString("path")));
+        return std::make_shared<FilesystemImpl<Impl>>(std::filesystem::space(context->getPath()));
     }
 
     bool isSuitableForShortCircuitArgumentsExecution(const DataTypesWithConstInfo & /*arguments*/) const override
