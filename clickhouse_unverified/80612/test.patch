diff --git a/tests/queries/0_stateless/03513_fix_shard_num_column_to_function_pass_with_nulls.reference b/tests/queries/0_stateless/03513_fix_shard_num_column_to_function_pass_with_nulls.reference
new file mode 100644
index 000000000000..66f4ca4a5a83
--- /dev/null
+++ b/tests/queries/0_stateless/03513_fix_shard_num_column_to_function_pass_with_nulls.reference
@@ -0,0 +1,12 @@
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
+0
diff --git a/tests/queries/0_stateless/03513_fix_shard_num_column_to_function_pass_with_nulls.sql b/tests/queries/0_stateless/03513_fix_shard_num_column_to_function_pass_with_nulls.sql
new file mode 100644
index 000000000000..86fbf492b5aa
--- /dev/null
+++ b/tests/queries/0_stateless/03513_fix_shard_num_column_to_function_pass_with_nulls.sql
@@ -0,0 +1,12 @@
+SET join_use_nulls = 1;
+DROP TABLE IF EXISTS t0;
+DROP TABLE IF EXISTS t1;
+
+CREATE TABLE t0 (c0 Int) ENGINE = Memory();
+INSERT INTO t0 SELECT number FROM numbers(3);
+CREATE TABLE t1 (c0 Int) ENGINE = Distributed('test_cluster_two_shards', currentDatabase(), t0);
+SELECT t1._shard_num % t1._shard_num FROM t1 FULL JOIN (SELECT 1 AS c0) tx ON TRUE;
+SELECT t1._shard_num % shardNum() FROM t1 FULL JOIN (SELECT 1 AS c0) tx ON TRUE;
+
+-- This doesn't work, but it is a separate bug https://github.com/ClickHouse/ClickHouse/issues/80691
+-- SELECT t1._shard_num % t1._shard_num FROM t1 FULL JOIN (SELECT 1 AS c0) tx ON TRUE ORDER BY t1._shard_num;
