diff --git a/dbms/tests/queries/0_stateless/00965_shard_unresolvable_addresses.reference b/dbms/tests/queries/0_stateless/00965_shard_unresolvable_addresses.reference
new file mode 100644
index 000000000000..d00491fd7e5b
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/00965_shard_unresolvable_addresses.reference
@@ -0,0 +1,1 @@
+1
diff --git a/dbms/tests/queries/0_stateless/00965_shard_unresolvable_addresses.sql b/dbms/tests/queries/0_stateless/00965_shard_unresolvable_addresses.sql
new file mode 100644
index 000000000000..b6b981c7d003
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/00965_shard_unresolvable_addresses.sql
@@ -0,0 +1,2 @@
+SELECT count() FROM remote('127.0.0.1,localhos', system.one); -- { serverError 279 }
+SELECT count() FROM remote('127.0.0.1|localhos', system.one);
