diff --git a/tests/queries/0_stateless/02770_jit_aggregation_nullable_key_fix.reference b/tests/queries/0_stateless/02770_jit_aggregation_nullable_key_fix.reference
new file mode 100644
index 000000000000..7d604c076f4b
--- /dev/null
+++ b/tests/queries/0_stateless/02770_jit_aggregation_nullable_key_fix.reference
@@ -0,0 +1,4 @@
+1048576
+65411
+1048576
+65411
diff --git a/tests/queries/0_stateless/02770_jit_aggregation_nullable_key_fix.sql b/tests/queries/0_stateless/02770_jit_aggregation_nullable_key_fix.sql
new file mode 100644
index 000000000000..e4ce789f4da2
--- /dev/null
+++ b/tests/queries/0_stateless/02770_jit_aggregation_nullable_key_fix.sql
@@ -0,0 +1,39 @@
+SET compile_aggregate_expressions = 1;
+SET min_count_to_compile_aggregate_expression = 0;
+SET group_by_use_nulls = 0;
+
+SELECT count() FROM
+(
+    SELECT
+        count([NULL, NULL]),
+        count([2147483646, -2147483647, 3, 3]),
+        uniqExact(if(number >= 1048577, number, NULL), NULL)
+    FROM numbers(1048577)
+    GROUP BY if(number >= 2., number, NULL)
+);
+
+SELECT count() FROM
+(
+    SELECT count()
+    FROM numbers(65411)
+    GROUP BY if(number < 1, NULL, number)
+);
+
+SET group_by_use_nulls = 1;
+
+SELECT count() FROM
+(
+    SELECT
+        count([NULL, NULL]),
+        count([2147483646, -2147483647, 3, 3]),
+        uniqExact(if(number >= 1048577, number, NULL), NULL)
+    FROM numbers(1048577)
+    GROUP BY if(number >= 2., number, NULL)
+);
+
+SELECT count() FROM
+(
+    SELECT count()
+    FROM numbers(65411)
+    GROUP BY if(number < 1, NULL, number)
+);
