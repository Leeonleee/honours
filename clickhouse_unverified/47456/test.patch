diff --git a/tests/queries/0_stateless/02678_explain_pipeline_graph.reference b/tests/queries/0_stateless/02678_explain_pipeline_graph.reference
new file mode 100644
index 000000000000..e69de29bb2d1
diff --git a/tests/queries/0_stateless/02678_explain_pipeline_graph.sql b/tests/queries/0_stateless/02678_explain_pipeline_graph.sql
new file mode 100644
index 000000000000..48cfbf2b3493
--- /dev/null
+++ b/tests/queries/0_stateless/02678_explain_pipeline_graph.sql
@@ -0,0 +1,7 @@
+-- The server does not crash after these queries:
+
+DROP TABLE IF EXISTS t1;
+CREATE TABLE t1(ID UInt64, name String) engine=MergeTree order by ID;
+insert into t1(ID, name) values (1, 'abc'), (2, 'bbb');
+explain pipeline graph=1 select count(ID) from t1 FORMAT Null;
+DROP TABLE t1;
