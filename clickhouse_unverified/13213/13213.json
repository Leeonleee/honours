{
  "repo": "ClickHouse/ClickHouse",
  "pull_number": 13213,
  "instance_id": "ClickHouse__ClickHouse-13213",
  "issue_numbers": [
    "12494",
    "13211"
  ],
  "base_commit": "5f561f5a97f18cf3d79f0b72636a37e65f7c46f3",
  "patch": "diff --git a/src/Functions/FunctionsLogical.cpp b/src/Functions/FunctionsLogical.cpp\nindex 879993ccc1a4..3fc96cc1d92f 100644\n--- a/src/Functions/FunctionsLogical.cpp\n+++ b/src/Functions/FunctionsLogical.cpp\n@@ -98,10 +98,15 @@ static bool extractConstColumns(ColumnRawPtrs & in, UInt8 & res, Func && func)\n \n     for (int i = static_cast<int>(in.size()) - 1; i >= 0; --i)\n     {\n-        if (!isColumnConst(*in[i]))\n+        UInt8 x;\n+\n+        if (in[i]->onlyNull())\n+            x = func(Null());\n+        else if (isColumnConst(*in[i]))\n+            x = func((*in[i])[0]);\n+        else\n             continue;\n \n-        UInt8 x = func((*in[i])[0]);\n         if (has_res)\n         {\n             res = Op::apply(res, x);\n@@ -199,12 +204,20 @@ struct ValueGetterBuilderImpl<Type, Types...>\n {\n     static TernaryValueGetter build(const IColumn * x)\n     {\n-        if (const auto * nullable_column = typeid_cast<const ColumnNullable *>(x))\n+        if (x->onlyNull())\n+        {\n+            return [](size_t){ return Ternary::Null; };\n+        }\n+        else if (const auto * nullable_column = typeid_cast<const ColumnNullable *>(x))\n         {\n             if (const auto * nested_column = typeid_cast<const ColumnVector<Type> *>(nullable_column->getNestedColumnPtr().get()))\n             {\n-                return [&null_data = nullable_column->getNullMapData(), &column_data = nested_column->getData()](size_t i)\n-                { return Ternary::makeValue(column_data[i], null_data[i]); };\n+                return [\n+                    &null_data = nullable_column->getNullMapData(),\n+                    &column_data = nested_column->getData()](size_t i)\n+                {\n+                    return Ternary::makeValue(column_data[i], null_data[i]);\n+                };\n             }\n             else\n                 return ValueGetterBuilderImpl<Types...>::build(x);\n",
  "test_patch": "diff --git a/tests/queries/0_stateless/01420_logical_functions_materialized_null.reference b/tests/queries/0_stateless/01420_logical_functions_materialized_null.reference\nnew file mode 100644\nindex 000000000000..d82aab4099f4\n--- /dev/null\n+++ b/tests/queries/0_stateless/01420_logical_functions_materialized_null.reference\n@@ -0,0 +1,7 @@\n+\\N\n+1\n+\\N\n+1\n+\\N\n+1\n+1\ndiff --git a/tests/queries/0_stateless/01420_logical_functions_materialized_null.sql b/tests/queries/0_stateless/01420_logical_functions_materialized_null.sql\nnew file mode 100644\nindex 000000000000..7c61295ca1f3\n--- /dev/null\n+++ b/tests/queries/0_stateless/01420_logical_functions_materialized_null.sql\n@@ -0,0 +1,8 @@\n+SELECT NULL AND 1;\n+SELECT NULL OR 1;\n+SELECT materialize(NULL) AND 1;\n+SELECT materialize(NULL) OR 1;\n+SELECT arrayJoin([NULL]) AND 1;\n+SELECT arrayJoin([NULL]) OR 1;\n+\n+SELECT isConstant(arrayJoin([NULL]) AND 1);\n",
  "problem_statement": "Unknown numeric column of type: DB::IColumn const*\n```\r\nSELECT x1 and 1 FROM (SELECT number + null AS x1 FROM numbers(1))\r\n\r\n\r\n2020.07.14 17:29:12.351778 [ 159595 ] {8ed241d3-6c94-49be-a14a-a3e2175c822b} <Error> : Logical error: 'Unknown numeric column of type: DB::IColumn const*'.\r\nclickhouse-server: /home/akuzm/ch4/ch/src/Common/Exception.cpp:45: DB::Exception::Exception(const std::string &, int): Assertion `false' failed.\r\n2020.07.14 17:29:12.352110 [ 159533 ] {} <Trace> BaseDaemon: Received signal 6\r\n2020.07.14 17:29:12.352443 [ 159617 ] {} <Fatal> BaseDaemon: ########################################\r\n2020.07.14 17:29:12.352935 [ 159617 ] {} <Fatal> BaseDaemon: (version 20.7.1.1, build id: F176DE2A5C050ABF) (from thread 159595) (query_id: 8ed241d3-6c94-49be-a14a-a3e2175c822b) Received signal Aborted (6)\r\n2020.07.14 17:29:12.353053 [ 159617 ] {} <Fatal> BaseDaemon: \r\n2020.07.14 17:29:12.353213 [ 159617 ] {} <Fatal> BaseDaemon: Stack trace: 0x7f966e30f18b 0x7f966e2ee859 0x7f966e2ee729 0x7f966e2fff36 0x7f96722373a5 0x7f96687dd327 0x7f96687dbc9e 0x7f96687da5fe 0x7f96687d8f6e 0x7f96687d78ce 0x7f96687d623e 0x7f96687d4b9e 0x7f96687d350e 0x7f96687d1e6e 0x7f96687d07de 0x7f96687d069e 0x7f96687d05aa 0x7f96687ecbb9 0x7f96687ec977 0x7f96687ec727 0x7f96687ec4d7 0x7f96687ec287 0x7f96687ec037 0x7f96687ebde7 0x7f96687ebb97 0x7f96687eb947 0x7f96687ce407 0x7f96687cde67\r\n2020.07.14 17:29:12.353576 [ 159617 ] {} <Fatal> BaseDaemon: 4. /build/glibc-YYA7BZ/glibc-2.31/signal/../sysdeps/unix/sysv/linux/raise.c:51: raise @ 0x4618b in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.31.so\r\n2020.07.14 17:29:12.353738 [ 159617 ] {} <Fatal> BaseDaemon: 5. /build/glibc-YYA7BZ/glibc-2.31/stdlib/abort.c:81: abort @ 0x25859 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.31.so\r\n2020.07.14 17:29:12.353960 [ 159617 ] {} <Fatal> BaseDaemon: 6. /build/glibc-YYA7BZ/glibc-2.31/intl/loadmsgcat.c:509: _nl_load_domain.cold @ 0x25729 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.31.so\r\n2020.07.14 17:29:12.354223 [ 159617 ] {} <Fatal> BaseDaemon: 7. ? @ 0x36f36 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.31.so\r\n2020.07.14 17:29:12.354498 [ 159617 ] {} <Fatal> BaseDaemon: 8. /home/akuzm/ch4/ch/src/Common/Exception.cpp:48: DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int) @ 0x29d3a5 in /home/akuzm/ch4/build-clang10/src/libclickhouse_common_iod.so\r\n2020.07.14 17:29:12.356133 [ 159617 ] {} <Fatal> BaseDaemon: 9. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:224: DB::(anonymous namespace)::ValueGetterBuilderImpl<>::build(DB::IColumn const*) @ 0x2f85327 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.357831 [ 159617 ] {} <Fatal> BaseDaemon: 10. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<double>::build(DB::IColumn const*) @ 0x2f83c9e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.359433 [ 159617 ] {} <Fatal> BaseDaemon: 11. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<float, double>::build(DB::IColumn const*) @ 0x2f825fe in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.360802 [ 159617 ] {} <Fatal> BaseDaemon: 12. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<long, float, double>::build(DB::IColumn const*) @ 0x2f80f6e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.362184 [ 159617 ] {} <Fatal> BaseDaemon: 13. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<int, long, float, double>::build(DB::IColumn const*) @ 0x2f7f8ce in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.363597 [ 159617 ] {} <Fatal> BaseDaemon: 14. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f7e23e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.365015 [ 159617 ] {} <Fatal> BaseDaemon: 15. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f7cb9e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.366604 [ 159617 ] {} <Fatal> BaseDaemon: 16. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<unsigned long, signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f7b50e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.368250 [ 159617 ] {} <Fatal> BaseDaemon: 17. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<unsigned int, unsigned long, signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f79e6e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.369625 [ 159617 ] {} <Fatal> BaseDaemon: 18. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<unsigned short, unsigned int, unsigned long, signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f787de in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.370890 [ 159617 ] {} <Fatal> BaseDaemon: 19. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<char8_t, unsigned short, unsigned int, unsigned long, signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f7869e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.372139 [ 159617 ] {} <Fatal> BaseDaemon: 20. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:270: DB::(anonymous namespace)::AssociativeGenericApplierImpl<DB::FunctionsLogicalDetail::AndImpl, 1ul>::AssociativeGenericApplierImpl(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> > const&) @ 0x2f785aa in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.374202 [ 159617 ] {} <Fatal> BaseDaemon: 21. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:306: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 1ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f94bb9 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.376148 [ 159617 ] {} <Fatal> BaseDaemon: 22. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 2ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f94977 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.378124 [ 159617 ] {} <Fatal> BaseDaemon: 23. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 3ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f94727 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.380126 [ 159617 ] {} <Fatal> BaseDaemon: 24. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 4ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f944d7 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.382491 [ 159617 ] {} <Fatal> BaseDaemon: 25. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 5ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f94287 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.384721 [ 159617 ] {} <Fatal> BaseDaemon: 26. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 6ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f94037 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.387007 [ 159617 ] {} <Fatal> BaseDaemon: 27. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 7ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f93de7 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.389383 [ 159617 ] {} <Fatal> BaseDaemon: 28. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 8ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f93b97 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.391667 [ 159617 ] {} <Fatal> BaseDaemon: 29. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 9ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f93947 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.392900 [ 159617 ] {} <Fatal> BaseDaemon: 30. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 10ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f76407 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.14 17:29:12.394319 [ 159617 ] {} <Fatal> BaseDaemon: 31. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:291: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 10ul>::apply<std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, bool) @ 0x2f75e67 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n```\nAssertion found by fuzz test in FunctionsLogical in query SELECT arrayJoin([NULL]) AND 1\n\n",
  "hints_text": "```\r\nSELECT 1 WHERE 1 AND arrayJoin([NULL])\r\n\r\n\r\n2020.07.16 19:17:27.063307 [ 617442 ] {d3acd8a7-3fcb-4cff-9826-4befa98bb4f2} <Error> : Logical error: 'Unknown numeric column of type: DB::ColumnNullable'.\r\nclickhouse-server: /home/akuzm/ch4/ch/src/Common/Exception.cpp:45: DB::Exception::Exception(const std::string &, int): Assertion `false' failed.\r\n2020.07.16 19:17:27.063740 [ 617380 ] {} <Trace> BaseDaemon: Received signal 6\r\n2020.07.16 19:17:27.064198 [ 617467 ] {} <Fatal> BaseDaemon: ########################################\r\n2020.07.16 19:17:27.064720 [ 617467 ] {} <Fatal> BaseDaemon: (version 20.7.1.1, build id: 21B0DCC47427FD8E) (from thread 617442) (query_id: d3acd8a7-3fcb-4cff-9826-4befa98bb4f2) Received signal Aborted (6)\r\n2020.07.16 19:17:27.064861 [ 617467 ] {} <Fatal> BaseDaemon: \r\n2020.07.16 19:17:27.065074 [ 617467 ] {} <Fatal> BaseDaemon: Stack trace: 0x7ff1dc52c18b 0x7ff1dc50b859 0x7ff1dc50b729 0x7ff1dc51cf36 0x7ff1e04533a5 0x7ff1d69fa37d 0x7ff1d69f8cce 0x7ff1d69f762e 0x7ff1d69f5f9e 0x7ff1d69f48fe 0x7ff1d69f326e 0x7ff1d69f1bce 0x7ff1d69f053e 0x7ff1d69eee9e 0x7ff1d69ed80e 0x7ff1d69ed6ce 0x7ff1d69ed5da 0x7ff1d6a09c09 0x7ff1d6a099c7 0x7ff1d6a09777 0x7ff1d6a09527 0x7ff1d6a092d7 0x7ff1d6a09087 0x7ff1d6a08e37 0x7ff1d6a08be7 0x7ff1d6a08997 0x7ff1d69eb437 0x7ff1d69eae97\r\n2020.07.16 19:17:27.065416 [ 617467 ] {} <Fatal> BaseDaemon: 4. /build/glibc-YYA7BZ/glibc-2.31/signal/../sysdeps/unix/sysv/linux/raise.c:51: __GI_raise @ 0x4618b in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.31.so\r\n2020.07.16 19:17:27.065673 [ 617467 ] {} <Fatal> BaseDaemon: 5. /build/glibc-YYA7BZ/glibc-2.31/stdlib/abort.c:81: abort @ 0x25859 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.31.so\r\n2020.07.16 19:17:27.065980 [ 617467 ] {} <Fatal> BaseDaemon: 6. /build/glibc-YYA7BZ/glibc-2.31/intl/loadmsgcat.c:509: _nl_load_domain.cold @ 0x25729 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.31.so\r\n2020.07.16 19:17:27.066279 [ 617467 ] {} <Fatal> BaseDaemon: 7. ? @ 0x36f36 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.31.so\r\n2020.07.16 19:17:27.066607 [ 617467 ] {} <Fatal> BaseDaemon: 8. /home/akuzm/ch4/ch/src/Common/Exception.cpp:48: DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int) @ 0x29c3a5 in /home/akuzm/ch4/build-clang10/src/libclickhouse_common_iod.so\r\n2020.07.16 19:17:27.068172 [ 617467 ] {} <Fatal> BaseDaemon: 9. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:224: DB::(anonymous namespace)::ValueGetterBuilderImpl<>::build(DB::IColumn const*) @ 0x2f8537d in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.069670 [ 617467 ] {} <Fatal> BaseDaemon: 10. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<double>::build(DB::IColumn const*) @ 0x2f83cce in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.071350 [ 617467 ] {} <Fatal> BaseDaemon: 11. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<float, double>::build(DB::IColumn const*) @ 0x2f8262e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.072793 [ 617467 ] {} <Fatal> BaseDaemon: 12. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<long, float, double>::build(DB::IColumn const*) @ 0x2f80f9e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.074228 [ 617467 ] {} <Fatal> BaseDaemon: 13. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<int, long, float, double>::build(DB::IColumn const*) @ 0x2f7f8fe in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.075771 [ 617467 ] {} <Fatal> BaseDaemon: 14. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f7e26e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.077237 [ 617467 ] {} <Fatal> BaseDaemon: 15. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f7cbce in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.078719 [ 617467 ] {} <Fatal> BaseDaemon: 16. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<unsigned long, signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f7b53e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.080031 [ 617467 ] {} <Fatal> BaseDaemon: 17. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<unsigned int, unsigned long, signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f79e9e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.081342 [ 617467 ] {} <Fatal> BaseDaemon: 18. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<unsigned short, unsigned int, unsigned long, signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f7880e in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.082702 [ 617467 ] {} <Fatal> BaseDaemon: 19. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:210: DB::(anonymous namespace)::ValueGetterBuilderImpl<char8_t, unsigned short, unsigned int, unsigned long, signed char, short, int, long, float, double>::build(DB::IColumn const*) @ 0x2f786ce in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.084035 [ 617467 ] {} <Fatal> BaseDaemon: 20. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:270: DB::(anonymous namespace)::AssociativeGenericApplierImpl<DB::FunctionsLogicalDetail::AndImpl, 1ul>::AssociativeGenericApplierImpl(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> > const&) @ 0x2f785da in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.086251 [ 617467 ] {} <Fatal> BaseDaemon: 21. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:306: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 1ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f94c09 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.088182 [ 617467 ] {} <Fatal> BaseDaemon: 22. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 2ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f949c7 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.090197 [ 617467 ] {} <Fatal> BaseDaemon: 23. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 3ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f94777 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.092208 [ 617467 ] {} <Fatal> BaseDaemon: 24. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 4ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f94527 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.094252 [ 617467 ] {} <Fatal> BaseDaemon: 25. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 5ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f942d7 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.096229 [ 617467 ] {} <Fatal> BaseDaemon: 26. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 6ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f94087 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.098243 [ 617467 ] {} <Fatal> BaseDaemon: 27. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 7ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f93e37 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.100380 [ 617467 ] {} <Fatal> BaseDaemon: 28. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 8ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f93be7 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.102673 [ 617467 ] {} <Fatal> BaseDaemon: 29. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 9ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f93997 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.104014 [ 617467 ] {} <Fatal> BaseDaemon: 30. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:302: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 10ul>::doBatchedApply<true, std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&) @ 0x2f76437 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n2020.07.16 19:17:27.105535 [ 617467 ] {} <Fatal> BaseDaemon: 31. /home/akuzm/ch4/ch/src/Functions/FunctionsLogical.cpp:291: void DB::(anonymous namespace)::OperationApplier<DB::FunctionsLogicalDetail::AndImpl, DB::(anonymous namespace)::AssociativeGenericApplierImpl, 10ul>::apply<std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(std::__1::vector<DB::IColumn const*, std::__1::allocator<DB::IColumn const*> >&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, bool) @ 0x2f75e97 in /home/akuzm/ch4/build-clang10/src/Functions/libclickhouse_functionsd.so\r\n```\n",
  "created_at": "2020-08-01T18:56:15Z",
  "modified_files": [
    "src/Functions/FunctionsLogical.cpp"
  ],
  "modified_test_files": [
    "b/tests/queries/0_stateless/01420_logical_functions_materialized_null.reference",
    "b/tests/queries/0_stateless/01420_logical_functions_materialized_null.sql"
  ]
}