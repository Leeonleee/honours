You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
ALTER UPDATE/ALTER DELETE statements must use only deterministic functions! Function 'dictHas' is non-deterministic
After #7247 certain scenarios of mutations with dictionaries did stop working, and send error messages like "Function 'dictHas' is non-deterministic".


Говорят непонятно как теперь апдейты делать.

> Здравствуйте! Вы мне както подсказывали как в кликхаусе делаете мутации с условиями через словари:
> 
> Denny Crane [not a Yandex bot], [22.01.20 04:27]
> такие запросы нельзя делать, alter для каждой строки xxx проверить where.
> 
> Я готовлю таблицу ReplicatedMergeTree c id-шками которые надо удалить, она обязательно должна создержать одинаковые записи на всех репликах, чтобы мутации на репликах получили один и тот же результат мутации.
> 
> Создаю словарь который смотрит на ReplicatedMergeTree на всех репликах
> 
> Выясняю какие парты содержат записи которые надо удалить
> 
> Выполняю alter table xxx delete where date between парты and dictHas(словарь)
> 
> 
> у меня это прекрасно работало когда кх был сингл инстанс, а сейчас когда появилась реплика, ругается на то, что :
> 
> DB::Exception: ALTER UPDATE/ALTER DELETE statements must use only deterministic functions! Function 'dictHas' is non-deterministic (version 19.17.6.36 (official build))
> 
> создал все как вы советовали таблицы и словари синхронизированы на обоих репликах и имеют одинаковое кол-во записей
> 
> не могли бы вы подсказать в чем может быть проблема?

Я тоже делаю все мутации через словари. К счастью в 18.14.18 такой проблемы нет.

_Originally posted by @den-crane in https://github.com/ClickHouse/ClickHouse/pull/7247#issuecomment-606806745_
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
