diff --git a/tests/queries/0_stateless/01304_direct_io.reference b/tests/queries/0_stateless/01304_direct_io.reference
new file mode 100644
index 000000000000..ec7a223ddc2b
--- /dev/null
+++ b/tests/queries/0_stateless/01304_direct_io.reference
@@ -0,0 +1,1 @@
+Loaded 1 queries.
diff --git a/tests/queries/0_stateless/01304_direct_io.sh b/tests/queries/0_stateless/01304_direct_io.sh
new file mode 100755
index 000000000000..32091acd5ebd
--- /dev/null
+++ b/tests/queries/0_stateless/01304_direct_io.sh
@@ -0,0 +1,17 @@
+#!/usr/bin/env bash
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+. $CURDIR/../shell_config.sh
+
+$CLICKHOUSE_CLIENT --multiquery --query "
+    DROP TABLE IF EXISTS bug;
+    CREATE TABLE bug (UserID UInt64, Date Date) ENGINE = MergeTree ORDER BY Date;
+    INSERT INTO bug SELECT rand64(), '2020-06-07' FROM numbers(50000000);
+    OPTIMIZE TABLE bug FINAL;"
+
+$CLICKHOUSE_BENCHMARK --database $CLICKHOUSE_DATABASE --iterations 10 --max_threads 100 --min_bytes_to_use_direct_io 1 <<< "SELECT sum(UserID) FROM bug PREWHERE NOT ignore(Date)" 1>/dev/null 2>$CLICKHOUSE_TMP/err
+cat $CLICKHOUSE_TMP/err | grep Exception
+cat $CLICKHOUSE_TMP/err | grep Loaded
+
+$CLICKHOUSE_CLIENT --multiquery --query "
+    DROP TABLE bug;"
