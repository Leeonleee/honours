diff --git a/tests/queries/0_stateless/02888_attach_partition_from_different_tables.reference b/tests/queries/0_stateless/02888_attach_partition_from_different_tables.reference
new file mode 100644
index 000000000000..3cc269ec01c7
--- /dev/null
+++ b/tests/queries/0_stateless/02888_attach_partition_from_different_tables.reference
@@ -0,0 +1,11 @@
+1	1
+0	0
+1	1
+2	2
+3	3
+4	4
+5	5
+6	6
+7	7
+8	8
+9	9
diff --git a/tests/queries/0_stateless/02888_attach_partition_from_different_tables.sql b/tests/queries/0_stateless/02888_attach_partition_from_different_tables.sql
new file mode 100644
index 000000000000..98f841394e1d
--- /dev/null
+++ b/tests/queries/0_stateless/02888_attach_partition_from_different_tables.sql
@@ -0,0 +1,90 @@
+-- test different index type
+CREATE TABLE attach_partition_t1 (
+	a UInt32,
+	b String,
+	INDEX bf b TYPE tokenbf_v1(8192, 3, 0) GRANULARITY 1
+)
+ENGINE = MergeTree
+ORDER BY a;
+
+INSERT INTO attach_partition_t1 SELECT number, toString(number) FROM numbers(10);
+
+CREATE TABLE attach_partition_t2 (
+	a UInt32,
+	b String,
+	INDEX bf b TYPE bloom_filter GRANULARITY 1
+)
+ENGINE = MergeTree
+ORDER BY a;
+
+ALTER TABLE attach_partition_t2 ATTACH PARTITION tuple() FROM attach_partition_t1; -- { serverError 36 }
+
+-- test different projection name
+CREATE TABLE attach_partition_t3 (
+	a UInt32,
+	b String,
+  PROJECTION proj
+   (
+       SELECT
+           b,
+           sum(a)
+       GROUP BY b
+   )
+)
+ENGINE = MergeTree
+ORDER BY a;
+
+INSERT INTO attach_partition_t3 SELECT number, toString(number) FROM numbers(10);
+
+CREATE TABLE attach_partition_t4 (
+	a UInt32,
+	b String,
+  PROJECTION differently_named_proj
+   (
+       SELECT
+           b,
+           sum(a)
+       GROUP BY b
+   )
+)
+ENGINE = MergeTree
+ORDER BY a;
+
+ALTER TABLE attach_partition_t4 ATTACH PARTITION tuple() FROM attach_partition_t3; -- { serverError 36 }
+
+-- check attach with same index and projection
+CREATE TABLE attach_partition_t5 (
+	a UInt32,
+	b String,
+  PROJECTION proj
+   (
+       SELECT
+           b,
+           sum(a)
+       GROUP BY b
+   )
+)
+ENGINE = MergeTree
+ORDER BY a;
+
+INSERT INTO attach_partition_t5 SELECT number, toString(number) FROM numbers(10);
+
+
+CREATE TABLE attach_partition_t6 (
+	a UInt32,
+	b String,
+  PROJECTION proj
+   (
+       SELECT
+           b,
+           sum(a)
+       GROUP BY b
+   )
+)
+ENGINE = MergeTree
+ORDER BY a;
+
+ALTER TABLE attach_partition_t6 ATTACH PARTITION tuple() FROM attach_partition_t5;
+
+SELECT * FROM attach_partition_t6 WHERE b = '1';
+SELECT b, sum(a) FROM attach_partition_t6 GROUP BY b ORDER BY b;
