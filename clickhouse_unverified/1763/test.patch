diff --git a/dbms/tests/queries/0_stateless/00562_rewrite_select_expression_with_union.reference b/dbms/tests/queries/0_stateless/00562_rewrite_select_expression_with_union.reference
new file mode 100644
index 000000000000..947b7be99aa6
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/00562_rewrite_select_expression_with_union.reference
@@ -0,0 +1,4 @@
+test_string	2
+test_string	2
+test_string
+test_string
diff --git a/dbms/tests/queries/0_stateless/00562_rewrite_select_expression_with_union.sql b/dbms/tests/queries/0_stateless/00562_rewrite_select_expression_with_union.sql
new file mode 100644
index 000000000000..3527ddb3c410
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/00562_rewrite_select_expression_with_union.sql
@@ -0,0 +1,10 @@
+DROP TABLE IF EXISTS test.test;
+
+CREATE TABLE test.test ( s String,  i Int64) ENGINE = Memory;
+
+INSERT INTO test.test VALUES('test_string', 1);
+
+SELECT s, SUM(i*2) AS i FROM test.test GROUP BY s  UNION ALL  SELECT s, SUM(i*2) AS i FROM test.test GROUP BY s;
+SELECT s FROM (SELECT s, SUM(i*2) AS i FROM test.test GROUP BY s  UNION ALL  SELECT s, SUM(i*2) AS i FROM test.test GROUP BY s);
+
+DROP TABLE IF EXISTS test.test;
