{
  "repo": "ClickHouse/ClickHouse",
  "pull_number": 48489,
  "instance_id": "ClickHouse__ClickHouse-48489",
  "issue_numbers": [
    "48260"
  ],
  "base_commit": "d3d9b21c7bd644d7835963a66f15e323f828b5ff",
  "patch": "diff --git a/docs/en/sql-reference/functions/date-time-functions.md b/docs/en/sql-reference/functions/date-time-functions.md\nindex 74ef9a28dc1b..42a16b7185fa 100644\n--- a/docs/en/sql-reference/functions/date-time-functions.md\n+++ b/docs/en/sql-reference/functions/date-time-functions.md\n@@ -645,7 +645,7 @@ For an alternative to `date\\_diff`, see function `age`.\n date_diff('unit', startdate, enddate, [timezone])\n ```\n \n-Aliases: `dateDiff`, `DATE_DIFF`.\n+Aliases: `dateDiff`, `DATE_DIFF`, `timestampDiff`, `timestamp_diff`, `TIMESTAMP_DIFF`.\n \n **Arguments**\n \ndiff --git a/src/Functions/dateDiff.cpp b/src/Functions/dateDiff.cpp\nindex 457b77b9843f..b28c97d45b2b 100644\n--- a/src/Functions/dateDiff.cpp\n+++ b/src/Functions/dateDiff.cpp\n@@ -448,6 +448,11 @@ class FunctionTimeDiff : public IFunction\n REGISTER_FUNCTION(DateDiff)\n {\n     factory.registerFunction<FunctionDateDiff<true>>({}, FunctionFactory::CaseInsensitive);\n+    factory.registerAlias(\"date_diff\", FunctionDateDiff<true>::name);\n+    factory.registerAlias(\"DATE_DIFF\", FunctionDateDiff<true>::name);\n+    factory.registerAlias(\"timestampDiff\", FunctionDateDiff<true>::name);\n+    factory.registerAlias(\"timestamp_diff\", FunctionDateDiff<true>::name);\n+    factory.registerAlias(\"TIMESTAMP_DIFF\", FunctionDateDiff<true>::name);\n }\n \n REGISTER_FUNCTION(TimeDiff)\ndiff --git a/src/Functions/trim.cpp b/src/Functions/trim.cpp\nindex acfab47a68b3..dd51c606ff71 100644\n--- a/src/Functions/trim.cpp\n+++ b/src/Functions/trim.cpp\n@@ -112,5 +112,8 @@ REGISTER_FUNCTION(Trim)\n     factory.registerFunction<FunctionTrimLeft>();\n     factory.registerFunction<FunctionTrimRight>();\n     factory.registerFunction<FunctionTrimBoth>();\n+    factory.registerAlias(\"ltrim\", FunctionTrimLeft::name);\n+    factory.registerAlias(\"rtrim\", FunctionTrimRight::name);\n+    factory.registerAlias(\"trim\", FunctionTrimBoth::name);\n }\n }\n",
  "test_patch": "diff --git a/tests/queries/0_stateless/02710_date_diff_aliases.reference b/tests/queries/0_stateless/02710_date_diff_aliases.reference\nnew file mode 100644\nindex 000000000000..1eeb5a3a2fa9\n--- /dev/null\n+++ b/tests/queries/0_stateless/02710_date_diff_aliases.reference\n@@ -0,0 +1,5 @@\n+DATE_DIFF\n+TIMESTAMP_DIFF\n+date_diff\n+timestampDiff\n+timestamp_diff\ndiff --git a/tests/queries/0_stateless/02710_date_diff_aliases.sql b/tests/queries/0_stateless/02710_date_diff_aliases.sql\nnew file mode 100644\nindex 000000000000..c6b31c44f952\n--- /dev/null\n+++ b/tests/queries/0_stateless/02710_date_diff_aliases.sql\n@@ -0,0 +1,7 @@\n+SELECT name FROM system.functions\n+WHERE name = 'date_diff'\n+   OR name = 'DATE_DIFF'\n+   OR name = 'timestampDiff'\n+   OR name = 'timestamp_diff'\n+   OR name = 'TIMESTAMP_DIFF'\n+ORDER BY name;\ndiff --git a/tests/queries/0_stateless/02711_trim_aliases.reference b/tests/queries/0_stateless/02711_trim_aliases.reference\nnew file mode 100644\nindex 000000000000..fa0920cd079e\n--- /dev/null\n+++ b/tests/queries/0_stateless/02711_trim_aliases.reference\n@@ -0,0 +1,3 @@\n+ltrim\n+rtrim\n+trim\ndiff --git a/tests/queries/0_stateless/02711_trim_aliases.sql b/tests/queries/0_stateless/02711_trim_aliases.sql\nnew file mode 100644\nindex 000000000000..d0d739805fdc\n--- /dev/null\n+++ b/tests/queries/0_stateless/02711_trim_aliases.sql\n@@ -0,0 +1,5 @@\n+SELECT name FROM system.functions\n+WHERE name = 'ltrim'\n+   OR name = 'rtrim'\n+   OR name = 'trim'\n+ORDER BY name;\n",
  "problem_statement": "Missing functions in system.functions\nI was expecting to see every built-in function to be presented in `system.functions`.\r\nHowever there are some functions like `date_add`, `timestamp_sub`, `timestamp_add` missing.\r\n\r\nhttps://fiddle.clickhouse.com/a028f696-69fa-4192-842e-d5c9ba751a34\r\n```sql\r\nSELECT name \r\nFROM system.functions \r\nWHERE name ilike 'timestamp%';\r\n\r\n-- empty resultset\r\n```\r\n\n",
  "hints_text": "`date_add` and `timestamp_add` are aliases for `plus` function, `timestamp_sub` - for function `minus`. \nThanks for clarification @evillique.\r\n\r\nI still think that those functions need to be present in `system.functions` because they already exist in ClickHouse documentation.",
  "created_at": "2023-04-06T14:08:40Z"
}