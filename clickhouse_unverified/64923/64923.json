{
  "repo": "ClickHouse/ClickHouse",
  "pull_number": 64923,
  "instance_id": "ClickHouse__ClickHouse-64923",
  "issue_numbers": [
    "64885"
  ],
  "base_commit": "afba7bb4edbdc1423c6b8dde1eca79fedb777fdc",
  "patch": "diff --git a/src/Functions/tupleConcat.cpp b/src/Functions/tupleConcat.cpp\nindex c48e4d614630..c9cdae10bcf4 100644\n--- a/src/Functions/tupleConcat.cpp\n+++ b/src/Functions/tupleConcat.cpp\n@@ -61,7 +61,7 @@ class FunctionTupleConcat : public IFunction\n         return std::make_shared<DataTypeTuple>(tuple_arg_types);\n     }\n \n-    ColumnPtr executeImpl(const ColumnsWithTypeAndName & arguments, const DataTypePtr &, size_t) const override\n+    ColumnPtr executeImpl(const ColumnsWithTypeAndName & arguments, const DataTypePtr &, size_t input_rows_count) const override\n     {\n         const size_t num_arguments = arguments.size();\n         Columns columns;\n@@ -92,6 +92,9 @@ class FunctionTupleConcat : public IFunction\n                 columns.push_back(inner_col);\n         }\n \n+        if (columns.empty())\n+            return ColumnTuple::create(input_rows_count);\n+\n         return ColumnTuple::create(columns);\n     }\n };\n",
  "test_patch": "diff --git a/tests/queries/0_stateless/03167_empty_tuple_concat.reference b/tests/queries/0_stateless/03167_empty_tuple_concat.reference\nnew file mode 100644\nindex 000000000000..6a452c185a8c\n--- /dev/null\n+++ b/tests/queries/0_stateless/03167_empty_tuple_concat.reference\n@@ -0,0 +1,1 @@\n+()\ndiff --git a/tests/queries/0_stateless/03167_empty_tuple_concat.sql b/tests/queries/0_stateless/03167_empty_tuple_concat.sql\nnew file mode 100644\nindex 000000000000..f6fce86f3321\n--- /dev/null\n+++ b/tests/queries/0_stateless/03167_empty_tuple_concat.sql\n@@ -0,0 +1,1 @@\n+SELECT ()||();\n",
  "problem_statement": "A logical error when concatenating two empty tuples\n**Describe the unexpected behaviour**\r\n\r\n```\r\nSELECT ()||()\r\n```\n",
  "hints_text": "",
  "created_at": "2024-06-06T15:44:12Z",
  "modified_files": [
    "src/Functions/tupleConcat.cpp"
  ],
  "modified_test_files": [
    "b/tests/queries/0_stateless/03167_empty_tuple_concat.reference",
    "b/tests/queries/0_stateless/03167_empty_tuple_concat.sql"
  ]
}