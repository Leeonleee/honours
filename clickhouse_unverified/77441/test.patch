diff --git a/tests/clickhouse-test b/tests/clickhouse-test
index 7bf0a6f5e13d..fcb5dd827746 100755
--- a/tests/clickhouse-test
+++ b/tests/clickhouse-test
@@ -1851,6 +1851,10 @@ class TestCase:
                 + database
                 + "_1"
             )
+            for env_to_param in ["CLICKHOUSE_USER_FILES", "CLICKHOUSE_USER_FILES_UNIQUE"]:
+                value = os.environ.get(env_to_param, None)
+                if value:
+                    query_params += f" --param_{env_to_param}={value}"
 
         params = {
             "client": client + " --database=" + database + query_params,
@@ -2266,7 +2270,7 @@ class TestSuite:
                 try:
                     if filepath.endswith(".sql"):
                         for line in lines:
-                            if "{CLICKHOUSE_DATABASE" in line:
+                            if "{CLICKHOUSE_" in line:
                                 need_query_params = True
                 except UnicodeDecodeError:
                     pass
diff --git a/tests/queries/0_stateless/03381_file_log_merge_empty.reference b/tests/queries/0_stateless/03381_file_log_merge_empty.reference
new file mode 100644
index 000000000000..e69de29bb2d1
diff --git a/tests/queries/0_stateless/03381_file_log_merge_empty.sh b/tests/queries/0_stateless/03381_file_log_merge_empty.sh
new file mode 100755
index 000000000000..ae2fe211ad8e
--- /dev/null
+++ b/tests/queries/0_stateless/03381_file_log_merge_empty.sh
@@ -0,0 +1,16 @@
+#!/usr/bin/env bash
+
+set -eu
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CURDIR"/../shell_config.sh
+
+mkdir -p ${USER_FILES_PATH}/${CLICKHOUSE_TEST_UNIQUE_NAME}
+
+${CLICKHOUSE_CLIENT} --query "DROP TABLE IF EXISTS file_log;"
+
+${CLICKHOUSE_CLIENT} --query "CREATE TABLE file_log  (key UInt8, value UInt8) ENGINE = FileLog('${USER_FILES_PATH}/${CLICKHOUSE_TEST_UNIQUE_NAME}', 'JSONEachRow') SETTINGS handle_error_mode = 'stream'"
+
+# send_logs_level: reading from empty file log produces warning
+${CLICKHOUSE_CLIENT} --stream_like_engine_allow_direct_select=1 --query "select * from merge('', 'file_log') SETTINGS send_logs_level='error';"
