diff --git a/dbms/tests/queries/0_stateless/01076_predicate_optimizer_with_view.reference b/dbms/tests/queries/0_stateless/01076_predicate_optimizer_with_view.reference
new file mode 100644
index 000000000000..1e92e7b85965
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/01076_predicate_optimizer_with_view.reference
@@ -0,0 +1,4 @@
+SELECT 
    date, 
    id, 
    name, 
    value
FROM 
(
    SELECT 
        date, 
        id, 
        name, 
        value
    FROM default.test
    WHERE id = 1
)
WHERE id = 1
+SELECT 
    date, 
    id, 
    name, 
    value
FROM 
(
    SELECT 
        date, 
        id, 
        name, 
        value
    FROM default.test
    WHERE id = 2
)
WHERE id = 2
+SELECT id
FROM 
(
    SELECT 
        date, 
        id, 
        name, 
        value
    FROM default.test
    WHERE id = 1
)
WHERE id = 1
+SELECT id
FROM 
(
    SELECT 
        date, 
        id, 
        name, 
        value
    FROM default.test
    WHERE id = 1
) AS s
WHERE id = 1
diff --git a/dbms/tests/queries/0_stateless/01076_predicate_optimizer_with_view.sql b/dbms/tests/queries/0_stateless/01076_predicate_optimizer_with_view.sql
new file mode 100644
index 000000000000..fa55a47e7687
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/01076_predicate_optimizer_with_view.sql
@@ -0,0 +1,19 @@
+DROP TABLE IF EXISTS test;
+DROP TABLE IF EXISTS test_view;
+
+CREATE TABLE test(date Date, id Int8, name String, value Int64) ENGINE = MergeTree(date, (id, date), 8192);
+CREATE VIEW test_view AS SELECT * FROM test;
+
+SET enable_debug_queries = 1;
+SET enable_optimize_predicate_expression = 1;
+
+-- Optimize predicate expression with view
+ANALYZE SELECT * FROM test_view WHERE id = 1;
+ANALYZE SELECT * FROM test_view WHERE id = 2;
+ANALYZE SELECT id FROM test_view WHERE id  = 1;
+ANALYZE SELECT s.id FROM test_view AS s WHERE s.id = 1;
+
+SELECT * FROM (SELECT toUInt64(b), sum(id) AS b FROM test) WHERE `toUInt64(sum(id))` = 3; -- { serverError 47 }
+
+DROP TABLE IF EXISTS test;
+DROP TABLE IF EXISTS test_view;
diff --git a/dbms/tests/queries/bugs/00597_push_down_predicate.sql b/dbms/tests/queries/bugs/00597_push_down_predicate.sql
deleted file mode 100644
index 0de9522ab50e..000000000000
--- a/dbms/tests/queries/bugs/00597_push_down_predicate.sql
+++ /dev/null
@@ -1,18 +0,0 @@
-DROP TABLE IF EXISTS test.test;
-DROP TABLE IF EXISTS test.test_view;
-
-CREATE TABLE test.test(date Date, id Int8, name String, value Int64) ENGINE = MergeTree(date, (id, date), 8192);
-CREATE VIEW test.test_view AS SELECT * FROM test.test;
-
-SET enable_optimize_predicate_expression = 1;
-SET enable_debug_queries = 1;
-
--- Optimize predicate expression with view
--- TODO: simple view is not replaced with subquery inside syntax analyzer
-ANALYZE SELECT * FROM test.test_view WHERE id = 1;
-ANALYZE SELECT * FROM test.test_view WHERE id = 2;
-ANALYZE SELECT id FROM test.test_view WHERE id  = 1;
-ANALYZE SELECT s.id FROM test.test_view AS s WHERE s.id = 1;
-
--- TODO: this query shouldn't work, because the name `toUInt64(sum(id))` is undefined for user
-SELECT * FROM (SELECT toUInt64(b), sum(id) AS b FROM test.test) WHERE `toUInt64(sum(id))` = 3;
