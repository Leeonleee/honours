{
  "repo": "ClickHouse/ClickHouse",
  "pull_number": 12147,
  "instance_id": "ClickHouse__ClickHouse-12147",
  "issue_numbers": [
    "12146"
  ],
  "base_commit": "89497a08fe4e1dffd9069771ece161e078d244fd",
  "patch": "diff --git a/src/TableFunctions/TableFunctionRemote.cpp b/src/TableFunctions/TableFunctionRemote.cpp\nindex cfeb39071368..7fa3868d142e 100644\n--- a/src/TableFunctions/TableFunctionRemote.cpp\n+++ b/src/TableFunctions/TableFunctionRemote.cpp\n@@ -186,6 +186,9 @@ StoragePtr TableFunctionRemote::executeImpl(const ASTPtr & ast_function, const C\n             secure);\n     }\n \n+    if (!remote_table_function_ptr && remote_table.empty())\n+        throw Exception(\"The name of remote table cannot be empty\", ErrorCodes::BAD_ARGUMENTS);\n+\n     auto remote_table_id = StorageID::createEmpty();\n     remote_table_id.database_name = remote_database;\n     remote_table_id.table_name = remote_table;\n",
  "test_patch": "diff --git a/tests/queries/0_stateless/01372_remote_table_function_empty_table.reference b/tests/queries/0_stateless/01372_remote_table_function_empty_table.reference\nnew file mode 100644\nindex 000000000000..e69de29bb2d1\ndiff --git a/tests/queries/0_stateless/01372_remote_table_function_empty_table.sql b/tests/queries/0_stateless/01372_remote_table_function_empty_table.sql\nnew file mode 100644\nindex 000000000000..698c323d73f4\n--- /dev/null\n+++ b/tests/queries/0_stateless/01372_remote_table_function_empty_table.sql\n@@ -0,0 +1,1 @@\n+SELECT * FROM remote('127..2', 'a.'); -- { serverError 36 }\n",
  "problem_statement": "Logical error: Both table name and UUID are empty.\n```\r\nSELECT *\r\nFROM remoteSecure('\\0', 't#l>U.')\r\n\r\n\r\nReceived exception from server (version 20.6.1):\r\nCode: 49. DB::Exception: Received from localhost:9000. DB::Exception: Both table name and UUID are empty.\r\n```\n",
  "hints_text": "https://github.com/ClickHouse/ClickHouse/pull/9516\n`SELECT * FROM remote('127..2', 'a.');`",
  "created_at": "2020-07-05T23:15:13Z",
  "modified_files": [
    "src/TableFunctions/TableFunctionRemote.cpp"
  ],
  "modified_test_files": [
    "b/tests/queries/0_stateless/01372_remote_table_function_empty_table.sql"
  ]
}