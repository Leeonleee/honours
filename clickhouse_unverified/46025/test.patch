diff --git a/src/Disks/tests/gtest_azure_sdk.cpp b/src/Disks/tests/gtest_azure_sdk.cpp
new file mode 100644
index 000000000000..56b49ae05ae5
--- /dev/null
+++ b/src/Disks/tests/gtest_azure_sdk.cpp
@@ -0,0 +1,41 @@
+#include <string>
+#include <vector>
+#include <Common/logger_useful.h>
+
+#include "config.h"
+
+#if USE_AZURE_BLOB_STORAGE
+
+#include <azure/storage/blobs.hpp>
+#include <azure/storage/common/internal/xml_wrapper.hpp>
+#include <azure/storage/blobs/blob_container_client.hpp>
+#include <azure/storage/blobs/blob_options.hpp>
+
+#include <gtest/gtest.h>
+
+TEST(AzureXMLWrapper, TestLeak)
+{
+    std::string str = "<hello>world</hello>";
+
+    Azure::Storage::_internal::XmlReader reader(str.c_str(), str.length());
+    Azure::Storage::_internal::XmlReader reader2(std::move(reader));
+    Azure::Storage::_internal::XmlReader reader3 = std::move(reader2);
+    reader3.Read();
+}
+
+TEST(AzureBlobContainerClient, CurlMemoryLeak)
+{
+    using Azure::Storage::Blobs::BlobContainerClient;
+    using Azure::Storage::Blobs::BlobClientOptions;
+
+    static constexpr auto unavailable_url = "http://unavailable:19999/bucket";
+    static constexpr auto container = "container";
+
+    BlobClientOptions options;
+    options.Retry.MaxRetries = 0;
+
+    auto client = std::make_unique<BlobContainerClient>(BlobContainerClient::CreateFromConnectionString(unavailable_url, container, options));
+    EXPECT_THROW({ client->ListBlobs(); }, Azure::Core::Http::TransportException);
+}
+
+#endif
diff --git a/src/Disks/tests/gtest_azure_xml_reader.cpp b/src/Disks/tests/gtest_azure_xml_reader.cpp
deleted file mode 100644
index 8cb352ad2f72..000000000000
--- a/src/Disks/tests/gtest_azure_xml_reader.cpp
+++ /dev/null
@@ -1,25 +0,0 @@
-#include <string>
-#include <vector>
-#include <Common/logger_useful.h>
-
-#include "config.h"
-
-#if USE_AZURE_BLOB_STORAGE
-
-#include <azure/storage/blobs.hpp>
-#include <azure/storage/common/internal/xml_wrapper.hpp>
-
-#include <gtest/gtest.h>
-
-
-TEST(AzureXMLWrapper, TestLeak)
-{
-    std::string str = "<hello>world</hello>";
-
-    Azure::Storage::_internal::XmlReader reader(str.c_str(), str.length());
-    Azure::Storage::_internal::XmlReader reader2(std::move(reader));
-    Azure::Storage::_internal::XmlReader reader3 = std::move(reader2);
-    reader3.Read();
-}
-
-#endif
