diff --git a/tests/queries/0_stateless/00273_quantiles.reference b/tests/queries/0_stateless/00273_quantiles.reference
index aefb00846486..ac9db31bae42 100644
--- a/tests/queries/0_stateless/00273_quantiles.reference
+++ b/tests/queries/0_stateless/00273_quantiles.reference
@@ -6,17 +6,17 @@
 [0,1,10,50,100,200,300,400,500,600,700,800,900,950,990,999,1000]
 [0,1,10,50,99.6,199.7,299.8,399.9,500,600.1,700.2,800.3,900.4,950,990,999,1000]
 [0,1,10,50,100,200,300,400,500,600,700,800,900,950,990,999,1000]
-1	333334	[699144.2,835663,967429.2]	[699999,833333,966666]
-2	266667	[426549.5,536255.5,638957.6]	[426665,533332,639999]
+1	333334	[699140.3,835642,967430.8]	[699999,833333,966666]
+2	266667	[426546,536239,638933.4]	[426665,533332,639999]
 3	114285	[296938,342324,388778]	[297142,342856,388570]
-4	63492	[228370.2,254019.5,279351.4]	[228571,253968,279364]
-5	40404	[185603.4,202009,218107]	[185858,202020,218181]
-6	27972	[156598.7,167866,179118.3]	[156643,167832,179020]
+4	63492	[228369.80000000002,254011,279351.6]	[228571,253968,279364]
+5	40404	[185602.3,202005,218108.5]	[185858,202020,218181]
+6	27972	[156598.6,167864,179118.40000000002]	[156643,167832,179020]
 7	20513	[135400.8,143550,151792.6]	[135384,143589,151794]
 8	15686	[119239.20000000001,125463,131772.40000000002]	[119215,125490,131764]
-9	12384	[106510.20000000001,111539,116415.7]	[106501,111455,116408]
+9	12384	[106509.79999999999,111538,116415.8]	[106501,111455,116408]
 10	10025	[96223.2,100346,104288.7]	[96240,100250,104260]
-11	8282	[87732.8,91036,94410.20000000001]	[87784,91097,94409]
+11	8282	[87732.70000000001,91035,94408.6]	[87784,91097,94409]
 12	6957	[80694.6,83477,86259.4]	[80694,83477,86260]
 13	5925	[74666.40000000001,77036,79405.6]	[74666,77036,79406]
 14	5109	[69475.8,71519,73562.2]	[69475,71519,73563]
diff --git a/tests/queries/0_stateless/01533_quantile_deterministic_assert.reference b/tests/queries/0_stateless/01533_quantile_deterministic_assert.reference
index 231c72269ca1..1f6132cdec2a 100644
--- a/tests/queries/0_stateless/01533_quantile_deterministic_assert.reference
+++ b/tests/queries/0_stateless/01533_quantile_deterministic_assert.reference
@@ -1,1 +1,1 @@
-3998
+3997.5
diff --git a/tests/queries/0_stateless/01913_quantile_deterministic.reference b/tests/queries/0_stateless/01913_quantile_deterministic.reference
new file mode 100644
index 000000000000..a39d3d91e8af
--- /dev/null
+++ b/tests/queries/0_stateless/01913_quantile_deterministic.reference
@@ -0,0 +1,20 @@
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
+492708
diff --git a/tests/queries/0_stateless/01913_quantile_deterministic.sh b/tests/queries/0_stateless/01913_quantile_deterministic.sh
new file mode 100755
index 000000000000..5a2c72796785
--- /dev/null
+++ b/tests/queries/0_stateless/01913_quantile_deterministic.sh
@@ -0,0 +1,18 @@
+#!/usr/bin/env bash
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CURDIR"/../shell_config.sh
+
+${CLICKHOUSE_CLIENT} --query "DROP TABLE IF EXISTS d"
+${CLICKHOUSE_CLIENT} --query "CREATE TABLE d (oid UInt64) ENGINE = MergeTree ORDER BY oid"
+${CLICKHOUSE_CLIENT} --min_insert_block_size_rows 0 --min_insert_block_size_bytes 0 --max_block_size 8192 --query "insert into d select * from numbers(1000000)"
+
+# In previous ClickHouse versions there was a mistake that makes quantileDeterministic functions not really deterministic (in edge cases).
+
+for _ in {1..20};
+do
+    ${CLICKHOUSE_CLIENT} --query "SELECT medianDeterministic(oid, oid) FROM d"
+done
+
+${CLICKHOUSE_CLIENT} --query "DROP TABLE d"
