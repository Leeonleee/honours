diff --git a/tests/queries/0_stateless/02164_materialized_view_support_virtual_column.reference b/tests/queries/0_stateless/02164_materialized_view_support_virtual_column.reference
new file mode 100644
index 000000000000..00750edc07d6
--- /dev/null
+++ b/tests/queries/0_stateless/02164_materialized_view_support_virtual_column.reference
@@ -0,0 +1,1 @@
+3
diff --git a/tests/queries/0_stateless/02164_materialized_view_support_virtual_column.sql b/tests/queries/0_stateless/02164_materialized_view_support_virtual_column.sql
new file mode 100644
index 000000000000..ad48a7507da9
--- /dev/null
+++ b/tests/queries/0_stateless/02164_materialized_view_support_virtual_column.sql
@@ -0,0 +1,9 @@
+DROP TABLE IF EXISTS test_tb;
+CREATE TABLE test_tb (a UInt64, s String) ENGINE = MergeTree() ORDER BY a;
+
+DROP VIEW IF EXISTS test_view_tb;
+CREATE MATERIALIZED VIEW test_view_tb ENGINE = MergeTree() ORDER BY a AS SELECT * FROM test_tb;
+
+INSERT INTO test_tb VALUES (1, '1'), (2, '2'), (3, '3');
+
+SELECT count(_part) FROM test_view_tb;
