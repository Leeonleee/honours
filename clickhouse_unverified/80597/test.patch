diff --git a/tests/queries/0_stateless/03518_key_condition_binary_search.reference b/tests/queries/0_stateless/03518_key_condition_binary_search.reference
new file mode 100644
index 000000000000..f00580c40607
--- /dev/null
+++ b/tests/queries/0_stateless/03518_key_condition_binary_search.reference
@@ -0,0 +1,2 @@
+3
+1
diff --git a/tests/queries/0_stateless/03518_key_condition_binary_search.sh b/tests/queries/0_stateless/03518_key_condition_binary_search.sh
new file mode 100755
index 000000000000..e7ab9b6ef0b7
--- /dev/null
+++ b/tests/queries/0_stateless/03518_key_condition_binary_search.sh
@@ -0,0 +1,31 @@
+#!/usr/bin/env bash
+
+CUR_DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CUR_DIR"/../shell_config.sh
+
+$CLICKHOUSE_CLIENT -n -q "
+DROP TABLE IF EXISTS t;
+CREATE TABLE t
+(
+    c Enum8('Zero' = 0, 'One' = 1, 'Two' = 2, 'Three' = 3, 'Four' = 4, 'Five' = 5)
+)
+ENGINE = MergeTree
+ORDER BY c;
+INSERT INTO t values('One');
+SELECT * FROM t WHERE c = 1 settings send_logs_level='trace';
+SELECT * FROM t WHERE c = 'One' settings send_logs_level='trace';
+SELECT * FROM t WHERE c = 1 and 1 = 1 settings send_logs_level='trace';
+" 2>&1 | grep -c "binary search"
+
+$CLICKHOUSE_CLIENT -n -q "
+DROP TABLE IF EXISTS t1;
+CREATE TABLE t1
+(
+    timestamp DateTime64(3, 'Asia/Shanghai')
+)
+ENGINE = MergeTree
+ORDER BY timestamp;
+INSERT INTO t1 VALUES ('2025-05-21 00:00:00');
+SELECT * FROM t1 WHERE toDayOfMonth(timestamp) = 1 settings send_logs_level='trace';
+" 2>&1 | grep -c "generic exclusion search"
\ No newline at end of file
