diff --git a/tests/queries/0_stateless/01414_push_predicate_when_contains_with_clause.reference b/tests/queries/0_stateless/01414_push_predicate_when_contains_with_clause.reference
new file mode 100644
index 000000000000..a2ee0336191b
--- /dev/null
+++ b/tests/queries/0_stateless/01414_push_predicate_when_contains_with_clause.reference
@@ -0,0 +1,15 @@
+999	1998
+999	1998
+SELECT 
+    number,
+    square_number
+FROM 
+(
+    WITH number * 2 AS square_number
+    SELECT 
+        number,
+        square_number
+    FROM numbers_indexed
+    WHERE number = 999
+) AS squares
+WHERE number = 999
diff --git a/tests/queries/0_stateless/01414_push_predicate_when_contains_with_clause.sql b/tests/queries/0_stateless/01414_push_predicate_when_contains_with_clause.sql
new file mode 100644
index 000000000000..cf3307205e0c
--- /dev/null
+++ b/tests/queries/0_stateless/01414_push_predicate_when_contains_with_clause.sql
@@ -0,0 +1,17 @@
+DROP TABLE IF EXISTS numbers_indexed;
+DROP TABLE IF EXISTS squares;
+
+CREATE TABLE numbers_indexed Engine=MergeTree ORDER BY number PARTITION BY bitShiftRight(number,8) SETTINGS index_granularity=8 AS SELECT * FROM numbers(16384);
+
+CREATE VIEW squares AS WITH number*2 AS square_number SELECT number, square_number FROM numbers_indexed;
+
+SET max_rows_to_read=8, read_overflow_mode='throw';
+
+WITH number * 2 AS square_number SELECT number, square_number FROM numbers_indexed WHERE number = 999;
+
+SELECT * FROM squares WHERE number = 999;
+
+EXPLAIN SYNTAX SELECT number, square_number FROM ( WITH number * 2 AS square_number SELECT number, square_number FROM numbers_indexed) AS squares WHERE number = 999;
+
+DROP TABLE IF EXISTS squares;
+DROP TABLE IF EXISTS numbers_indexed;
