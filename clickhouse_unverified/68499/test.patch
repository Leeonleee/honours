diff --git a/tests/queries/0_stateless/03227_test_sample_n.reference b/tests/queries/0_stateless/03227_test_sample_n.reference
new file mode 100644
index 000000000000..bc051d8d8165
--- /dev/null
+++ b/tests/queries/0_stateless/03227_test_sample_n.reference
@@ -0,0 +1,2 @@
+50000
+1
diff --git a/tests/queries/0_stateless/03227_test_sample_n.sql b/tests/queries/0_stateless/03227_test_sample_n.sql
new file mode 100644
index 000000000000..d38bdd0a3eec
--- /dev/null
+++ b/tests/queries/0_stateless/03227_test_sample_n.sql
@@ -0,0 +1,20 @@
+CREATE TABLE IF NOT EXISTS table_name
+(
+id UInt64
+)
+ENGINE = MergeTree()
+ORDER BY cityHash64(id)
+SAMPLE BY cityHash64(id);
+
+INSERT INTO table_name SELECT rand() from system.numbers limit 10000;
+INSERT INTO table_name SELECT rand() from system.numbers limit 10000;
+INSERT INTO table_name SELECT rand() from system.numbers limit 10000;
+INSERT INTO table_name SELECT rand() from system.numbers limit 10000;
+INSERT INTO table_name SELECT rand() from system.numbers limit 10000;
+
+select count() from table_name;
+SELECT count() < 50 * 5 FROM (
+	SELECT * FROM table_name SAMPLE 50
+);
+
+DROP TABLE table_name;
