You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
Projection makes things worse when aggregation matches but filter condition can't be applied to primary key
```
CREATE TABLE t0
(
    `c1` Int64,
    `c2` Int64,
    `c3` Int64,
    `c4` Int64,
    PROJECTION p1
    (
        SELECT
            c1,
            c2,
            sum(c4)
        GROUP BY
            c2,
            c1
    )
)
ENGINE = MergeTree
ORDER BY (c1, c2);

INSERT INTO t0 SELECT
    number,
    rand(1),
    rand(2),
    rand(3)
FROM numbers_mt(10000000);
```

```
SELECT
    c1,
    sum(c4)
FROM t0
WHERE c1 = 100
GROUP BY c1
SETTINGS allow_experimental_projection_optimization = 0

Query id: b7e8c17b-069a-4213-a455-2e452e7e699a

┌──c1─┬────sum(c4)─┐
│ 100 │ 3027309634 │
└─────┴────────────┘

1 row in set. Elapsed: 0.004 sec. Processed 8.19 thousand rows, 66.34 KB (2.28 million rows/s., 18.47 MB/s.)

ip-172-31-38-198.us-east-2.compute.internal :) SELECT c1, sum(c4) FROM t0 WHERE c1=100 GROUP BY c1 SETTINGS allow_experimental_projection_optimization=1

SELECT
    c1,
    sum(c4)
FROM t0
WHERE c1 = 100
GROUP BY c1
SETTINGS allow_experimental_projection_optimization = 1

Query id: f0a793c5-5fed-4b6c-91ef-9b7e336948e1

┌──c1─┬────sum(c4)─┐
│ 100 │ 3027309634 │
└─────┴────────────┘

1 row in set. Elapsed: 0.040 sec. Processed 10.00 million rows, 302.36 MB (251.43 million rows/s., 7.60 GB/s.)
```

```
EXPLAIN
SELECT
    c1,
    sum(c4)
FROM t0
WHERE c1 = 100
GROUP BY c1

Query id: 3e90cd34-79b8-4a29-a893-49d85811e0ab

┌─explain─────────────────────────────────────┐
│ Expression ((Projection + Before ORDER BY)) │
│   Aggregating                               │
│     Filter                                  │
│       ReadFromMergeTree (p1)                │
└─────────────────────────────────────────────┘

4 rows in set. Elapsed: 0.004 sec.
```
p1 is used and we read all the data from projection instead of couple of granules and aggregate them.
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
