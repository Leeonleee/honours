diff --git a/dbms/tests/config/macros.xml b/dbms/tests/config/macros.xml
new file mode 100644
index 000000000000..1f86f5f9efdd
--- /dev/null
+++ b/dbms/tests/config/macros.xml
@@ -0,0 +1,5 @@
+<yandex>
+    <macros>
+        <test>Hello, world!</test>
+    </macros>
+</yandex>
diff --git a/dbms/tests/queries/0_stateless/01016_macros.reference b/dbms/tests/queries/0_stateless/01016_macros.reference
new file mode 100644
index 000000000000..6ca8ba9557b3
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/01016_macros.reference
@@ -0,0 +1,2 @@
+test	Hello, world!
+Hello, world!
diff --git a/dbms/tests/queries/0_stateless/01016_macros.sql b/dbms/tests/queries/0_stateless/01016_macros.sql
new file mode 100644
index 000000000000..be00b7094cb5
--- /dev/null
+++ b/dbms/tests/queries/0_stateless/01016_macros.sql
@@ -0,0 +1,2 @@
+SELECT * FROM system.macros WHERE macro = 'test';
+SELECT getMacro('test');
