diff --git a/tests/queries/0_stateless/02751_protobuf_ipv6.reference b/tests/queries/0_stateless/02751_protobuf_ipv6.reference
new file mode 100644
index 000000000000..0318b49c77e1
--- /dev/null
+++ b/tests/queries/0_stateless/02751_protobuf_ipv6.reference
@@ -0,0 +1,2 @@
+::ffff:1.2.3.4
+::ffff:1.2.3.4
diff --git a/tests/queries/0_stateless/02751_protobuf_ipv6.sh b/tests/queries/0_stateless/02751_protobuf_ipv6.sh
new file mode 100755
index 000000000000..f93963aa6c67
--- /dev/null
+++ b/tests/queries/0_stateless/02751_protobuf_ipv6.sh
@@ -0,0 +1,14 @@
+#!/usr/bin/env bash
+# Tags: no-fasttest
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CURDIR"/../shell_config.sh
+
+SCHEMADIR=$CURDIR/format_schemas
+
+
+echo -ne '\x12\x1a\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\x01\x02\x03\x04' | $CLICKHOUSE_LOCAL --input-format Protobuf --format_schema="$SCHEMADIR/02751_protobuf_ipv6:Message" --structure="ipv6_bytes IPv6" -q "select * from table"
+
+$CLICKHOUSE_LOCAL -q "select '::ffff:1.2.3.4'::IPv6 as ipv6_bytes format Protobuf settings format_schema = '$SCHEMADIR/02751_protobuf_ipv6:Message'" | $CLICKHOUSE_LOCAL --input-format Protobuf --format_schema="$SCHEMADIR/02751_protobuf_ipv6:Message" --structure="ipv6_bytes IPv6"  -q "select * from table"
+
diff --git a/tests/queries/0_stateless/format_schemas/02751_protobuf_ipv6.proto b/tests/queries/0_stateless/format_schemas/02751_protobuf_ipv6.proto
new file mode 100644
index 000000000000..8e6f115f2d79
--- /dev/null
+++ b/tests/queries/0_stateless/format_schemas/02751_protobuf_ipv6.proto
@@ -0,0 +1,6 @@
+syntax = "proto3";
+
+message Message
+{
+    bytes ipv6_bytes = 3;
+}
