diff --git a/tests/queries/0_stateless/03463_local_sql_udf_persistence.reference b/tests/queries/0_stateless/03463_local_sql_udf_persistence.reference
new file mode 100644
index 000000000000..4792e70f3330
--- /dev/null
+++ b/tests/queries/0_stateless/03463_local_sql_udf_persistence.reference
@@ -0,0 +1,2 @@
+2
+3
diff --git a/tests/queries/0_stateless/03463_local_sql_udf_persistence.sh b/tests/queries/0_stateless/03463_local_sql_udf_persistence.sh
new file mode 100755
index 000000000000..5f4172b28654
--- /dev/null
+++ b/tests/queries/0_stateless/03463_local_sql_udf_persistence.sh
@@ -0,0 +1,8 @@
+#!/usr/bin/env bash
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CURDIR"/../shell_config.sh
+
+$CLICKHOUSE_LOCAL --path "${CLICKHOUSE_TMP}" "CREATE FUNCTION f AS x -> x + 1; SELECT f(1);"
+$CLICKHOUSE_LOCAL --path "${CLICKHOUSE_TMP}" "SELECT f(2); DROP FUNCTION f;"
