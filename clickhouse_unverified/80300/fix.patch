diff --git a/programs/local/LocalServer.cpp b/programs/local/LocalServer.cpp
index 4a3093ff69f2..f30e47c4ea4e 100644
--- a/programs/local/LocalServer.cpp
+++ b/programs/local/LocalServer.cpp
@@ -948,14 +948,14 @@ void LocalServer::processConfig()
                 DatabaseCatalog::instance().startupBackgroundTasks();
             }
 
-            /// For ClickHouse local if path is not set the loader will be disabled.
-            global_context->getUserDefinedSQLObjectsStorage().loadObjects();
-
             LOG_DEBUG(log, "Loaded metadata.");
         }
 
         if (!attached_system_database)
             attachSystemTablesServer(global_context, *createMemoryDatabaseIfNotExists(global_context, DatabaseCatalog::SYSTEM_DATABASE), false);
+
+        if (fs::exists(fs::path(path) / "user_defined"))
+            global_context->getUserDefinedSQLObjectsStorage().loadObjects();
     }
     else if (!getClientConfiguration().has("no-system-tables"))
     {
