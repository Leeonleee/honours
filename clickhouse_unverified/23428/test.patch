diff --git a/tests/queries/0_stateless/01822_union_and_constans_error.reference b/tests/queries/0_stateless/01822_union_and_constans_error.reference
new file mode 100644
index 000000000000..d00491fd7e5b
--- /dev/null
+++ b/tests/queries/0_stateless/01822_union_and_constans_error.reference
@@ -0,0 +1,1 @@
+1
diff --git a/tests/queries/0_stateless/01822_union_and_constans_error.sql b/tests/queries/0_stateless/01822_union_and_constans_error.sql
new file mode 100644
index 000000000000..38b7df700cd9
--- /dev/null
+++ b/tests/queries/0_stateless/01822_union_and_constans_error.sql
@@ -0,0 +1,20 @@
+drop table if exists t0;
+CREATE TABLE t0 (c0 String) ENGINE = Log();
+
+SELECT isNull(t0.c0) OR COUNT('
?pVa')
+FROM t0
+GROUP BY t0.c0
+HAVING isNull(t0.c0)
+UNION ALL
+SELECT isNull(t0.c0) OR COUNT('
?pVa')
+FROM t0
+GROUP BY t0.c0
+HAVING NOT isNull(t0.c0)
+UNION ALL
+SELECT isNull(t0.c0) OR COUNT('
?pVa')
+FROM t0
+GROUP BY t0.c0
+HAVING isNull(isNull(t0.c0))
+SETTINGS aggregate_functions_null_for_empty = 1, enable_optimize_predicate_expression = 0;
+
+drop table if exists t0;
