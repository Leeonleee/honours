diff --git a/tests/queries/0_stateless/02377_quota_key.reference b/tests/queries/0_stateless/02377_quota_key.reference
new file mode 100644
index 000000000000..d00491fd7e5b
--- /dev/null
+++ b/tests/queries/0_stateless/02377_quota_key.reference
@@ -0,0 +1,1 @@
+1
diff --git a/tests/queries/0_stateless/02377_quota_key.sh b/tests/queries/0_stateless/02377_quota_key.sh
new file mode 100755
index 000000000000..8aa6797dc2c4
--- /dev/null
+++ b/tests/queries/0_stateless/02377_quota_key.sh
@@ -0,0 +1,16 @@
+#!/usr/bin/env bash
+# Tags: no-parallel
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CURDIR"/../shell_config.sh
+
+${CLICKHOUSE_CLIENT} -q "DROP USER IF EXISTS u_02377"
+${CLICKHOUSE_CLIENT} -q "drop quota if exists q_02377"
+${CLICKHOUSE_CLIENT} -q "CREATE USER u_02377 IDENTIFIED WITH plaintext_password BY 'password';"
+${CLICKHOUSE_CLIENT} -q "CREATE QUOTA q_02377 KEYED BY client_key FOR INTERVAL 1 month MAX queries = 100 TO u_02377;"
+
+${CLICKHOUSE_CLIENT} --user=u_02377 --password=password --quota_key=q_02377 --query="select 1"
+
+${CLICKHOUSE_CLIENT} -q "DROP USER IF EXISTS u_02377"
+${CLICKHOUSE_CLIENT} -q "drop quota if exists q_02377"
diff --git a/tests/queries/0_stateless/02377_quota_key_http.reference b/tests/queries/0_stateless/02377_quota_key_http.reference
new file mode 100644
index 000000000000..d00491fd7e5b
--- /dev/null
+++ b/tests/queries/0_stateless/02377_quota_key_http.reference
@@ -0,0 +1,1 @@
+1
diff --git a/tests/queries/0_stateless/02377_quota_key_http.sh b/tests/queries/0_stateless/02377_quota_key_http.sh
new file mode 100755
index 000000000000..45e09e1fead2
--- /dev/null
+++ b/tests/queries/0_stateless/02377_quota_key_http.sh
@@ -0,0 +1,16 @@
+#!/usr/bin/env bash
+# Tags: no-parallel
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+# shellcheck source=../shell_config.sh
+. "$CURDIR"/../shell_config.sh
+
+curl -sS "${CLICKHOUSE_URL}" --data "DROP USER IF EXISTS u_02377"
+curl -sS "${CLICKHOUSE_URL}" --data "drop quota if exists q_02377"
+curl -sS "${CLICKHOUSE_URL}" --data "CREATE USER u_02377 IDENTIFIED WITH plaintext_password BY 'password'"
+curl -sS "${CLICKHOUSE_URL}" --data "CREATE QUOTA q_02377 KEYED BY client_key FOR INTERVAL 1 month MAX queries = 100 TO u_02377"
+
+curl -sS -G "${CLICKHOUSE_URL}&user=u_02377&password=password&quota_key=q_02377&query=SELECT%201"
+
+curl -sS "${CLICKHOUSE_URL}" --data "DROP USER IF EXISTS u_02377"
+curl -sS "${CLICKHOUSE_URL}" --data "drop quota if exists q_02377"
