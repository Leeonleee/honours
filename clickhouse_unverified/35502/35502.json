{
  "repo": "ClickHouse/ClickHouse",
  "pull_number": 35502,
  "instance_id": "ClickHouse__ClickHouse-35502",
  "issue_numbers": [
    "35497",
    "35496"
  ],
  "base_commit": "0ab9a9c0f6517f3c7ca9dde3ac4033f2ad7f5b7a",
  "patch": "diff --git a/src/Columns/MaskOperations.cpp b/src/Columns/MaskOperations.cpp\nindex 1641bdf5a4cb..64d90ae82cbe 100644\n--- a/src/Columns/MaskOperations.cpp\n+++ b/src/Columns/MaskOperations.cpp\n@@ -85,7 +85,9 @@ size_t extractMaskNumericImpl(\n {\n     size_t ones_count = 0;\n     size_t data_index = 0;\n-    for (size_t i = 0; i != mask.size(); ++i)\n+    size_t mask_size = mask.size();\n+\n+    for (size_t i = 0; i != mask_size; ++i)\n     {\n         // Change mask only where value is 1.\n         if (!mask[i])\n",
  "test_patch": "diff --git a/tests/queries/0_stateless/02241_short_circuit_short_column.reference b/tests/queries/0_stateless/02241_short_circuit_short_column.reference\nnew file mode 100644\nindex 000000000000..c25c8fb59d0e\n--- /dev/null\n+++ b/tests/queries/0_stateless/02241_short_circuit_short_column.reference\n@@ -0,0 +1,20 @@\n+1\t\\N\n+1\t\\N\n+1\t\\N\n+1\t\\N\n+1\t\\N\n+1\t\\N\n+1\t\\N\n+1\t\\N\n+1\t\\N\n+1\t\\N\n+0\n+0\n+0\n+0\n+0\n+0\n+0\n+0\n+0\n+0\ndiff --git a/tests/queries/0_stateless/02241_short_circuit_short_column.sql b/tests/queries/0_stateless/02241_short_circuit_short_column.sql\nnew file mode 100644\nindex 000000000000..311307fe5057\n--- /dev/null\n+++ b/tests/queries/0_stateless/02241_short_circuit_short_column.sql\n@@ -0,0 +1,2 @@\n+SELECT 65536 AND 2147483647, throwIf((((1048575 AND throwIf((0. AND NULL) AND (((65536 AND 257) AND (1.1754943508222875e-38 AND 1024) AND -2147483649) AND NULL) AND (10 AND NULL)) AND (((65536 AND 257) AND (1.1754943508222875e-38 AND 1024) AND -1) AND NULL) AND 65535) AND -1) AND NULL) AND (NULL AND NULL), NULL < number) FROM numbers(10);\n+SELECT NULL AND throwIf((0 AND NULL) AND 2147483646 AND NULL AND NULL) AND -2147483649 AND (NULL AND NULL) AND NULL FROM system.numbers LIMIT 10;\n",
  "problem_statement": "Assertion in PODArray\nhttps://github.com/ClickHouse/ClickHouse/blob/e7772ed434be81ab10b8eafab25f912a55170a5c/src/Common/PODArray.h#L384\r\n\r\nhttps://s3.amazonaws.com/clickhouse-test-reports/24258/9a505476a5c53dfbcc308139679fad5d47904b34/fuzzer_astfuzzerdebug,actions//report.html\r\n\r\n```\r\n2022.03.22 00:41:24.991595 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Debug> executeQuery: (from [::ffff:127.0.0.1]:59536) SELECT NULL AND throwIf((0 AND NULL) AND 2147483646 AND NULL AND NULL) AND -2147483649 AND (NULL AND NULL) AND NULL, 100 AND NULL, 65536 FROM (SELECT n FROM mt1 UNION ALL SELECT * FROM mt2)\r\n2022.03.22 00:41:24.993596 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt1\r\n2022.03.22 00:41:24.994944 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt2\r\n2022.03.22 00:41:24.996835 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt1\r\n2022.03.22 00:41:24.998145 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt2\r\n2022.03.22 00:41:25.002895 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt1\r\n2022.03.22 00:41:25.004411 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt2\r\n2022.03.22 00:41:25.006780 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt1\r\n2022.03.22 00:41:25.007665 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt1\r\n2022.03.22 00:41:25.009901 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt2\r\n2022.03.22 00:41:25.010754 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> ContextAccess (default): Access granted: SELECT(n) ON default.mt2\r\n2022.03.22 00:41:25.011589 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> InterpreterSelectQuery: FetchColumns -> Complete\r\n2022.03.22 00:41:25.011973 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> InterpreterSelectQuery: FetchColumns -> Complete\r\n2022.03.22 00:41:25.012278 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> InterpreterSelectQuery: FetchColumns -> Complete\r\n2022.03.22 00:41:25.014141 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Debug> default.mt1 (f8b70154-67c5-43a3-a6f8-336eaf275392) (SelectExecutor): Key condition: unknown\r\n2022.03.22 00:41:25.014998 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Debug> default.mt1 (f8b70154-67c5-43a3-a6f8-336eaf275392) (SelectExecutor): Selected 3/3 parts by partition key, 3 parts by primary key, 3/3 marks by primary key, 3 marks to read from 3 ranges\r\n2022.03.22 00:41:25.015612 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Debug> default.mt1 (f8b70154-67c5-43a3-a6f8-336eaf275392) (SelectExecutor): Reading approx. 7 rows with 3 streams\r\n2022.03.22 00:41:25.017050 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Debug> default.mt2 (0d470b97-4ee2-4490-bec5-921e2fe50f55) (SelectExecutor): Key condition: unknown\r\n2022.03.22 00:41:25.017906 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Debug> default.mt2 (0d470b97-4ee2-4490-bec5-921e2fe50f55) (SelectExecutor): Selected 3/3 parts by partition key, 3 parts by primary key, 3/3 marks by primary key, 3 marks to read from 3 ranges\r\n2022.03.22 00:41:25.018535 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Debug> default.mt2 (0d470b97-4ee2-4490-bec5-921e2fe50f55) (SelectExecutor): Reading approx. 7 rows with 3 streams\r\n2022.03.22 00:42:30.354059 [ 238 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Information> TCPHandler: Query was cancelled.\r\n2022.03.22 00:42:30.369249 [ 490 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> PipelineExecutor: Thread finished. Total time: 65.343080468 sec. Execution time: 0.000818622 sec. Processing time: 0.000351645 sec. Wait time: 65.341910201 sec.\r\n2022.03.22 00:42:30.369263 [ 485 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> PipelineExecutor: Thread finished. Total time: 65.343037692 sec. Execution time: 0.001147488 sec. Processing time: 0.000359656 sec. Wait time: 65.341530548 sec.\r\n2022.03.22 00:42:30.369263 [ 487 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> PipelineExecutor: Thread finished. Total time: 65.343035357 sec. Execution time: 0.001152237 sec. Processing time: 0.000345994 sec. Wait time: 65.341537126 sec.\r\n2022.03.22 00:42:30.369261 [ 468 ] {21bf3d59-81dc-404d-a9ff-8c2d25f0a97f} <Trace> PipelineExecutor: Thread finished. Total time: 65.343078142 sec. Execution time: 0.000803882 sec. Processing time: 0.000235471 sec. Wait time: 65.342038789 sec.\r\n\r\nclickhouse-server: ../src/Common/PODArray.h:390: const T &DB::PODArray<char8_t, 4096, Allocator<false, false>, 15, 16>::operator[](ssize_t) const [T = char8_t, initial_bytes = 4096, TAllocator = Allocator<false, false>, pad_right_ = 15, pad_left_ = 16]: Assertion `(n >= (static_cast<ssize_t>(pad_left_) ? -1 : 0)) && (n <= static_cast<ssize_t>(this->size()))' failed.\r\nclickhouse-server: ../src/Common/PODArray.h:390: const T &DB::PODArray<char8_t, 4096, Allocator<false, false>, 15, 16>::operator[](ssize_t) const [T = char8_t, initial_bytes = 4096, TAllocator = Allocator<false, false>, pad_right_ = 15, pad_left_ = 16]: Assertion `(n >= (static_cast<ssize_t>(pad_left_) ? -1 : 0)) && (n <= static_cast<ssize_t>(this->size()))' failed.\r\n\r\n2022.03.22 00:42:30.370272 [ 495 ] {} <Fatal> BaseDaemon: ########################################\r\n2022.03.22 00:42:30.370129 [ 494 ] {} <Fatal> BaseDaemon: ########################################\r\n2022.03.22 00:42:30.370747 [ 495 ] {} <Fatal> BaseDaemon: (version 22.4.1.1, build id: 659D69B74B66232A) (from thread 489) (query_id: 21bf3d59-81dc-404d-a9ff-8c2d25f0a97f) (query: SELECT NULL AND throwIf((0 AND NULL) AND 2147483646 AND NULL AND NULL) AND -2147483649 AND (NULL AND NULL) AND NULL, 100 AND NULL, 65536 FROM (SELECT n FROM mt1 UNION ALL SELECT * FROM mt2)) Received signal Aborted (6)\r\n2022.03.22 00:42:30.370899 [ 494 ] {} <Fatal> BaseDaemon: (version 22.4.1.1, build id: 659D69B74B66232A) (from thread 486) (query_id: 21bf3d59-81dc-404d-a9ff-8c2d25f0a97f) (query: SELECT NULL AND throwIf((0 AND NULL) AND 2147483646 AND NULL AND NULL) AND -2147483649 AND (NULL AND NULL) AND NULL, 100 AND NULL, 65536 FROM (SELECT n FROM mt1 UNION ALL SELECT * FROM mt2)) Received signal Aborted (6)\r\n2022.03.22 00:42:30.371099 [ 495 ] {} <Fatal> BaseDaemon: \r\n2022.03.22 00:42:30.371177 [ 494 ] {} <Fatal> BaseDaemon: \r\n2022.03.22 00:42:30.371416 [ 495 ] {} <Fatal> BaseDaemon: Stack trace: 0x7f4030e5e03b 0x7f4030e3d859 0x7f4030e3d729 0x7f4030e4f006 0x144bb286 0x228f609d 0x228f5561 0x228f4ac2 0x228f4a82 0x228ef652 0x182c0816 0x182bf2f0 0x17585a4d 0x20e7fd8a 0x20e80895 0x20e81783 0x218fd2a6 0x218fc75c 0x23856924 0x1d883d22 0x2347b71e 0x234b8ab9 0x234b89b5 0x2349c6a1 0x2349c977 0x2349e122 0x2349e09d 0x2349e041 0x2349df52 0x2349de1b 0x2349dcdd 0x2349dc9d 0x2349dc75 0x2349dc40 0x14473f26 0x14470235 0x1451b3ef 0x14521f84 0x14521efd 0x14521e25 0x14521762\r\n2022.03.22 00:42:30.371475 [ 494 ] {} <Fatal> BaseDaemon: Stack trace: 0x7f4030e5e03b 0x7f4030e3d859 0x7f4030e3d729 0x7f4030e4f006 0x144bb286 0x228f609d 0x228f5561 0x228f4ac2 0x228f4a82 0x228ef652 0x182c0816 0x182bf2f0 0x17585a4d 0x20e7fd8a 0x20e80895 0x20e81783 0x218fd2a6 0x218fc75c 0x23856924 0x1d883d22 0x2347b71e 0x234b8ab9 0x234b89b5 0x2349c6a1 0x2349c977 0x2349e122 0x2349e09d 0x2349e041 0x2349df52 0x2349de1b 0x2349dcdd 0x2349dc9d 0x2349dc75 0x2349dc40 0x14473f26 0x14470235 0x1451b3ef 0x14521f84 0x14521efd 0x14521e25 0x14521762\r\n2022.03.22 00:42:30.371801 [ 495 ] {} <Fatal> BaseDaemon: 4. gsignal @ 0x7f4030e5e03b in ?\r\n2022.03.22 00:42:30.371803 [ 494 ] {} <Fatal> BaseDaemon: 4. gsignal @ 0x7f4030e5e03b in ?\r\n2022.03.22 00:42:30.372068 [ 494 ] {} <Fatal> BaseDaemon: 5. abort @ 0x7f4030e3d859 in ?\r\n2022.03.22 00:42:30.372215 [ 495 ] {} <Fatal> BaseDaemon: 5. abort @ 0x7f4030e3d859 in ?\r\n2022.03.22 00:42:30.372512 [ 494 ] {} <Fatal> BaseDaemon: 6. ? @ 0x7f4030e3d729 in ?\r\n2022.03.22 00:42:30.372628 [ 495 ] {} <Fatal> BaseDaemon: 6. ? @ 0x7f4030e3d729 in ?\r\n2022.03.22 00:42:30.373056 [ 494 ] {} <Fatal> BaseDaemon: 7. ? @ 0x7f4030e4f006 in ?\r\n2022.03.22 00:42:30.373127 [ 495 ] {} <Fatal> BaseDaemon: 7. ? @ 0x7f4030e4f006 in ?\r\n2022.03.22 00:42:30.414846 [ 495 ] {} <Fatal> BaseDaemon: 8. ./obj-x86_64-linux-gnu/../src/Common/PODArray.h:0: DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>::operator[](long) const @ 0x144bb286 in /workspace/clickhouse\r\n2022.03.22 00:42:30.429640 [ 494 ] {} <Fatal> BaseDaemon: 8. ./obj-x86_64-linux-gnu/../src/Common/PODArray.h:0: DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>::operator[](long) const @ 0x144bb286 in /workspace/clickhouse\r\n2022.03.22 00:42:30.511712 [ 495 ] {} <Fatal> BaseDaemon: 9. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:104: unsigned long DB::extractMaskNumericImpl<false, true, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*) @ 0x228f609d in /workspace/clickhouse\r\n2022.03.22 00:42:30.530601 [ 494 ] {} <Fatal> BaseDaemon: 9. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:104: unsigned long DB::extractMaskNumericImpl<false, true, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*) @ 0x228f609d in /workspace/clickhouse\r\n2022.03.22 00:42:30.607282 [ 495 ] {} <Fatal> BaseDaemon: 10. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:140: bool DB::extractMaskNumeric<false, char8_t>(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*, DB::MaskInfo&) @ 0x228f5561 in /workspace/clickhouse\r\n2022.03.22 00:42:30.624881 [ 494 ] {} <Fatal> BaseDaemon: 10. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:140: bool DB::extractMaskNumeric<false, char8_t>(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*, DB::MaskInfo&) @ 0x228f5561 in /workspace/clickhouse\r\n2022.03.22 00:42:30.702107 [ 495 ] {} <Fatal> BaseDaemon: 11. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:200: DB::MaskInfo DB::extractMaskImpl<false>(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*) @ 0x228f4ac2 in /workspace/clickhouse\r\n2022.03.22 00:42:30.718668 [ 494 ] {} <Fatal> BaseDaemon: 11. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:200: DB::MaskInfo DB::extractMaskImpl<false>(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*) @ 0x228f4ac2 in /workspace/clickhouse\r\n2022.03.22 00:42:30.796775 [ 495 ] {} <Fatal> BaseDaemon: 12. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:195: DB::MaskInfo DB::extractMaskImpl<false>(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*) @ 0x228f4a82 in /workspace/clickhouse\r\n2022.03.22 00:42:30.812399 [ 494 ] {} <Fatal> BaseDaemon: 12. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:195: DB::MaskInfo DB::extractMaskImpl<false>(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*) @ 0x228f4a82 in /workspace/clickhouse\r\n2022.03.22 00:42:30.891601 [ 495 ] {} <Fatal> BaseDaemon: 13. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:237: DB::extractMask(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*, char8_t) @ 0x228ef652 in /workspace/clickhouse\r\n2022.03.22 00:42:30.906206 [ 494 ] {} <Fatal> BaseDaemon: 13. ./obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:237: DB::extractMask(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*, char8_t) @ 0x228ef652 in /workspace/clickhouse\r\n2022.03.22 00:42:31.121118 [ 495 ] {} <Fatal> BaseDaemon: 14. ./obj-x86_64-linux-gnu/../src/Functions/FunctionsLogical.cpp:583: DB::FunctionsLogicalDetail::FunctionAnyArityLogical<DB::FunctionsLogicalDetail::AndImpl, DB::NameAnd>::executeShortCircuit(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> >&, std::__1::shared_ptr<DB::IDataType const> const&) const @ 0x182c0816 in /workspace/clickhouse\r\n2022.03.22 00:42:31.133572 [ 494 ] {} <Fatal> BaseDaemon: 14. ./obj-x86_64-linux-gnu/../src/Functions/FunctionsLogical.cpp:583: DB::FunctionsLogicalDetail::FunctionAnyArityLogical<DB::FunctionsLogicalDetail::AndImpl, DB::NameAnd>::executeShortCircuit(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> >&, std::__1::shared_ptr<DB::IDataType const> const&) const @ 0x182c0816 in /workspace/clickhouse\r\n2022.03.22 00:42:31.349784 [ 495 ] {} <Fatal> BaseDaemon: 15. ./obj-x86_64-linux-gnu/../src/Functions/FunctionsLogical.cpp:618: DB::FunctionsLogicalDetail::FunctionAnyArityLogical<DB::FunctionsLogicalDetail::AndImpl, DB::NameAnd>::executeImpl(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long) const @ 0x182bf2f0 in /workspace/clickhouse\r\n2022.03.22 00:42:31.359350 [ 494 ] {} <Fatal> BaseDaemon: 15. ./obj-x86_64-linux-gnu/../src/Functions/FunctionsLogical.cpp:618: DB::FunctionsLogicalDetail::FunctionAnyArityLogical<DB::FunctionsLogicalDetail::AndImpl, DB::NameAnd>::executeImpl(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long) const @ 0x182bf2f0 in /workspace/clickhouse\r\n2022.03.22 00:42:31.699586 [ 495 ] {} <Fatal> BaseDaemon: 16. ./obj-x86_64-linux-gnu/../src/Functions/IFunctionAdaptors.h:21: DB::FunctionToExecutableFunctionAdaptor::executeImpl(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long) const @ 0x17585a4d in /workspace/clickhouse\r\n2022.03.22 00:42:31.704491 [ 494 ] {} <Fatal> BaseDaemon: 16. ./obj-x86_64-linux-gnu/../src/Functions/IFunctionAdaptors.h:21: DB::FunctionToExecutableFunctionAdaptor::executeImpl(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long) const @ 0x17585a4d in /workspace/clickhouse\r\n2022.03.22 00:42:31.806897 [ 495 ] {} <Fatal> BaseDaemon: 17. ./obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:216: DB::IExecutableFunction::executeWithoutLowCardinalityColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const @ 0x20e7fd8a in /workspace/clickhouse\r\n2022.03.22 00:42:31.810167 [ 494 ] {} <Fatal> BaseDaemon: 17. ./obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:216: DB::IExecutableFunction::executeWithoutLowCardinalityColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const @ 0x20e7fd8a in /workspace/clickhouse\r\n2022.03.22 00:42:31.914753 [ 495 ] {} <Fatal> BaseDaemon: 18. ./obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:264: DB::IExecutableFunction::executeWithoutSparseColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const @ 0x20e80895 in /workspace/clickhouse\r\n2022.03.22 00:42:31.916484 [ 494 ] {} <Fatal> BaseDaemon: 18. ./obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:264: DB::IExecutableFunction::executeWithoutSparseColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const @ 0x20e80895 in /workspace/clickhouse\r\n2022.03.22 00:42:32.023204 [ 495 ] {} <Fatal> BaseDaemon: 19. ./obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:334: DB::IExecutableFunction::execute(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const @ 0x20e81783 in /workspace/clickhouse\r\n2022.03.22 00:42:32.023479 [ 494 ] {} <Fatal> BaseDaemon: 19. ./obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:334: DB::IExecutableFunction::execute(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const @ 0x20e81783 in /workspace/clickhouse\r\n2022.03.22 00:42:32.472924 [ 494 ] {} <Fatal> BaseDaemon: 20. ./obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:602: DB::executeAction(DB::ExpressionActions::Action const&, DB::(anonymous namespace)::ExecutionContext&, bool) @ 0x218fd2a6 in /workspace/clickhouse\r\n2022.03.22 00:42:32.474153 [ 495 ] {} <Fatal> BaseDaemon: 20. ./obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:602: DB::executeAction(DB::ExpressionActions::Action const&, DB::(anonymous namespace)::ExecutionContext&, bool) @ 0x218fd2a6 in /workspace/clickhouse\r\n2022.03.22 00:42:32.840036 [ 494 ] {} <Fatal> BaseDaemon: 21. ./obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:719: DB::ExpressionActions::execute(DB::Block&, unsigned long&, bool) const @ 0x218fc75c in /workspace/clickhouse\r\n2022.03.22 00:42:32.843200 [ 495 ] {} <Fatal> BaseDaemon: 21. ./obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:719: DB::ExpressionActions::execute(DB::Block&, unsigned long&, bool) const @ 0x218fc75c in /workspace/clickhouse\r\n2022.03.22 00:42:32.949679 [ 494 ] {} <Fatal> BaseDaemon: 22. ./obj-x86_64-linux-gnu/../src/Processors/Transforms/ExpressionTransform.cpp:23: DB::ExpressionTransform::transform(DB::Chunk&) @ 0x23856924 in /workspace/clickhouse\r\n2022.03.22 00:42:32.952860 [ 495 ] {} <Fatal> BaseDaemon: 22. ./obj-x86_64-linux-gnu/../src/Processors/Transforms/ExpressionTransform.cpp:23: DB::ExpressionTransform::transform(DB::Chunk&) @ 0x23856924 in /workspace/clickhouse\r\n2022.03.22 00:42:33.094628 [ 494 ] {} <Fatal> BaseDaemon: 23. ./obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.h:38: DB::ISimpleTransform::transform(DB::Chunk&, DB::Chunk&) @ 0x1d883d22 in /workspace/clickhouse\r\n2022.03.22 00:42:33.098349 [ 495 ] {} <Fatal> BaseDaemon: 23. ./obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.h:38: DB::ISimpleTransform::transform(DB::Chunk&, DB::Chunk&) @ 0x1d883d22 in /workspace/clickhouse\r\n2022.03.22 00:42:33.216784 [ 494 ] {} <Fatal> BaseDaemon: 24. ./obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.cpp:89: DB::ISimpleTransform::work() @ 0x2347b71e in /workspace/clickhouse\r\n2022.03.22 00:42:33.220884 [ 495 ] {} <Fatal> BaseDaemon: 24. ./obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.cpp:89: DB::ISimpleTransform::work() @ 0x2347b71e in /workspace/clickhouse\r\n2022.03.22 00:42:33.305076 [ 494 ] {} <Fatal> BaseDaemon: 25. ./obj-x86_64-linux-gnu/../src/Processors/Executors/ExecutionThreadContext.cpp:45: DB::executeJob(DB::IProcessor*) @ 0x234b8ab9 in /workspace/clickhouse\r\n2022.03.22 00:42:33.309319 [ 495 ] {} <Fatal> BaseDaemon: 25. ./obj-x86_64-linux-gnu/../src/Processors/Executors/ExecutionThreadContext.cpp:45: DB::executeJob(DB::IProcessor*) @ 0x234b8ab9 in /workspace/clickhouse\r\n2022.03.22 00:42:33.389285 [ 494 ] {} <Fatal> BaseDaemon: 26. ./obj-x86_64-linux-gnu/../src/Processors/Executors/ExecutionThreadContext.cpp:63: DB::ExecutionThreadContext::executeTask() @ 0x234b89b5 in /workspace/clickhouse\r\n2022.03.22 00:42:33.393635 [ 495 ] {} <Fatal> BaseDaemon: 26. ./obj-x86_64-linux-gnu/../src/Processors/Executors/ExecutionThreadContext.cpp:63: DB::ExecutionThreadContext::executeTask() @ 0x234b89b5 in /workspace/clickhouse\r\n2022.03.22 00:42:33.550559 [ 494 ] {} <Fatal> BaseDaemon: 27. ./obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:213: DB::PipelineExecutor::executeStepImpl(unsigned long, std::__1::atomic<bool>*) @ 0x2349c6a1 in /workspace/clickhouse\r\n2022.03.22 00:42:33.557498 [ 495 ] {} <Fatal> BaseDaemon: 27. ./obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:213: DB::PipelineExecutor::executeStepImpl(unsigned long, std::__1::atomic<bool>*) @ 0x2349c6a1 in /workspace/clickhouse\r\n2022.03.22 00:42:33.711615 [ 494 ] {} <Fatal> BaseDaemon: 28. ./obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:178: DB::PipelineExecutor::executeSingleThread(unsigned long) @ 0x2349c977 in /workspace/clickhouse\r\n2022.03.22 00:42:33.718705 [ 495 ] {} <Fatal> BaseDaemon: 28. ./obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:178: DB::PipelineExecutor::executeSingleThread(unsigned long) @ 0x2349c977 in /workspace/clickhouse\r\n2022.03.22 00:42:33.885488 [ 494 ] {} <Fatal> BaseDaemon: 29. ./obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:306: DB::PipelineExecutor::executeImpl(unsigned long)::$_1::operator()() const @ 0x2349e122 in /workspace/clickhouse\r\n2022.03.22 00:42:33.893149 [ 495 ] {} <Fatal> BaseDaemon: 29. ./obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:306: DB::PipelineExecutor::executeImpl(unsigned long)::$_1::operator()() const @ 0x2349e122 in /workspace/clickhouse\r\n2022.03.22 00:42:34.064681 [ 494 ] {} <Fatal> BaseDaemon: 30. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3682: decltype(std::__1::forward<DB::PipelineExecutor::executeImpl(unsigned long)::$_1&>(fp)()) std::__1::__invoke_constexpr<DB::PipelineExecutor::executeImpl(unsigned long)::$_1&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&) @ 0x2349e09d in /workspace/clickhouse\r\n2022.03.22 00:42:34.072809 [ 495 ] {} <Fatal> BaseDaemon: 30. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3682: decltype(std::__1::forward<DB::PipelineExecutor::executeImpl(unsigned long)::$_1&>(fp)()) std::__1::__invoke_constexpr<DB::PipelineExecutor::executeImpl(unsigned long)::$_1&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&) @ 0x2349e09d in /workspace/clickhouse\r\n2022.03.22 00:42:34.243837 [ 494 ] {} <Fatal> BaseDaemon: 31. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/tuple:1415: decltype(auto) std::__1::__apply_tuple_impl<DB::PipelineExecutor::executeImpl(unsigned long)::$_1&, std::__1::tuple<>&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&, std::__1::tuple<>&, std::__1::__tuple_indices<>) @ 0x2349e041 in /workspace/clickhouse\r\n2022.03.22 00:42:34.252287 [ 495 ] {} <Fatal> BaseDaemon: 31. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/tuple:1415: decltype(auto) std::__1::__apply_tuple_impl<DB::PipelineExecutor::executeImpl(unsigned long)::$_1&, std::__1::tuple<>&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&, std::__1::tuple<>&, std::__1::__tuple_indices<>) @ 0x2349e041 in /workspace/clickhouse\r\n2022.03.22 00:42:34.422932 [ 494 ] {} <Fatal> BaseDaemon: 32. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/tuple:1424: decltype(auto) std::__1::apply<DB::PipelineExecutor::executeImpl(unsigned long)::$_1&, std::__1::tuple<>&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&, std::__1::tuple<>&) @ 0x2349df52 in /workspace/clickhouse\r\n2022.03.22 00:42:34.431458 [ 495 ] {} <Fatal> BaseDaemon: 32. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/tuple:1424: decltype(auto) std::__1::apply<DB::PipelineExecutor::executeImpl(unsigned long)::$_1&, std::__1::tuple<>&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&, std::__1::tuple<>&) @ 0x2349df52 in /workspace/clickhouse\r\n2022.03.22 00:42:34.576139 [ 494 ] {} <Fatal> BaseDaemon: 33. ./obj-x86_64-linux-gnu/../src/Common/ThreadPool.h:188: ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'()::operator()() @ 0x2349de1b in /workspace/clickhouse\r\n2022.03.22 00:42:34.585267 [ 495 ] {} <Fatal> BaseDaemon: 33. ./obj-x86_64-linux-gnu/../src/Common/ThreadPool.h:188: ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'()::operator()() @ 0x2349de1b in /workspace/clickhouse\r\n2022.03.22 00:42:34.754440 [ 494 ] {} <Fatal> BaseDaemon: 34. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3676: decltype(std::__1::forward<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(fp)()) std::__1::__invoke<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'()&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&) @ 0x2349dcdd in /workspace/clickhouse\r\n2022.03.22 00:42:34.764325 [ 495 ] {} <Fatal> BaseDaemon: 34. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3676: decltype(std::__1::forward<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(fp)()) std::__1::__invoke<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'()&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&) @ 0x2349dcdd in /workspace/clickhouse\r\n2022.03.22 00:42:34.928283 [ 494 ] {} <Fatal> BaseDaemon: 35. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/__functional_base:349: void std::__1::__invoke_void_return_wrapper<void>::__call<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'()&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&...) @ 0x2349dc9d in /workspace/clickhouse\r\n2022.03.22 00:42:34.938604 [ 495 ] {} <Fatal> BaseDaemon: 35. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/__functional_base:349: void std::__1::__invoke_void_return_wrapper<void>::__call<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'()&>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&...) @ 0x2349dc9d in /workspace/clickhouse\r\n2022.03.22 00:42:35.102472 [ 494 ] {} <Fatal> BaseDaemon: 36. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1608: std::__1::__function::__default_alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'(), void ()>::operator()() @ 0x2349dc75 in /workspace/clickhouse\r\n2022.03.22 00:42:35.112808 [ 495 ] {} <Fatal> BaseDaemon: 36. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1608: std::__1::__function::__default_alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'(), void ()>::operator()() @ 0x2349dc75 in /workspace/clickhouse\r\n2022.03.22 00:42:35.275995 [ 494 ] {} <Fatal> BaseDaemon: 37. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2089: void std::__1::__function::__policy_invoker<void ()>::__call_impl<std::__1::__function::__default_alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'(), void ()> >(std::__1::__function::__policy_storage const*) @ 0x2349dc40 in /workspace/clickhouse\r\n2022.03.22 00:42:35.287763 [ 495 ] {} <Fatal> BaseDaemon: 37. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2089: void std::__1::__function::__policy_invoker<void ()>::__call_impl<std::__1::__function::__default_alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PipelineExecutor::executeImpl(unsigned long)::$_1>(DB::PipelineExecutor::executeImpl(unsigned long)::$_1&&)::'lambda'(), void ()> >(std::__1::__function::__policy_storage const*) @ 0x2349dc40 in /workspace/clickhouse\r\n2022.03.22 00:42:35.342704 [ 494 ] {} <Fatal> BaseDaemon: 38. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2221: std::__1::__function::__policy_func<void ()>::operator()() const @ 0x14473f26 in /workspace/clickhouse\r\n2022.03.22 00:42:35.354957 [ 495 ] {} <Fatal> BaseDaemon: 38. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2221: std::__1::__function::__policy_func<void ()>::operator()() const @ 0x14473f26 in /workspace/clickhouse\r\n2022.03.22 00:42:35.402184 [ 494 ] {} <Fatal> BaseDaemon: 39. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2560: std::__1::function<void ()>::operator()() const @ 0x14470235 in /workspace/clickhouse\r\n2022.03.22 00:42:35.414813 [ 495 ] {} <Fatal> BaseDaemon: 39. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2560: std::__1::function<void ()>::operator()() const @ 0x14470235 in /workspace/clickhouse\r\n2022.03.22 00:42:35.474378 [ 494 ] {} <Fatal> BaseDaemon: 40. ./obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:277: ThreadPoolImpl<std::__1::thread>::worker(std::__1::__list_iterator<std::__1::thread, void*>) @ 0x1451b3ef in /workspace/clickhouse\r\n2022.03.22 00:42:35.487665 [ 495 ] {} <Fatal> BaseDaemon: 40. ./obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:277: ThreadPoolImpl<std::__1::thread>::worker(std::__1::__list_iterator<std::__1::thread, void*>) @ 0x1451b3ef in /workspace/clickhouse\r\n2022.03.22 00:42:35.563475 [ 494 ] {} <Fatal> BaseDaemon: 41. ./obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:142: void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()::operator()() const @ 0x14521f84 in /workspace/clickhouse\r\n2022.03.22 00:42:35.577568 [ 495 ] {} <Fatal> BaseDaemon: 41. ./obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:142: void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()::operator()() const @ 0x14521f84 in /workspace/clickhouse\r\n2022.03.22 00:42:35.657654 [ 494 ] {} <Fatal> BaseDaemon: 42. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3676: decltype(std::__1::forward<void>(fp)(std::__1::forward<void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(fp0)...)) std::__1::__invoke<void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(void&&, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()&&...) @ 0x14521efd in /workspace/clickhouse\r\n2022.03.22 00:42:35.672771 [ 495 ] {} <Fatal> BaseDaemon: 42. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3676: decltype(std::__1::forward<void>(fp)(std::__1::forward<void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(fp0)...)) std::__1::__invoke<void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(void&&, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()&&...) @ 0x14521efd in /workspace/clickhouse\r\n2022.03.22 00:42:35.751769 [ 494 ] {} <Fatal> BaseDaemon: 43. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/thread:281: void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(std::__1::tuple<void, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>&, std::__1::__tuple_indices<>) @ 0x14521e25 in /workspace/clickhouse\r\n2022.03.22 00:42:35.767832 [ 495 ] {} <Fatal> BaseDaemon: 43. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/thread:281: void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(std::__1::tuple<void, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>&, std::__1::__tuple_indices<>) @ 0x14521e25 in /workspace/clickhouse\r\n2022.03.22 00:42:35.845751 [ 494 ] {} <Fatal> BaseDaemon: 44. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/thread:291: void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()> >(void*) @ 0x14521762 in /workspace/clickhouse\r\n2022.03.22 00:42:35.862503 [ 495 ] {} <Fatal> BaseDaemon: 44. ./obj-x86_64-linux-gnu/../contrib/libcxx/include/thread:291: void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()> >(void*) @ 0x14521762 in /workspace/clickhouse\r\n2022.03.22 00:42:36.882145 [ 494 ] {} <Fatal> BaseDaemon: Calculated checksum of the binary: 79203E6B0639D8B1A194B3FDF71A8DD0. There is no information about the reference checksum.\r\n2022.03.22 00:42:36.903283 [ 495 ] {} <Fatal> BaseDaemon: Calculated checksum of the binary: 79203E6B0639D8B1A194B3FDF71A8DD0. There is no information about the reference checksum.\r\n\r\n```\nheap-buffer-overflow in MaskOperations\nhttps://s3.amazonaws.com/clickhouse-test-reports/24258/9a505476a5c53dfbcc308139679fad5d47904b34/fuzzer_astfuzzerasan,actions//report.html\r\n\r\n```\r\n2022.03.22 00:50:00.054438 [ 208 ] {af2da264-7f7e-408a-a32b-09a3aceea34a} <Debug> executeQuery: (from [::ffff:127.0.0.1]:34518) SELECT 65536 AND 2147483647, throwIf((((1048575 AND throwIf((0. AND NULL) AND (((65536 AND 257) AND (1.1754943508222875e-38 AND 1024) AND -2147483649) AND NULL) AND (10 AND NULL)) AND (((65536 AND 257) AND (1.1754943508222875e-38 AND 1024) AND -1) AND NULL) AND 65535) AND -1) AND NULL) AND (NULL AND NULL), NULL < number) FROM numbers(1024)\r\n2022.03.22 00:50:00.054823 [ 208 ] {af2da264-7f7e-408a-a32b-09a3aceea34a} <Trace> ContextAccess (default): Access granted: CREATE TEMPORARY TABLE ON *.*\r\n2022.03.22 00:50:00.057259 [ 208 ] {af2da264-7f7e-408a-a32b-09a3aceea34a} <Trace> InterpreterSelectQuery: FetchColumns -> Complete\r\n2022.03.22 00:50:01.440449 [ 455 ] {} <Fatal> BaseDaemon: (version 22.4.1.1, build id: E27D1D37997A9FB5) (from thread 431) (query_id: af2da264-7f7e-408a-a32b-09a3aceea34a) (query: SELECT 65536 AND 2147483647, throwIf((((1048575 AND throwIf((0. AND NULL) AND (((65536 AND 257) AND (1.1754943508222875e-38 AND 1024) AND -2147483649) AND NULL) AND (10 AND NULL)) AND (((65536 AND 257) AND (1.1754943508222875e-38 AND 1024) AND -1) AND NULL) AND 65535) AND -1) AND NULL) AND (NULL AND NULL), NULL < number) FROM numbers(1024)) Received signal Unknown signal (-3)\r\n\r\n\r\n\r\n=================================================================\r\n==106==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x603000f877e0 at pc 0x00002abc93b3 bp 0x7fd97f2ff8f0 sp 0x7fd97f2ff8e8\r\nREAD of size 1 at 0x603000f877e0 thread T222 (QueryPipelineEx)\r\n    #0 0x2abc93b2 in unsigned long DB::extractMaskNumericImpl<false, true, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*) obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:104:29\r\n    #1 0x2abc6655 in bool DB::extractMaskNumeric<false, char8_t>(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*, DB::MaskInfo&) obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:140:22\r\n    #2 0x2abc6655 in DB::MaskInfo DB::extractMaskImpl<false>(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*) obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:200:11\r\n    #3 0x2abc627b in DB::MaskInfo DB::extractMaskImpl<false>(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*) obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:195:16\r\n    #4 0x14af1477 in DB::FunctionsLogicalDetail::FunctionAnyArityLogical<DB::FunctionsLogicalDetail::AndImpl, DB::NameAnd>::executeShortCircuit(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> >&, std::__1::shared_ptr<DB::IDataType const> const&) const (/workspace/clickhouse+0x14af1477)\r\n    #5 0x14aeb284 in DB::FunctionsLogicalDetail::FunctionAnyArityLogical<DB::FunctionsLogicalDetail::AndImpl, DB::NameAnd>::executeImpl(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long) const (/workspace/clickhouse+0x14aeb284)\r\n    #6 0x12218a8b in DB::FunctionToExecutableFunctionAdaptor::executeImpl(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long) const (/workspace/clickhouse+0x12218a8b)\r\n    #7 0x277cfc82 in DB::IExecutableFunction::executeWithoutLowCardinalityColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:216:15\r\n    #8 0x277d0ba4 in DB::IExecutableFunction::executeWithoutSparseColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:264:22\r\n    #9 0x277d494e in DB::IExecutableFunction::execute(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:334:16\r\n    #10 0x28a98289 in DB::executeAction(DB::ExpressionActions::Action const&, DB::(anonymous namespace)::ExecutionContext&, bool) obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:602:60\r\n    #11 0x28a98289 in DB::ExpressionActions::execute(DB::Block&, unsigned long&, bool) const obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:719:13\r\n    #12 0x2c7d35da in DB::ExpressionTransform::transform(DB::Chunk&) obj-x86_64-linux-gnu/../src/Processors/Transforms/ExpressionTransform.cpp:23:17\r\n    #13 0x1fdaa8fd in DB::ISimpleTransform::transform(DB::Chunk&, DB::Chunk&) obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.h:37:9\r\n    #14 0x2c2888d7 in DB::ISimpleTransform::work() obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.cpp:89:9\r\n    #15 0x2c2ea6e5 in DB::executeJob(DB::IProcessor*) obj-x86_64-linux-gnu/../src/Processors/Executors/ExecutionThreadContext.cpp:45:20\r\n    #16 0x2c2ea6e5 in DB::ExecutionThreadContext::executeTask() obj-x86_64-linux-gnu/../src/Processors/Executors/ExecutionThreadContext.cpp:63:9\r\n    #17 0x2c2cafc6 in DB::PipelineExecutor::executeStepImpl(unsigned long, std::__1::atomic<bool>*) obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:213:26\r\n    #18 0x2c2c94ee in DB::PipelineExecutor::executeSingleThread(unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:178:5\r\n    #19 0x2c2c94ee in DB::PipelineExecutor::executeImpl(unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:324:9\r\n    #20 0x2c2c87af in DB::PipelineExecutor::execute(unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:84:9\r\n    #21 0x2c2f400c in DB::threadFunction(DB::PullingAsyncPipelineExecutor::Data&, std::__1::shared_ptr<DB::ThreadGroupStatus>, unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PullingAsyncPipelineExecutor.cpp:78:24\r\n    #22 0x2c2f400c in DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0::operator()() const obj-x86_64-linux-gnu/../src/Processors/Executors/PullingAsyncPipelineExecutor.cpp:105:13\r\n    #23 0x2c2f400c in decltype(std::__1::forward<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&>(fp)()) std::__1::__invoke_constexpr<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&) obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3682:1\r\n    #24 0x2c2f400c in decltype(auto) std::__1::__apply_tuple_impl<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&, std::__1::tuple<>&>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&, std::__1::tuple<>&, std::__1::__tuple_indices<>) obj-x86_64-linux-gnu/../contrib/libcxx/include/tuple:1415:1\r\n    #25 0x2c2f400c in decltype(auto) std::__1::apply<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&, std::__1::tuple<>&>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&, std::__1::tuple<>&) obj-x86_64-linux-gnu/../contrib/libcxx/include/tuple:1424:1\r\n    #26 0x2c2f400c in ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'()::operator()() obj-x86_64-linux-gnu/../src/Common/ThreadPool.h:188:13\r\n    #27 0x2c2f400c in decltype(std::__1::forward<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(fp)()) std::__1::__invoke<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'()&>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&) obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3676:1\r\n    #28 0x2c2f400c in void std::__1::__invoke_void_return_wrapper<void>::__call<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'()&>(ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'()&) obj-x86_64-linux-gnu/../contrib/libcxx/include/__functional_base:348:9\r\n    #29 0x2c2f400c in std::__1::__function::__default_alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'(), void ()>::operator()() obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1608:12\r\n    #30 0x2c2f400c in void std::__1::__function::__policy_invoker<void ()>::__call_impl<std::__1::__function::__default_alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'(), void ()> >(std::__1::__function::__policy_storage const*) obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2089:16\r\n    #31 0xbf8a106 in std::__1::__function::__policy_func<void ()>::operator()() const obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2221:16\r\n    #32 0xbf8a106 in std::__1::function<void ()>::operator()() const obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2560:12\r\n    #33 0xbf8a106 in ThreadPoolImpl<std::__1::thread>::worker(std::__1::__list_iterator<std::__1::thread, void*>) obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:277:17\r\n    #34 0xbf92696 in void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()::operator()() const obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:142:73\r\n    #35 0xbf92696 in decltype(std::__1::forward<void>(fp)()) std::__1::__invoke<void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(void&&) obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3676:1\r\n    #36 0xbf92696 in void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(std::__1::tuple<void, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>&, std::__1::__tuple_indices<>) obj-x86_64-linux-gnu/../contrib/libcxx/include/thread:280:5\r\n    #37 0xbf92696 in void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()> >(void*) obj-x86_64-linux-gnu/../contrib/libcxx/include/thread:291:5\r\n    #38 0x7fdad75b4608 in start_thread /build/glibc-sMfBJT/glibc-2.31/nptl/pthread_create.c:477:8\r\n    #39 0x7fdad74d9162 in __clone /build/glibc-sMfBJT/glibc-2.31/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n\r\n0x603000f877e0 is located 0 bytes to the right of 32-byte region [0x603000f877c0,0x603000f877e0)\r\nallocated by thread T222 (QueryPipelineEx) here:\r\n    #0 0xbd665dd in malloc (/workspace/clickhouse+0xbd665dd)\r\n    #1 0xbeaa80a in Allocator<false, false>::allocNoTrack(unsigned long, unsigned long) obj-x86_64-linux-gnu/../src/Common/Allocator.h:227:27\r\n    #2 0x2a7a2681 in Allocator<false, false>::alloc(unsigned long, unsigned long) obj-x86_64-linux-gnu/../src/Common/Allocator.h:96:16\r\n    #3 0x2a7a2681 in void DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::alloc<>(unsigned long) obj-x86_64-linux-gnu/../src/Common/PODArray.h:128:65\r\n    #4 0x2a7a2681 in DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::alloc_for_num_elements(unsigned long) obj-x86_64-linux-gnu/../src/Common/PODArray.h:122:9\r\n    #5 0x2a7a2681 in DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>::PODArray(unsigned long, char8_t const&) obj-x86_64-linux-gnu/../src/Common/PODArray.h:346:15\r\n    #6 0x2a7a2681 in DB::ColumnVector<char8_t>::ColumnVector(unsigned long, char8_t) obj-x86_64-linux-gnu/../src/Columns/ColumnVector.h:132:55\r\n    #7 0x2a7a2681 in COW<DB::IColumn>::mutable_ptr<DB::ColumnVector<char8_t> > COWHelper<DB::ColumnVectorHelper, DB::ColumnVector<char8_t> >::create<unsigned long, int>(unsigned long&&, int&&) obj-x86_64-linux-gnu/../src/Common/COW.h:284:71\r\n    #8 0x2a7a2681 in DB::makeNullable(COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&) obj-x86_64-linux-gnu/../src/Columns/ColumnNullable.cpp:720:43\r\n    #9 0x277ef4eb in DB::wrapInNullable(COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long) obj-x86_64-linux-gnu/../src/Functions/FunctionHelpers.cpp:293:16\r\n    #10 0x277d032e in DB::IExecutableFunction::defaultImplementationForNulls(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:197:16\r\n    #11 0x277cfb86 in DB::IExecutableFunction::executeWithoutLowCardinalityColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:209:20\r\n    #12 0x277d0ba4 in DB::IExecutableFunction::executeWithoutSparseColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:264:22\r\n    #13 0x277d494e in DB::IExecutableFunction::execute(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:334:16\r\n    #14 0x12217e36 in DB::IFunctionBase::execute(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const (/workspace/clickhouse+0x12217e36)\r\n    #15 0x2a72ed36 in DB::ColumnFunction::reduce() const obj-x86_64-linux-gnu/../src/Columns/ColumnFunction.cpp:269:28\r\n    #16 0x2abba79c in DB::maskedExecute(DB::ColumnWithTypeAndName&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, DB::MaskInfo const&) obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:279:35\r\n    #17 0x14af14ed in DB::FunctionsLogicalDetail::FunctionAnyArityLogical<DB::FunctionsLogicalDetail::AndImpl, DB::NameAnd>::executeShortCircuit(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> >&, std::__1::shared_ptr<DB::IDataType const> const&) const (/workspace/clickhouse+0x14af14ed)\r\n    #18 0x14aeb284 in DB::FunctionsLogicalDetail::FunctionAnyArityLogical<DB::FunctionsLogicalDetail::AndImpl, DB::NameAnd>::executeImpl(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long) const (/workspace/clickhouse+0x14aeb284)\r\n    #19 0x12218a8b in DB::FunctionToExecutableFunctionAdaptor::executeImpl(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long) const (/workspace/clickhouse+0x12218a8b)\r\n    #20 0x277cfc82 in DB::IExecutableFunction::executeWithoutLowCardinalityColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:216:15\r\n    #21 0x277d0ba4 in DB::IExecutableFunction::executeWithoutSparseColumns(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:264:22\r\n    #22 0x277d494e in DB::IExecutableFunction::execute(std::__1::vector<DB::ColumnWithTypeAndName, std::__1::allocator<DB::ColumnWithTypeAndName> > const&, std::__1::shared_ptr<DB::IDataType const> const&, unsigned long, bool) const obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:334:16\r\n    #23 0x28a98289 in DB::executeAction(DB::ExpressionActions::Action const&, DB::(anonymous namespace)::ExecutionContext&, bool) obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:602:60\r\n    #24 0x28a98289 in DB::ExpressionActions::execute(DB::Block&, unsigned long&, bool) const obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:719:13\r\n    #25 0x2c7d35da in DB::ExpressionTransform::transform(DB::Chunk&) obj-x86_64-linux-gnu/../src/Processors/Transforms/ExpressionTransform.cpp:23:17\r\n    #26 0x1fdaa8fd in DB::ISimpleTransform::transform(DB::Chunk&, DB::Chunk&) obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.h:37:9\r\n    #27 0x2c2888d7 in DB::ISimpleTransform::work() obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.cpp:89:9\r\n    #28 0x2c2ea6e5 in DB::executeJob(DB::IProcessor*) obj-x86_64-linux-gnu/../src/Processors/Executors/ExecutionThreadContext.cpp:45:20\r\n    #29 0x2c2ea6e5 in DB::ExecutionThreadContext::executeTask() obj-x86_64-linux-gnu/../src/Processors/Executors/ExecutionThreadContext.cpp:63:9\r\n    #30 0x2c2cafc6 in DB::PipelineExecutor::executeStepImpl(unsigned long, std::__1::atomic<bool>*) obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:213:26\r\n    #31 0x2c2c94ee in DB::PipelineExecutor::executeSingleThread(unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:178:5\r\n    #32 0x2c2c94ee in DB::PipelineExecutor::executeImpl(unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:324:9\r\n    #33 0x2c2c87af in DB::PipelineExecutor::execute(unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:84:9\r\n    #34 0x2c2f400c in DB::threadFunction(DB::PullingAsyncPipelineExecutor::Data&, std::__1::shared_ptr<DB::ThreadGroupStatus>, unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PullingAsyncPipelineExecutor.cpp:78:24\r\n    #35 0x2c2f400c in DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0::operator()() const obj-x86_64-linux-gnu/../src/Processors/Executors/PullingAsyncPipelineExecutor.cpp:105:13\r\n    #36 0x2c2f400c in decltype(std::__1::forward<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&>(fp)()) std::__1::__invoke_constexpr<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&) obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3682:1\r\n    #37 0x2c2f400c in decltype(auto) std::__1::__apply_tuple_impl<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&, std::__1::tuple<>&>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&, std::__1::tuple<>&, std::__1::__tuple_indices<>) obj-x86_64-linux-gnu/../contrib/libcxx/include/tuple:1415:1\r\n    #38 0x2c2f400c in decltype(auto) std::__1::apply<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&, std::__1::tuple<>&>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&, std::__1::tuple<>&) obj-x86_64-linux-gnu/../contrib/libcxx/include/tuple:1424:1\r\n    #39 0x2c2f400c in ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'()::operator()() obj-x86_64-linux-gnu/../src/Common/ThreadPool.h:188:13\r\n    #40 0x2c2f400c in decltype(std::__1::forward<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(fp)()) std::__1::__invoke<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'()&>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&) obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3676:1\r\n    #41 0x2c2f400c in void std::__1::__invoke_void_return_wrapper<void>::__call<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'()&>(ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'()&) obj-x86_64-linux-gnu/../contrib/libcxx/include/__functional_base:348:9\r\n    #42 0x2c2f400c in std::__1::__function::__default_alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'(), void ()>::operator()() obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1608:12\r\n    #43 0x2c2f400c in void std::__1::__function::__policy_invoker<void ()>::__call_impl<std::__1::__function::__default_alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&)::'lambda'(), void ()> >(std::__1::__function::__policy_storage const*) obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2089:16\r\n    #44 0xbf8a106 in std::__1::__function::__policy_func<void ()>::operator()() const obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2221:16\r\n    #45 0xbf8a106 in std::__1::function<void ()>::operator()() const obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2560:12\r\n    #46 0xbf8a106 in ThreadPoolImpl<std::__1::thread>::worker(std::__1::__list_iterator<std::__1::thread, void*>) obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:277:17\r\n    #47 0xbf92696 in void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()::operator()() const obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:142:73\r\n    #48 0xbf92696 in decltype(std::__1::forward<void>(fp)()) std::__1::__invoke<void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(void&&) obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3676:1\r\n    #49 0xbf92696 in void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>(std::__1::tuple<void, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()>&, std::__1::__tuple_indices<>) obj-x86_64-linux-gnu/../contrib/libcxx/include/thread:280:5\r\n    #50 0xbf92696 in void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'()> >(void*) obj-x86_64-linux-gnu/../contrib/libcxx/include/thread:291:5\r\n    #51 0x7fdad75b4608 in start_thread /build/glibc-sMfBJT/glibc-2.31/nptl/pthread_create.c:477:8\r\n\r\nThread T222 (QueryPipelineEx) created by T3 (TCPHandler) here:\r\n    #0 0xbd50c9c in pthread_create (/workspace/clickhouse+0xbd50c9c)\r\n    #1 0xbf91676 in std::__1::__libcpp_thread_create(unsigned long*, void* (*)(void*), void*) obj-x86_64-linux-gnu/../contrib/libcxx/include/__threading_support:509:10\r\n    #2 0xbf91676 in std::__1::thread::thread<void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda0'(), void>(void&&) obj-x86_64-linux-gnu/../contrib/libcxx/include/thread:307:16\r\n    #3 0xbf869d9 in void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>) obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:142:35\r\n    #4 0xbf883fc in ThreadPoolImpl<std::__1::thread>::scheduleOrThrow(std::__1::function<void ()>, int, unsigned long) obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:174:5\r\n    #5 0x2c2f05cf in ThreadFromGlobalPool::ThreadFromGlobalPool<DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0>(DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long)::$_0&&) obj-x86_64-linux-gnu/../src/Common/ThreadPool.h:169:38\r\n    #6 0x2c2f05cf in DB::PullingAsyncPipelineExecutor::pull(DB::Chunk&, unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PullingAsyncPipelineExecutor.cpp:108:24\r\n    #7 0x2c2f195a in DB::PullingAsyncPipelineExecutor::pull(DB::Block&, unsigned long) obj-x86_64-linux-gnu/../src/Processors/Executors/PullingAsyncPipelineExecutor.cpp:145:10\r\n    #8 0x2c1d81b3 in DB::TCPHandler::processOrdinaryQueryWithProcessors() obj-x86_64-linux-gnu/../src/Server/TCPHandler.cpp:679:25\r\n    #9 0x2c1c7183 in DB::TCPHandler::runImpl() obj-x86_64-linux-gnu/../src/Server/TCPHandler.cpp:345:17\r\n    #10 0x2c1eef9f in DB::TCPHandler::run() obj-x86_64-linux-gnu/../src/Server/TCPHandler.cpp:1767:9\r\n    #11 0x2e95ab4e in Poco::Net::TCPServerConnection::start() obj-x86_64-linux-gnu/../contrib/poco/Net/src/TCPServerConnection.cpp:43:3\r\n    #12 0x2e95b8c0 in Poco::Net::TCPServerDispatcher::run() obj-x86_64-linux-gnu/../contrib/poco/Net/src/TCPServerDispatcher.cpp:115:20\r\n    #13 0x2ee2d205 in Poco::PooledThread::run() obj-x86_64-linux-gnu/../contrib/poco/Foundation/src/ThreadPool.cpp:199:14\r\n    #14 0x2ee264b9 in Poco::ThreadImpl::runnableEntry(void*) obj-x86_64-linux-gnu/../contrib/poco/Foundation/src/Thread_POSIX.cpp:345:27\r\n    #15 0x7fdad75b4608 in start_thread /build/glibc-sMfBJT/glibc-2.31/nptl/pthread_create.c:477:8\r\n\r\nThread T3 (TCPHandler) created by T0 here:\r\n    #0 0xbd50c9c in pthread_create (/workspace/clickhouse+0xbd50c9c)\r\n    #1 0x2ee25769 in Poco::ThreadImpl::startImpl(Poco::SharedPtr<Poco::Runnable, Poco::ReferenceCounter, Poco::ReleasePolicy<Poco::Runnable> >) obj-x86_64-linux-gnu/../contrib/poco/Foundation/src/Thread_POSIX.cpp:202:6\r\n    #2 0x2ee287fd in Poco::Thread::start(Poco::Runnable&) obj-x86_64-linux-gnu/../contrib/poco/Foundation/src/Thread.cpp:128:2\r\n    #3 0x2ee2dbf9 in Poco::PooledThread::start() obj-x86_64-linux-gnu/../contrib/poco/Foundation/src/ThreadPool.cpp:85:10\r\n    #4 0x2ee2dbf9 in Poco::ThreadPool::ThreadPool(int, int, int, int) obj-x86_64-linux-gnu/../contrib/poco/Foundation/src/ThreadPool.cpp:252:12\r\n    #5 0xbdad938 in DB::Server::main(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) obj-x86_64-linux-gnu/../programs/server/Server.cpp:572:22\r\n    #6 0x2e9937da in Poco::Util::Application::run() obj-x86_64-linux-gnu/../contrib/poco/Util/src/Application.cpp:334:8\r\n    #7 0xbda6c98 in DB::Server::run() obj-x86_64-linux-gnu/../programs/server/Server.cpp:452:25\r\n    #8 0x2e9d6f5d in Poco::Util::ServerApplication::run(int, char**) obj-x86_64-linux-gnu/../contrib/poco/Util/src/ServerApplication.cpp:611:9\r\n    #9 0xbda03fd in mainEntryClickHouseServer(int, char**) obj-x86_64-linux-gnu/../programs/server/Server.cpp:183:20\r\n    #10 0xbd9bf88 in main obj-x86_64-linux-gnu/../programs/main.cpp:378:12\r\n    #11 0x7fdad73de0b2 in __libc_start_main /build/glibc-sMfBJT/glibc-2.31/csu/../csu/libc-start.c:308:16\r\n\r\nSUMMARY: AddressSanitizer: heap-buffer-overflow obj-x86_64-linux-gnu/../src/Columns/MaskOperations.cpp:104:29 in unsigned long DB::extractMaskNumericImpl<false, true, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> >(DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, char8_t, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>*)\r\nShadow bytes around the buggy address:\r\n  0x0c06801e8ea0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x0c06801e8eb0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x0c06801e8ec0: fa fa fa fa fa fa fa fa 00 00 00 00 fa fa fa fa\r\n  0x0c06801e8ed0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x0c06801e8ee0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n=>0x0c06801e8ef0: fa fa fd fd fd fa fa fa 00 00 00 00[fa]fa fa fa\r\n  0x0c06801e8f00: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n--\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n==106==ABORTING\r\n\r\n```\n",
  "hints_text": "\n",
  "created_at": "2022-03-22T13:11:59Z"
}