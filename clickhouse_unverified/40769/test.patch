diff --git a/tests/integration/test_host_regexp_hosts_file_resolution/__init__.py b/tests/integration/test_host_regexp_hosts_file_resolution/__init__.py
new file mode 100644
index 000000000000..e69de29bb2d1
diff --git a/tests/integration/test_host_regexp_hosts_file_resolution/configs/host_regexp.xml b/tests/integration/test_host_regexp_hosts_file_resolution/configs/host_regexp.xml
new file mode 100644
index 000000000000..7a2141e6c7e2
--- /dev/null
+++ b/tests/integration/test_host_regexp_hosts_file_resolution/configs/host_regexp.xml
@@ -0,0 +1,11 @@
+<yandex>
+    <users>
+        <test_dns>
+            <password/>
+            <networks>
+                <host_regexp>test1\.example\.com$</host_regexp>
+            </networks>
+            <profile>default</profile>
+        </test_dns>
+    </users>
+</yandex>
\ No newline at end of file
diff --git a/tests/integration/test_host_regexp_hosts_file_resolution/configs/listen_host.xml b/tests/integration/test_host_regexp_hosts_file_resolution/configs/listen_host.xml
new file mode 100644
index 000000000000..58ef55cd3f35
--- /dev/null
+++ b/tests/integration/test_host_regexp_hosts_file_resolution/configs/listen_host.xml
@@ -0,0 +1,5 @@
+<yandex>
+    <listen_host>::</listen_host>
+    <listen_host>0.0.0.0</listen_host>
+    <listen_try>1</listen_try>
+</yandex>
diff --git a/tests/integration/test_host_regexp_hosts_file_resolution/test.py b/tests/integration/test_host_regexp_hosts_file_resolution/test.py
new file mode 100644
index 000000000000..3fd9e65cf2ac
--- /dev/null
+++ b/tests/integration/test_host_regexp_hosts_file_resolution/test.py
@@ -0,0 +1,46 @@
+import pytest
+from helpers.cluster import ClickHouseCluster, get_docker_compose_path, run_and_check
+import os
+
+DOCKER_COMPOSE_PATH = get_docker_compose_path()
+SCRIPT_DIR = os.path.dirname(os.path.realpath(__file__))
+
+cluster = ClickHouseCluster(__file__)
+
+ch_server = cluster.add_instance(
+    "clickhouse-server",
+    main_configs=["configs/listen_host.xml"],
+    user_configs=["configs/host_regexp.xml"],
+)
+
+client = cluster.add_instance(
+    "clickhouse-client",
+)
+
+
+def build_endpoint_v4(ip):
+    return f"'http://{ip}:8123/?query=SELECT+1&user=test_dns'"
+
+
+@pytest.fixture(scope="module")
+def started_cluster():
+    global cluster
+    try:
+        cluster.start()
+        yield cluster
+
+    finally:
+        cluster.shutdown()
+
+
+def test_host_regexp_multiple_ptr_hosts_file_v4(started_cluster):
+    server_ip = cluster.get_instance_ip("clickhouse-server")
+    client_ip = cluster.get_instance_ip("clickhouse-client")
+
+    ch_server.exec_in_container(
+        (["bash", "-c", f"echo '{client_ip} test1.example.com' > /etc/hosts"])
+    )
+
+    endpoint = build_endpoint_v4(server_ip)
+
+    assert "1
" == client.exec_in_container((["bash", "-c", f"curl {endpoint}"]))
