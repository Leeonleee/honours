{
  "repo": "ClickHouse/ClickHouse",
  "pull_number": 45011,
  "instance_id": "ClickHouse__ClickHouse-45011",
  "issue_numbers": [
    "44934"
  ],
  "base_commit": "1f32ffedf89236d1427cc6622ff883a5e629db6b",
  "patch": "diff --git a/packages/clickhouse-keeper.yaml b/packages/clickhouse-keeper.yaml\nindex f2095dda02a3..7586fa580e67 100644\n--- a/packages/clickhouse-keeper.yaml\n+++ b/packages/clickhouse-keeper.yaml\n@@ -12,8 +12,6 @@ priority: \"optional\"\n \n conflicts:\n - clickhouse-server\n-depends:\n-- adduser\n suggests:\n - clickhouse-keeper-dbg\n \ndiff --git a/packages/clickhouse-server.yaml b/packages/clickhouse-server.yaml\nindex fe59828ca437..018e88ef8285 100644\n--- a/packages/clickhouse-server.yaml\n+++ b/packages/clickhouse-server.yaml\n@@ -12,8 +12,6 @@ priority: \"optional\"\n \n conflicts:\n - clickhouse-keeper\n-depends:\n-- adduser\n replaces:\n - clickhouse-server-common\n - clickhouse-server-base\n",
  "test_patch": "diff --git a/docker/test/integration/runner/Dockerfile b/docker/test/integration/runner/Dockerfile\nindex ccfd63c8ed06..ce5bae2a0317 100644\n--- a/docker/test/integration/runner/Dockerfile\n+++ b/docker/test/integration/runner/Dockerfile\n@@ -8,6 +8,7 @@ RUN sed -i \"s|http://archive.ubuntu.com|$apt_archive|g\" /etc/apt/sources.list\n \n RUN apt-get update \\\n     && env DEBIAN_FRONTEND=noninteractive apt-get install --yes \\\n+    adduser \\\n     ca-certificates \\\n     bash \\\n     btrfs-progs \\\n",
  "problem_statement": "Keeper rpm install failed\n**I have tried the following solutions**: https://clickhouse.com/docs/en/faq/troubleshooting/#troubleshooting-installation-errors\r\n\r\n**Installation type**\r\n\r\nrpm local install\r\n22.12.1.1752-stable and clickhouse-22.9.7.34-stable (they are the only releases that have clickhouse-keeper rpm)\r\non RHEL 8.5\r\n\r\n**Source of the ClickHouse**\r\nhttps://github.com/ClickHouse/ClickHouse/releases/tag/v22.12.1.1752-stable\r\n\r\n\r\n**Expected result**\r\n\r\nNormal install of [clickhouse-keeper-22.12.1.1752.x86_64.rpm](https://github.com/ClickHouse/ClickHouse/releases/download/v22.12.1.1752-stable/clickhouse-keeper-22.12.1.1752.x86_64.rpm)\r\n\r\n**The actual result**\r\n```bash\r\n[root@bdtpostgres01 clickhouse-22.12.1.1752-stable]# ls -lhrt\r\ntotal 261M\r\n-rw-r----- 1 tansus tansus 120K Jan  4 09:58 clickhouse-client-22.12.1.1752.x86_64.rpm\r\n-rw-r----- 1 tansus tansus 253M Jan  4 09:58 clickhouse-common-static-22.12.1.1752.x86_64.rpm\r\n-rw-r----- 1 tansus tansus 8.3M Jan  4 09:58 clickhouse-keeper-22.12.1.1752.x86_64.rpm\r\n-rw-r----- 1 tansus tansus 145K Jan  4 09:58 clickhouse-server-22.12.1.1752.x86_64.rpm\r\n[root@bdtpostgres01 clickhouse-22.12.1.1752-stable]# yum install clickhouse-keeper-22.12.1.1752.x86_64.rpm\r\nUpdating Subscription Management repositories.\r\nEPEL8_REPO                                                                                                                                                                                                    51 kB/s | 2.3 kB     00:00\r\nError:\r\n Problem: conflicting requests\r\n  - nothing provides adduser needed by clickhouse-keeper-22.12.1.1752-1.x86_64\r\n(try to add '--skip-broken' to skip uninstallable packages or '--nobest' to use not only best candidate packages)\r\n```\r\n\r\n**How to reproduce**\r\nclickhouse-server, clickhouse-common-static and clickhouse-client install normally (and other packages as well, it is not problem with yum).\r\n```bash\r\n[root@bdtpostgres01 clickhouse-22.12.1.1752-stable]# yum install clickhouse-client-22.12.1.1752.x86_64.rpm clickhouse-common-static-22.12.1.1752.x86_64.rpm clickhouse-server-22.12.1.1752.x86_64.rpm\r\nUpdating Subscription Management repositories.\r\nEPEL8_REPO                                                                                                                                                                                                    58 kB/s | 2.3 kB     00:00\r\nDependencies resolved.\r\n=============================================================================================================================================================================================================================================\r\n Package                                                            Architecture                                     Version                                                    Repository                                              Size\r\n=============================================================================================================================================================================================================================================\r\nInstalling:\r\n clickhouse-client                                                  x86_64                                           22.12.1.1752-1                                             @commandline                                           119 k\r\n clickhouse-common-static                                           x86_64                                           22.12.1.1752-1                                             @commandline                                           252 M\r\n clickhouse-server                                                  x86_64                                           22.12.1.1752-1                                             @commandline                                           145 k\r\n\r\nTransaction Summary\r\n=============================================================================================================================================================================================================================================\r\nInstall  3 Packages\r\n\r\nTotal size: 253 M\r\nInstalled size: 721 M\r\nIs this ok [y/N]: y\r\n...\r\n\r\nInstalled:\r\n  clickhouse-client-22.12.1.1752-1.x86_64                                     clickhouse-common-static-22.12.1.1752-1.x86_64                                     clickhouse-server-22.12.1.1752-1.x86_64\r\n\r\nComplete!\r\n```\r\n\r\nmanual rpm extract:\r\n```bash\r\n[root@bdtpostgres01 clickhouse-22.12.1.1752-stable]# rpm2cpio clickhouse-keeper-22.12.1.1752.x86_64.rpm | cpio -idmv\r\n/etc/clickhouse-keeper/keeper_config.xml\r\ncpio: /usr/bin/clickhouse-keeper not created: newer or same age version exists\r\n/usr/bin/clickhouse-keeper\r\n/usr/share/doc/clickhouse-keeper/AUTHORS\r\n/usr/share/doc/clickhouse-keeper/CHANGELOG.md\r\n/usr/share/doc/clickhouse-keeper/LICENSE\r\n/usr/share/doc/clickhouse-keeper/README.md\r\n43901 blocks\r\n```\r\n\r\n\n",
  "hints_text": "",
  "created_at": "2023-01-07T00:47:18Z"
}