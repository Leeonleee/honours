You will be provided with a partial code base and an issue statement explaining a problem to resolve.

<issue>
Combining ARRAY JOIN with JOIN
**Describe the unexpected behaviour**
The following query worked fine in 21.3, but stopped working in 21.4+

**How to reproduce**
ClickHouse server: 21.4 or later
```
SELECT * FROM (
    SELECT [dummy, dummy] AS dummy FROM system.one
) x ARRAY JOIN dummy
JOIN system.one USING dummy
```
**Expected behavior**
Query should run without errors

**Error message and/or stacktrace**
```
Code: 53, e.displayText() = DB::Exception: Type mismatch of columns to JOIN by: dummy: Array(UInt8) at left, one.dummy: UInt8 at right. Can't get supertype: There is no supertype for types Array(UInt8), UInt8 because some of them are Array and some of them are not (version 21.4.7.3 (official build))
```
</issue>

I need you to solve the provided issue by generating a code fix that can be applied directly to the repository

Respond below:
