{
  "repo": "ClickHouse/ClickHouse",
  "pull_number": 46276,
  "instance_id": "ClickHouse__ClickHouse-46276",
  "issue_numbers": [
    "46203"
  ],
  "base_commit": "27bc317ef9a1aed522e8570cda92e67144ba41c4",
  "patch": "diff --git a/docs/en/operations/server-configuration-parameters/settings.md b/docs/en/operations/server-configuration-parameters/settings.md\nindex 7e7422f90455..791333826f6b 100644\n--- a/docs/en/operations/server-configuration-parameters/settings.md\n+++ b/docs/en/operations/server-configuration-parameters/settings.md\n@@ -606,6 +606,7 @@ Keys:\n -   `size` \u2013 Size of the file. Applies to `log` and `errorlog`. Once the file reaches `size`, ClickHouse archives and renames it, and creates a new log file in its place.\n -   `count` \u2013 The number of archived log files that ClickHouse stores.\n -   `console` \u2013 Send `log` and `errorlog` to the console instead of file. To enable, set to `1` or `true`.\n+-   `stream_compress` \u2013 Compress `log` and `errorlog` with `lz4` stream compression. To enable, set to `1` or `true`.\n \n **Example**\n \n@@ -616,6 +617,7 @@ Keys:\n     <errorlog>/var/log/clickhouse-server/clickhouse-server.err.log</errorlog>\n     <size>1000M</size>\n     <count>10</count>\n+    <stream_compress>true</stream_compress>\n </logger>\n ```\n \n",
  "test_patch": "diff --git a/tests/integration/test_log_lz4_streaming/configs/logs.xml b/tests/integration/test_log_lz4_streaming/configs/logs.xml\nindex 43a43cd231b9..52c3a2e1842f 100644\n--- a/tests/integration/test_log_lz4_streaming/configs/logs.xml\n+++ b/tests/integration/test_log_lz4_streaming/configs/logs.xml\n@@ -1,5 +1,5 @@\n-<yandex>\n+<clickhouse>\n     <logger>\n         <stream_compress>true</stream_compress>\n     </logger>\n-</yandex>\n+</clickhouse>\n",
  "problem_statement": "Document stream log compression\n\r\n**Describe the issue**\r\n\r\nI wanted to set up log compression, and as I didn't find relevant information in docs I started googling around and I came across this issue: https://github.com/ClickHouse/ClickHouse/issues/23860, and then went on to this merged to master pull request: https://github.com/ClickHouse/ClickHouse/pull/29219\r\n\r\nwhich does exactly what I want - implements log compression via LZ4.\r\n\r\nBased on this line `if (config.getRawString(\"logger.stream_compress\", \"false\") == \"true\")`\r\nI tried to set it up via `<stream_compress>` setting in `<logger>`, and it all worked flawlessly - logs are compressed!\r\n\r\nThere is no mention of this option in [logger docs](https://clickhouse.com/docs/en/operations/server-configuration-parameters/settings/#server_configuration_parameters-logger), even tho this change was merged over a year ago. Is there any particular reason for that? Is this change experimental and not advised to use, or rather is it just a missing entry in the docs? I'm asking as I'm a bit hesitant to use undocumented feature on production.\n",
  "hints_text": "",
  "created_at": "2023-02-10T14:05:16Z",
  "modified_files": [
    "docs/en/operations/server-configuration-parameters/settings.md"
  ],
  "modified_test_files": [
    "tests/integration/test_log_lz4_streaming/configs/logs.xml"
  ]
}