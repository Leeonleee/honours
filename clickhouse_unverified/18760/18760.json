{
  "repo": "ClickHouse/ClickHouse",
  "pull_number": 18760,
  "instance_id": "ClickHouse__ClickHouse-18760",
  "issue_numbers": [
    "18707"
  ],
  "base_commit": "56f3a3b6c71b3d9af95652d9125cb5ffeaea9d6e",
  "patch": "diff --git a/src/Parsers/ExpressionListParsers.cpp b/src/Parsers/ExpressionListParsers.cpp\nindex f50cf71f54de..afe85f069c76 100644\n--- a/src/Parsers/ExpressionListParsers.cpp\n+++ b/src/Parsers/ExpressionListParsers.cpp\n@@ -18,6 +18,8 @@ const char * ParserMultiplicativeExpression::operators[] =\n     \"*\",     \"multiply\",\n     \"/\",     \"divide\",\n     \"%\",     \"modulo\",\n+    \"MOD\",   \"modulo\",\n+    \"DIV\",   \"intDiv\",\n     nullptr\n };\n \n",
  "test_patch": "diff --git a/tests/queries/0_stateless/00977_int_div.reference b/tests/queries/0_stateless/00977_int_div.reference\nindex 39e135d8eeda..e5882f4aaba0 100644\n--- a/tests/queries/0_stateless/00977_int_div.reference\n+++ b/tests/queries/0_stateless/00977_int_div.reference\n@@ -81,3 +81,43 @@\n -1\n -1\n -1\n+-1\n+0\n+0\n+0\n+0\n+0\n+0\n+0\n+0\n+0\n+-1\n+-2\n+-3\n+-4\n+-5\n+-6\n+-7\n+-8\n+-9\n+-10\n+-1\n+-2\n+-3\n+-4\n+-5\n+-6\n+-7\n+-8\n+-9\n+-10\n+-1\n+-1\n+-1\n+-1\n+-1\n+-1\n+-1\n+-1\n+-1\n+-1\ndiff --git a/tests/queries/0_stateless/00977_int_div.sql b/tests/queries/0_stateless/00977_int_div.sql\nindex 08085020ca5f..4184475e3a03 100644\n--- a/tests/queries/0_stateless/00977_int_div.sql\n+++ b/tests/queries/0_stateless/00977_int_div.sql\n@@ -23,3 +23,9 @@ SELECT intDiv(toInt64(number), -1) FROM numbers(1, 10);\n SELECT intDivOrZero(toInt64(number), -1) FROM numbers(1, 10);\n SELECT intDiv(number, -number) FROM numbers(1, 10);\n SELECT intDivOrZero(number, -number) FROM numbers(1, 10);\n+\n+SELECT -1 DIV number FROM numbers(1, 10);\n+SELECT toInt32(number) DIV -1 FROM numbers(1, 10);\n+SELECT toInt64(number) DIV -1 FROM numbers(1, 10);\n+SELECT number DIV -number FROM numbers(1, 10);\n+SELECT -1 DIV 0;  -- { serverError 153 }\ndiff --git a/tests/queries/0_stateless/01412_mod_float.reference b/tests/queries/0_stateless/01412_mod_float.reference\nindex 77e3431f7a97..94f7f6d3af71 100644\n--- a/tests/queries/0_stateless/01412_mod_float.reference\n+++ b/tests/queries/0_stateless/01412_mod_float.reference\n@@ -1,3 +1,7 @@\n 1\t-1\t1\t-1\n 0.125\t-0.125\t0.125\t-0.125\n 1\t-1\t1\t-1\n+1\t-1\t1\t-1\n+0.125\t-0.125\t0.125\t-0.125\n+nan\n+nan\ndiff --git a/tests/queries/0_stateless/01412_mod_float.sql b/tests/queries/0_stateless/01412_mod_float.sql\nindex 147cb88ff240..f2a5f2fcee69 100644\n--- a/tests/queries/0_stateless/01412_mod_float.sql\n+++ b/tests/queries/0_stateless/01412_mod_float.sql\n@@ -1,3 +1,7 @@\n WITH 8.5 AS a, 2.5 AS b SELECT a % b, -a % b, a % -b, -a % -b;\n WITH 10.125 AS a, 2.5 AS b SELECT a % b, -a % b, a % -b, -a % -b;\n WITH 8.5 AS a, 2.5 AS b SELECT mod(a, b), MOD(-a, b), modulo(a, -b), moduloOrZero(-a, -b);\n+WITH 8.5 AS a, 2.5 AS b SELECT a MOD b, -a MOD b, a MOD -b, -a MOD -b;\n+WITH 10.125 AS a, 2.5 AS b SELECT a MOD b, -a MOD b, a MOD -b, -a MOD -b;\n+SELECT 3.5 % 0;\n+SELECT 3.5 MOD 0;\n",
  "problem_statement": "MySQL compatibility: DIV and MOD operators\nhttps://dev.mysql.com/doc/refman/8.0/en/arithmetic-functions.html\r\n\r\n**Use case**\r\n`a DIV b` - the same as `intDiv(a, b)`\r\n`a MOD b` - the same as `modulo(a, b)`\n",
  "hints_text": "I'd like to try this if it's ok :)\n@spongedu That will be awesome!",
  "created_at": "2021-01-05T05:03:59Z"
}