diff --git a/tests/queries/0_stateless/01532_clickhouse_local_tmp_folder.reference b/tests/queries/0_stateless/01532_clickhouse_local_tmp_folder.reference
new file mode 100644
index 000000000000..d00491fd7e5b
--- /dev/null
+++ b/tests/queries/0_stateless/01532_clickhouse_local_tmp_folder.reference
@@ -0,0 +1,1 @@
+1
diff --git a/tests/queries/0_stateless/01532_clickhouse_local_tmp_folder.sh b/tests/queries/0_stateless/01532_clickhouse_local_tmp_folder.sh
new file mode 100755
index 000000000000..f341fbcdd9b4
--- /dev/null
+++ b/tests/queries/0_stateless/01532_clickhouse_local_tmp_folder.sh
@@ -0,0 +1,8 @@
+#!/usr/bin/env bash
+
+CURDIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
+. "$CURDIR"/../shell_config.sh
+
+# in case when clickhouse-local can't use temp folder it will try to create
+# temporary subfolder in the current dir
+TMP=/non-existent-folder-12123 ${CLICKHOUSE_LOCAL} -q 'SELECT 1'
