diff --git a/tests/queries/0_stateless/01358_union_threads_bug.reference b/tests/queries/0_stateless/01358_union_threads_bug.reference
new file mode 100644
index 000000000000..4397f4e2fdd5
--- /dev/null
+++ b/tests/queries/0_stateless/01358_union_threads_bug.reference
@@ -0,0 +1,2 @@
+300
+1
diff --git a/tests/queries/0_stateless/01358_union_threads_bug.sql b/tests/queries/0_stateless/01358_union_threads_bug.sql
new file mode 100644
index 000000000000..0c07364f41ca
--- /dev/null
+++ b/tests/queries/0_stateless/01358_union_threads_bug.sql
@@ -0,0 +1,7 @@
+set log_queries = 1;
+set max_threads = 16;
+
+SELECT count() FROM (SELECT number FROM numbers_mt(1000000) ORDER BY number DESC LIMIT 100 UNION ALL SELECT number FROM numbers_mt(1000000) ORDER BY number DESC LIMIT 100 UNION ALL SELECT number FROM numbers_mt(1000000) ORDER BY number DESC LIMIT 100);
+
+system flush logs;
+select length(thread_ids) >= 16 from system.query_log where event_date >= today() - 1 and query like '%SELECT count() FROM (SELECT number FROM numbers_mt(1000000) ORDER BY number DESC LIMIT 100 UNION ALL SELECT number FROM numbers_mt(1000000) ORDER BY number DESC LIMIT 100 UNION ALL SELECT number FROM numbers_mt(1000000) ORDER BY number DESC LIMIT 100)%' and type = 'QueryFinish' order by query_start_time desc limit 1;
