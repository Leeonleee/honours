diff --git a/tests/queries/0_stateless/02295_global_with_in_subquery.reference b/tests/queries/0_stateless/02295_global_with_in_subquery.reference
new file mode 100644
index 000000000000..c7f1a39a2b8a
--- /dev/null
+++ b/tests/queries/0_stateless/02295_global_with_in_subquery.reference
@@ -0,0 +1,4 @@
+1	1
+1	1
+1
+2
diff --git a/tests/queries/0_stateless/02295_global_with_in_subquery.sql b/tests/queries/0_stateless/02295_global_with_in_subquery.sql
new file mode 100644
index 000000000000..d70209bbcc0b
--- /dev/null
+++ b/tests/queries/0_stateless/02295_global_with_in_subquery.sql
@@ -0,0 +1,17 @@
+-- https://github.com/ClickHouse/ClickHouse/issues/37141
+
+WITH (SELECT 1) as v0
+SELECT v0, v > 0 FROM (
+    WITH (SELECT 1) AS v1, (SELECT 2) AS v2
+    SELECT v1 AS v
+    UNION ALL
+    SELECT v2 AS v
+) AS a;
+
+SELECT number FROM numbers(10)
+WHERE number IN (
+    WITH (SELECT 1) AS v1, (SELECT 2) AS v2
+    SELECT v1 AS v
+    UNION ALL
+    SELECT v2 AS v
+);
