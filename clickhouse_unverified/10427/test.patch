diff --git a/tests/queries/1_stateful/00094_order_by_array_join_limit.reference b/tests/queries/1_stateful/00094_order_by_array_join_limit.reference
new file mode 100644
index 000000000000..a8be94b54704
--- /dev/null
+++ b/tests/queries/1_stateful/00094_order_by_array_join_limit.reference
@@ -0,0 +1,8 @@
+['']
+['']
+
+
+[]
+[]
+['']
+['']
diff --git a/tests/queries/1_stateful/00094_order_by_array_join_limit.sql b/tests/queries/1_stateful/00094_order_by_array_join_limit.sql
new file mode 100644
index 000000000000..1c2d9f0164e7
--- /dev/null
+++ b/tests/queries/1_stateful/00094_order_by_array_join_limit.sql
@@ -0,0 +1,9 @@
+SELECT `ParsedParams.Key2` AS x
+FROM test.hits
+ARRAY JOIN ParsedParams AS PP
+ORDER BY x ASC
+LIMIT 2;
+
+SELECT arrayJoin(`ParsedParams.Key2`) AS x FROM test.hits ORDER BY x ASC LIMIT 2;
+WITH arrayJoin(`ParsedParams.Key2`) AS pp SELECT ParsedParams.Key2 AS x FROM test.hits ORDER BY x ASC LIMIT 2;
+WITH arrayJoin(`ParsedParams.Key2`) AS pp SELECT ParsedParams.Key2 AS x FROM test.hits WHERE NOT ignore(pp) ORDER BY x ASC LIMIT 2;
