diff --git a/tests/integration/test_mask_sensitive_info/test.py b/tests/integration/test_mask_sensitive_info/test.py
index 97a0e33e8bdd..016b99cb6e98 100644
--- a/tests/integration/test_mask_sensitive_info/test.py
+++ b/tests/integration/test_mask_sensitive_info/test.py
@@ -504,6 +504,22 @@ def make_test_case(i):
         if not error:
             node.query(f"DROP TABLE {table_name}")
 
+    # Check EXPLAIN QUERY TREE
+    secrets = [password, azure_account_key]
+    for toggle in range(2):
+        for table_function in table_functions:
+            # check only table functions containing secrets
+            if any(word in table_function for word in secrets):
+                output = node.query(
+                    f"EXPLAIN QUERY TREE run_passes=0 SELECT * FROM {table_function} {show_secrets}={toggle}"
+                )
+                is_secret_present = any(word in output for word in secrets)
+                if toggle:
+                    assert is_secret_present
+                else:
+                    assert not is_secret_present
+                    assert "[HIDDEN]" in output
+
 
 def test_table_function_ways_to_call():
     password = new_password()
diff --git a/tests/queries/0_stateless/02479_mysql_connect_to_self.reference b/tests/queries/0_stateless/02479_mysql_connect_to_self.reference
index 8057b945c5a9..9e95a2651556 100644
--- a/tests/queries/0_stateless/02479_mysql_connect_to_self.reference
+++ b/tests/queries/0_stateless/02479_mysql_connect_to_self.reference
@@ -59,7 +59,7 @@ QUERY id: 0
               FUNCTION id: 10, function_name: currentDatabase, function_type: ordinary, result_type: String
           IDENTIFIER id: 11, identifier: foo
           CONSTANT id: 12, constant_value: \'default\', constant_value_type: String
-          CONSTANT id: 13, constant_value: \'\', constant_value_type: String
+          CONSTANT id: 13, constant_value: [HIDDEN], constant_value_type: String
       SETTINGS connection_wait_timeout=123 connect_timeout=40123002 read_write_timeout=40123001 connection_pool_size=3
 
 SELECT
@@ -67,6 +67,6 @@ SELECT
     __table1.a AS a,
     __table1.b AS b,
     __table1.c AS c
-FROM mysql(\'127.0.0.1:9004\', _CAST(\'default\', \'String\'), foo, \'default\', \'\', SETTINGS connection_wait_timeout = 123, connect_timeout = 40123002, read_write_timeout = 40123001, connection_pool_size = 3) AS __table1
+FROM mysql(\'127.0.0.1:9004\', _CAST(\'default\', \'String\'), foo, \'default\', \'[HIDDEN]\', SETTINGS connection_wait_timeout = 123, connect_timeout = 40123002, read_write_timeout = 40123001, connection_pool_size = 3) AS __table1
 ---
 5
