diff --git a/tests/queries/0_stateless/01387_clear_column_default_depends.reference b/tests/queries/0_stateless/01387_clear_column_default_depends.reference
new file mode 100644
index 000000000000..308a6ca52fbb
--- /dev/null
+++ b/tests/queries/0_stateless/01387_clear_column_default_depends.reference
@@ -0,0 +1,18 @@
+1	2
+2	3
+3	4
+0	2
+0	3
+0	4
+1	2
+2	3
+3	4
+0	2
+0	3
+0	4
+1	2
+2	3
+3	4
+0	1
+0	1
+0	1
diff --git a/tests/queries/0_stateless/01387_clear_column_default_depends.sql b/tests/queries/0_stateless/01387_clear_column_default_depends.sql
new file mode 100644
index 000000000000..21a41f09df6c
--- /dev/null
+++ b/tests/queries/0_stateless/01387_clear_column_default_depends.sql
@@ -0,0 +1,36 @@
+-- It's Ok to CLEAR column when there are columns with default expression depending on it.
+-- But it's not Ok to DROP such column.
+
+DROP TABLE IF EXISTS test;
+CREATE TABLE test (x UInt8, y UInt8 DEFAULT x + 1) ENGINE = MergeTree ORDER BY tuple();
+INSERT INTO test (x) VALUES (1), (2), (3);
+SELECT * FROM test ORDER BY x, y;
+ALTER TABLE test CLEAR COLUMN x;
+SELECT * FROM test ORDER BY x, y;
+ALTER TABLE test DROP COLUMN x; -- { serverError 44 }
+DROP TABLE test;
+
+DROP TABLE IF EXISTS test;
+CREATE TABLE test (x UInt8, y UInt8 MATERIALIZED x + 1) ENGINE = MergeTree ORDER BY tuple();
+INSERT INTO test (x) VALUES (1), (2), (3);
+SELECT x, y FROM test ORDER BY x, y;
+ALTER TABLE test CLEAR COLUMN x;
+SELECT x, y FROM test ORDER BY x, y;
+ALTER TABLE test DROP COLUMN x; -- { serverError 44 }
+DROP TABLE test;
+
+DROP TABLE IF EXISTS test;
+CREATE TABLE test (x UInt8, y UInt8 ALIAS x + 1, z String DEFAULT 'Hello') ENGINE = MergeTree ORDER BY tuple();
+INSERT INTO test (x) VALUES (1), (2), (3);
+SELECT x, y FROM test ORDER BY x, y;
+ALTER TABLE test CLEAR COLUMN x;
+SELECT x, y FROM test ORDER BY x, y;
+ALTER TABLE test DROP COLUMN x; -- { serverError 44 }
+DROP TABLE test;
+
+
+-- The original report from Mikhail Petrov
+DROP TABLE IF EXISTS Test;
+create table Test (impression_id String,impression_id_compressed FixedString(16) DEFAULT UUIDStringToNum(substring(impression_id, 1, 36)), impression_id_hashed UInt16 DEFAULT reinterpretAsUInt16(impression_id_compressed), event_date Date ) ENGINE = MergeTree(event_date, impression_id_hashed, (event_date, impression_id_hashed), 8192);
+alter table Test clear column impression_id in partition '202001';
+DROP TABLE Test;
