diff --git a/src/Functions/array/arrayCompact.cpp b/src/Functions/array/arrayCompact.cpp
index 5b13c8d04b9b..e0f73207da8d 100644
--- a/src/Functions/array/arrayCompact.cpp
+++ b/src/Functions/array/arrayCompact.cpp
@@ -2,6 +2,7 @@
 #include <DataTypes/DataTypesDecimal.h>
 #include <Columns/ColumnsNumber.h>
 #include <Columns/ColumnDecimal.h>
+#include <Common/HashTable/HashTable.h>
 #include <Functions/array/FunctionArrayMapped.h>
 #include <Functions/FunctionFactory.h>
 
@@ -67,7 +68,7 @@ struct ArrayCompactImpl
                 ++res_pos;
                 for (; src_pos < src_offset; ++src_pos)
                 {
-                    if (src_values[src_pos] != src_values[src_pos - 1])
+                    if (!bitEquals(src_values[src_pos], src_values[src_pos - 1]))
                     {
                         res_values[res_pos] = src_values[src_pos];
                         ++res_pos;
