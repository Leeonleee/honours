{
  "repo": "ydb-platform/ydb",
  "pull_number": 19452,
  "instance_id": "ydb-platform__ydb-19452",
  "issue_numbers": [
    "19413"
  ],
  "base_commit": "f1bd766c37c092f6872ec5dc4f4847f55965dff3",
  "patch": "diff --git a/.github/workflows/nightly_build.yml b/.github/workflows/nightly_build.yml\nindex ee42267acb38..2bc7cfd64657 100644\n--- a/.github/workflows/nightly_build.yml\n+++ b/.github/workflows/nightly_build.yml\n@@ -9,7 +9,9 @@ on:\n         type: boolean\n         required: false\n         default: true\n-\n+  push:\n+    tags:\n+      - '[0-9]**'\n jobs:\n   determine_branches:\n     runs-on: ubuntu-latest\n@@ -18,7 +20,7 @@ jobs:\n     steps:\n       - id: set-branches\n         run: |\n-          if [[ \"${{ github.event_name }}\" == \"schedule\" || \"${{ inputs.use_default_branches }}\" == \"true\" ]]; then\n+          if [[ \"${{ github.event_name }}\" == \"schedule\" || (\"${{ inputs.use_default_branches }}\" == \"true\"  && \"${{ github.ref_type }}\" != \"tag\") ]]; then\n             echo \"branches=['main', 'stable-25-1', 'stable-24-4', 'stable-25-1-1', 'stable-25-1-analytics']\" >> $GITHUB_OUTPUT\n           else\n             echo \"branches=['${{ github.ref_name }}']\" >> $GITHUB_OUTPUT\n@@ -51,8 +53,9 @@ jobs:\n         increment: false\n         run_tests: false\n         put_build_results_to_cache: false\n-        secs: ${{ format('{{\"TESTMO_TOKEN2\":\"{0}\",\"AWS_KEY_ID\":\"{1}\",\"AWS_KEY_VALUE\":\"{2}\",\"REMOTE_CACHE_USERNAME\":\"{3}\",\"REMOTE_CACHE_PASSWORD\":\"{4}\"}}',\n-          secrets.TESTMO_TOKEN2, secrets.AWS_KEY_ID, secrets.AWS_KEY_VALUE, secrets.REMOTE_CACHE_USERNAME, secrets.REMOTE_CACHE_PASSWORD ) }}\n+        additional_ya_make_args: \"-DDEBUGINFO_LINES_ONLY\" # we don't need full symbols in CI checks\n+        secs: ${{ format('{{\"AWS_KEY_ID\":\"{0}\",\"AWS_KEY_VALUE\":\"{1}\",\"REMOTE_CACHE_USERNAME\":\"{2}\",\"REMOTE_CACHE_PASSWORD\":\"{3}\"}}',\n+          secrets.AWS_KEY_ID, secrets.AWS_KEY_VALUE, secrets.REMOTE_CACHE_USERNAME, secrets.REMOTE_CACHE_PASSWORD ) }}\n         vars: ${{ format('{{\"AWS_BUCKET\":\"{0}\",\"AWS_ENDPOINT\":\"{1}\",\"REMOTE_CACHE_URL\":\"{2}\",\"TESTMO_URL\":\"{3}\",\"TESTMO_PROJECT_ID\":\"{4}\"}}',\n           vars.AWS_BUCKET, vars.AWS_ENDPOINT, vars.REMOTE_CACHE_URL_YA, vars.TESTMO_URL, vars.TESTMO_PROJECT_ID ) }}\n     - name: Setup s3cmd\n",
  "test_patch": "diff --git a/.github/actions/test_ya/action.yml b/.github/actions/test_ya/action.yml\nindex c41fdbbc01be..e74d029cd6e6 100644\n--- a/.github/actions/test_ya/action.yml\n+++ b/.github/actions/test_ya/action.yml\n@@ -287,7 +287,7 @@ runs:\n         echo \"BRANCH_NAME=$BRANCH_NAME\" >> $GITHUB_ENV\n         echo \"BRANCH_NAME is set to $BRANCH_NAME\"\n \n-        TESTMO_BRANCH_TAG=\"$BRANCH_NAME\"\n+        TESTMO_BRANCH_TAG=\"${BRANCH_NAME//[^a-zA-Z0-9-]/-}\"\n         TESTMO_ARCH=\"${{ runner.arch == 'X64' && 'x86-64' || runner.arch == 'ARM64' && 'arm64' || 'unknown' }}\"\n         TESTMO_PR_NUMBER=${{ github.event.number }}\n \n",
  "problem_statement": "Add ability to build tags in nightly build\n\u041d\u0443\u0436\u043d\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0441\u0431\u043e\u0440\u043a\u0438 \u0442\u0435\u0433\u043e\u0432 \u0432 s3 \u0432 \nhttps://github.com/ydb-platform/ydb/actions/workflows/nightly_build.yml \n\n\n",
  "hints_text": "",
  "created_at": "2025-06-06T15:37:26Z"
}