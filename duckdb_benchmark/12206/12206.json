{
  "repo": "duckdb/duckdb",
  "pull_number": 12206,
  "instance_id": "duckdb__duckdb-12206",
  "issue_numbers": [
    "12190",
    "12190"
  ],
  "base_commit": "d6c92486f3639c471b1a168fd7548ade6692b2aa",
  "patch": "diff --git a/src/main/attached_database.cpp b/src/main/attached_database.cpp\nindex b854760dce96..e32a1a0d0191 100644\n--- a/src/main/attached_database.cpp\n+++ b/src/main/attached_database.cpp\n@@ -82,7 +82,7 @@ bool AttachedDatabase::IsReadOnly() const {\n }\n \n bool AttachedDatabase::NameIsReserved(const string &name) {\n-\treturn name == DEFAULT_SCHEMA || name == TEMP_CATALOG;\n+\treturn name == DEFAULT_SCHEMA || name == TEMP_CATALOG || name == SYSTEM_CATALOG;\n }\n \n string AttachedDatabase::ExtractDatabaseName(const string &dbpath, FileSystem &fs) {\n",
  "test_patch": "diff --git a/test/sql/attach/attach_reserved.test b/test/sql/attach/attach_reserved.test\nindex 986f7801ce2b..f1a4709ec6b6 100644\n--- a/test/sql/attach/attach_reserved.test\n+++ b/test/sql/attach/attach_reserved.test\n@@ -18,6 +18,16 @@ CREATE TABLE temp_db.integers(i INTEGER);\n statement ok\n DETACH temp_db;\n \n+# attach a new database called temp\n+statement ok\n+ATTACH DATABASE '__TEST_DIR__/system.db';\n+\n+statement ok\n+CREATE TABLE system_db.integers(i INTEGER);\n+\n+statement ok\n+DETACH system_db;\n+\n # explicitly selecting these aliases leads to an error\n statement error\n ATTACH DATABASE ':memory:' AS temp;\n@@ -28,3 +38,8 @@ statement error\n ATTACH DATABASE ':memory:' AS main;\n ----\n reserved name\n+\n+statement error\n+ATTACH DATABASE ':memory:' AS system;\n+----\n+reserved name\n",
  "problem_statement": "Improve error message for databases named 'system'\n### What happens?\n\nWhen naming a database `system` the error resulting message [1] is unhelpful.\r\nAs a result, users unaware of https://duckdb.org/docs/sql/keywords_and_identifiers.html may spend many hours debugging.\r\nIn addition to improving the error message, the documentation should say \"mandatory\" instead \"best practice\".\r\n\r\n[1] BinderException: Binder Error: Cannot create entry in system catalog\n\n### To Reproduce\n\n# python file\r\nimport duckdb\r\ncon = duckdb.connect(database=\"system.db\")\r\ncon.execute(\"CREATE TABLE test (name varchar)\")\n\n### OS:\n\niOS\n\n### DuckDB Version:\n\n0.10\n\n### DuckDB Client:\n\nPython\n\n### Full Name:\n\nDirk Petzoldt\n\n### Affiliation:\n\nfounder\n\n### What is the latest build you tested with? If possible, we recommend testing with the latest nightly build.\n\nI have tested with a stable release\n\n### Did you include all relevant data sets for reproducing the issue?\n\nNot applicable - the reproduction does not require a data set\n\n### Did you include all code required to reproduce the issue?\n\n- [X] Yes, I have\n\n### Did you include all relevant configuration (e.g., CPU architecture, Python version, Linux distribution) to reproduce the issue?\n\n- [ ] Yes, I have\nImprove error message for databases named 'system'\n### What happens?\n\nWhen naming a database `system` the error resulting message [1] is unhelpful.\r\nAs a result, users unaware of https://duckdb.org/docs/sql/keywords_and_identifiers.html may spend many hours debugging.\r\nIn addition to improving the error message, the documentation should say \"mandatory\" instead \"best practice\".\r\n\r\n[1] BinderException: Binder Error: Cannot create entry in system catalog\n\n### To Reproduce\n\n# python file\r\nimport duckdb\r\ncon = duckdb.connect(database=\"system.db\")\r\ncon.execute(\"CREATE TABLE test (name varchar)\")\n\n### OS:\n\niOS\n\n### DuckDB Version:\n\n0.10\n\n### DuckDB Client:\n\nPython\n\n### Full Name:\n\nDirk Petzoldt\n\n### Affiliation:\n\nfounder\n\n### What is the latest build you tested with? If possible, we recommend testing with the latest nightly build.\n\nI have tested with a stable release\n\n### Did you include all relevant data sets for reproducing the issue?\n\nNot applicable - the reproduction does not require a data set\n\n### Did you include all code required to reproduce the issue?\n\n- [X] Yes, I have\n\n### Did you include all relevant configuration (e.g., CPU architecture, Python version, Linux distribution) to reproduce the issue?\n\n- [ ] Yes, I have\n",
  "hints_text": "\n",
  "created_at": "2024-05-23T09:28:06Z",
  "modified_files": [
    "src/main/attached_database.cpp"
  ],
  "modified_test_files": [
    "test/sql/attach/attach_reserved.test"
  ]
}